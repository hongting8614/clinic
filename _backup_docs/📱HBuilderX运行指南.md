# 📱 HBuilderX 运行编译指南

## 🚀 快速开始

### 方法1：顶部菜单运行（推荐）

```
1. 点击顶部菜单「运行」
2. 选择「运行到小程序模拟器」
3. 选择「微信开发者工具」
4. 等待编译完成
```

### 方法2：工具栏运行

```
1. 找到工具栏的「运行」图标（▶️）
2. 点击下拉箭头
3. 选择「运行 - 微信开发者工具」
4. 等待编译完成
```

### 方法3：快捷键（最快）⚡

```
按 Ctrl+R（Windows）
或 Command+R（Mac）
→ 自动编译并运行到微信开发者工具
```

---

## 📋 详细步骤

### 第1步：确认微信开发者工具已打开

在运行之前，需要：
1. 打开「微信开发者工具」
2. 确保工具处于开启状态（不需要打开任何项目）

### 第2步：在HBuilderX中运行

**方法A：菜单运行**
```
顶部菜单栏
→ 运行(R)
→ 运行到小程序模拟器
→ 微信开发者工具
```

**方法B：右键运行**
```
在项目根目录上右键
→ 运行
→ 运行到小程序模拟器
→ 微信开发者工具
```

**方法C：快捷键**
```
Ctrl+R (Windows)
Command+R (Mac)
```

### 第3步：等待编译

HBuilderX会：
1. 自动编译项目
2. 在底部「控制台」显示编译进度
3. 编译完成后自动打开/刷新微信开发者工具

---

## 🔍 编译输出位置

编译后的文件在：
```
项目根目录/unpackage/dist/dev/mp-weixin/
```

这个目录会自动在微信开发者工具中打开。

---

## ⚙️ 首次运行配置

### 如果首次使用，需要配置微信开发者工具路径：

1. **点击菜单**：`工具` → `设置` → `运行配置`

2. **找到「微信开发者工具路径」**

3. **填入路径**（根据你的安装位置）：

**Windows 默认路径：**
```
C:\Program Files\Tencent\微信web开发者工具\cli.bat
```

**Mac 默认路径：**
```
/Applications/wechatwebdevtools.app/Contents/MacOS/cli
```

4. **保存设置**

5. **重新运行项目**

---

## 🔧 常见问题

### Q1: 提示"未找到微信开发者工具"？

**解决方法：**
```
1. 确认微信开发者工具已安装
2. 检查工具路径配置是否正确
3. 重启HBuilderX
```

### Q2: 编译后微信开发者工具没有自动打开？

**解决方法：**
```
1. 手动打开微信开发者工具
2. 点击「导入项目」
3. 选择路径：你的项目/unpackage/dist/dev/mp-weixin/
4. AppID填写你的小程序AppID（或使用测试号）
```

### Q3: 修改代码后没有更新？

**解决方法：**
```
方法1：自动刷新
- HBuilderX会自动监听文件变化
- 保存文件（Ctrl+S）后会自动重新编译

方法2：手动重新编译
- 再次按 Ctrl+R
- 或点击「运行」菜单重新运行
```

### Q4: 控制台报错"编译失败"？

**检查清单：**
```
✅ 检查代码语法是否正确
✅ 检查package.json是否完整
✅ 检查pages.json配置是否正确
✅ 查看控制台的具体错误信息
```

---

## 🎯 运行模式说明

### 开发模式（默认）
```
运行 → 运行到小程序模拟器 → 微信开发者工具
↓
编译到：unpackage/dist/dev/mp-weixin/
特点：支持热更新，方便调试
```

### 发行模式（打包上线）
```
发行 → 小程序-微信
↓
编译到：unpackage/dist/build/mp-weixin/
特点：代码压缩、优化，体积更小
```

---

## 🔥 高效开发技巧

### 1. 启用自动保存
```
工具 → 设置 → 编辑器设置
→ 勾选「保存时自动格式化」
→ 勾选「失焦时自动保存」
```

### 2. 开启实时预览
```
修改代码 → Ctrl+S 保存 → 自动编译 → 微信工具自动刷新
```

### 3. 查看编译日志
```
底部「控制台」选项卡
→ 可以看到详细的编译过程
→ 如有错误会显示在这里
```

---

## 📸 界面示意

### HBuilderX 运行菜单位置：

```
┌─────────────────────────────────────────┐
│ 文件  编辑  选择  查找  运行(R)  发行  工具│  ← 顶部菜单
└─────────────────────────────────────────┘
              ↓
       点击「运行(R)」
              ↓
    ┌──────────────────────────┐
    │ 运行到小程序模拟器         │
    │   → 微信开发者工具   ✓    │  ← 选这个
    │   → 支付宝开发者工具       │
    │   → 百度开发者工具         │
    └──────────────────────────┘
```

---

## ✅ 验证运行成功

运行成功后，应该看到：

**HBuilderX控制台：**
```
[编译器] 开始编译...
[编译器] 编译成功！
[编译器] 正在启动微信开发者工具...
```

**微信开发者工具：**
```
- 自动打开/刷新
- 显示你的小程序界面
- 可以在模拟器中查看和调试
```

---

## 🎯 本次修复验证步骤

修复了「药品选择器」空状态问题后：

1. **在HBuilderX中按 Ctrl+R**
2. **等待编译完成**
3. **在微信开发者工具中进入「药品入库」页面**
4. **点击「从档案选择」按钮**
5. **验证：**
   - ✅ 弹窗打开时应该显示「加载中...」
   - ✅ 加载完成后应该显示药品列表
   - ✅ 不应该闪现「未找到相关药品」的空状态

---

## 💡 温馨提示

- 第一次编译可能需要较长时间（1-2分钟）
- 后续修改代码，保存后会自动增量编译（很快）
- 建议开启「自动保存」功能，提高开发效率
- 如果遇到奇怪的问题，尝试重启HBuilderX和微信开发者工具

---

## 📞 需要帮助？

如果运行时遇到问题：
1. 查看HBuilderX底部「控制台」的错误信息
2. 查看微信开发者工具「调试器」的Console
3. 提供具体错误信息以便排查

---

**🚀 现在可以按 Ctrl+R 运行项目了！**

