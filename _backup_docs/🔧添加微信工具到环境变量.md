r# 🔧 添加微信开发者工具到环境变量

## 📋 操作步骤（Windows）

### 方法1：通过系统设置（推荐）

#### 第1步：打开系统环境变量设置

**方式A：快捷方式**
```
1. 按 Win + R 打开"运行"
2. 输入：sysdm.cpl
3. 按回车
4. 点击【高级】选项卡
5. 点击【环境变量】按钮
```

**方式B：通过设置**
```
1. 右键【此电脑】或【这台电脑】
2. 选择【属性】
3. 点击【高级系统设置】
4. 点击【环境变量】按钮
```

**方式C：通过Windows 10/11设置**
```
1. 打开【设置】（Win + I）
2. 搜索"环境变量"
3. 点击【编辑系统环境变量】
4. 点击【环境变量】按钮
```

---

#### 第2步：编辑Path变量

在【环境变量】窗口中：

1. **找到Path变量：**
   - 在【系统变量】区域（推荐）或【用户变量】区域
   - 找到变量名为 `Path` 的项

2. **选中Path变量，点击【编辑】**

3. **添加新路径：**
   
   **Windows 10/11（图形界面）：**
   ```
   1. 点击【新建】按钮
   2. 输入路径：C:\Program Files (x86)\Tencent\微信web开发者工具
   3. 点击【确定】
   ```
   
   **Windows 7/8（文本模式）：**
   ```
   1. 在现有路径的最后添加分号 ;
   2. 然后添加：C:\Program Files (x86)\Tencent\微信web开发者工具
   3. 点击【确定】
   ```

---

#### 第3步：保存并关闭

1. 点击【确定】关闭【编辑环境变量】窗口
2. 点击【确定】关闭【环境变量】窗口
3. 点击【确定】关闭【系统属性】窗口

---

#### 第4步：验证是否成功

**打开新的命令提示符（重要！必须是新窗口）：**

```cmd
1. 按 Win + R
2. 输入：cmd
3. 按回车

在命令提示符中输入：
cli -h
```

如果看到微信开发者工具的帮助信息，说明配置成功！

---

### 方法2：通过PowerShell（快速）

**以管理员身份运行PowerShell：**

```powershell
# 临时添加到当前会话
$env:Path += ";C:\Program Files (x86)\Tencent\微信web开发者工具"

# 永久添加到用户环境变量
[Environment]::SetEnvironmentVariable(
    "Path",
    [Environment]::GetEnvironmentVariable("Path", "User") + ";C:\Program Files (x86)\Tencent\微信web开发者工具",
    "User"
)

# 永久添加到系统环境变量（需要管理员权限）
[Environment]::SetEnvironmentVariable(
    "Path",
    [Environment]::GetEnvironmentVariable("Path", "Machine") + ";C:\Program Files (x86)\Tencent\微信web开发者工具",
    "Machine"
)
```

---

## 🔍 常见路径

根据您的安装位置，选择对应的路径：

### 32位系统或默认安装：
```
C:\Program Files (x86)\Tencent\微信web开发者工具
```

### 64位独立安装：
```
C:\Program Files\Tencent\微信web开发者工具
```

### 自定义安装：
```
查看您的安装目录，找到包含 cli.bat 的文件夹路径
```

---

## 📸 图文说明

### 环境变量窗口示意：

```
┌─────────────────────────────────────────┐
│ 环境变量                                │
├─────────────────────────────────────────┤
│                                         │
│ 用户变量(U)                 [新建] [编辑]│
│ ┌─────────────────────────────────────┐ │
│ │ 变量           值                   │ │
│ │ Path          C:\...\;C:\...        │ │ ← 选这个
│ │ TEMP          %USERPROFILE%\...     │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ 系统变量(S)                 [新建] [编辑]│
│ ┌─────────────────────────────────────┐ │
│ │ 变量           值                   │ │
│ │ Path          C:\...\;C:\...        │ │ ← 或选这个
│ │ TEMP          C:\Windows\TEMP       │ │
│ └─────────────────────────────────────┘ │
│                                         │
│                         [确定] [取消]   │
└─────────────────────────────────────────┘
```

### 编辑Path变量（Windows 10/11）：

```
┌─────────────────────────────────────────┐
│ 编辑环境变量                             │
├─────────────────────────────────────────┤
│                                         │
│ ┌─────────────────────────────────────┐ │
│ │ C:\Windows\System32               ↑│ │
│ │ C:\Windows                         ││ │
│ │ C:\Program Files\...\              ││ │
│ │ C:\...\微信web开发者工具  ← 新添加   ││ │
│ └─────────────────────────────────────┘ │
│                                         │
│ [新建] [编辑] [浏览] [删除]            │
│ [上移] [下移]                          │
│                                         │
│                         [确定] [取消]   │
└─────────────────────────────────────────┘
```

---

## ⚠️ 重要提示

### 1. 必须重启应用程序
```
添加环境变量后，必须：
✅ 关闭HBuilderX
✅ 关闭所有命令提示符/PowerShell窗口
✅ 重新打开HBuilderX
```

### 2. 路径中不要包含 cli.bat
```
❌ 错误：C:\...\微信web开发者工具\cli.bat
✅ 正确：C:\...\微信web开发者工具
```

### 3. 确认路径存在
```
在文件资源管理器中打开：
C:\Program Files (x86)\Tencent\微信web开发者工具

确认里面有 cli.bat 文件
```

### 4. 用户变量 vs 系统变量
```
用户变量：只对当前用户有效（推荐）
系统变量：对所有用户有效（需要管理员权限）
```

---

## ✅ 验证配置成功

### 方法1：命令行验证
```cmd
打开新的命令提示符（必须是新窗口）
输入：cli -h

如果显示帮助信息 → 成功！
如果提示"不是内部或外部命令" → 失败，检查路径
```

### 方法2：HBuilderX验证
```
1. 完全关闭HBuilderX
2. 重新打开HBuilderX
3. 点击【运行】→【运行到小程序模拟器】
4. 应该能看到【微信开发者工具】选项

如果还是没有，检查：
- 环境变量配置是否正确
- 是否重启了HBuilderX
- 微信开发者工具是否已安装
```

---

## 🔧 故障排查

### Q1: 添加后还是找不到？

**检查清单：**
```
✅ 路径是否正确（不要包含cli.bat）
✅ 是否重启了HBuilderX
✅ 是否打开的是新的命令提示符窗口
✅ 环境变量是否正确保存
```

### Q2: 有多个版本怎么办？

**解决方法：**
```
1. 确认使用哪个版本
2. 添加对应版本的路径到环境变量
3. 确保cli.bat在该目录中
```

### Q3: 权限不足？

**解决方法：**
```
方法1：添加到用户变量（不需要管理员权限）
方法2：以管理员身份运行PowerShell
方法3：右键【此电脑】→【属性】需要管理员权限
```

---

## 📝 完整示例

假设微信开发者工具安装在：
```
C:\Program Files (x86)\Tencent\微信web开发者工具
```

### 步骤：

1. **打开环境变量设置**
   - Win + R → 输入 `sysdm.cpl` → 回车
   - 点击【高级】→【环境变量】

2. **编辑Path**
   - 在【用户变量】或【系统变量】中找到 `Path`
   - 选中 → 点击【编辑】
   - 点击【新建】
   - 输入：`C:\Program Files (x86)\Tencent\微信web开发者工具`
   - 点击【确定】→【确定】→【确定】

3. **验证**
   - 打开新的命令提示符
   - 输入：`cli -h`
   - 应该显示微信开发者工具的帮助信息

4. **重启HBuilderX**
   - 完全关闭HBuilderX
   - 重新打开
   - 点击【运行】→【运行到小程序模拟器】
   - 应该能看到【微信开发者工具】选项了！

---

## 🎯 配置成功标志

✅ 命令行输入 `cli -h` 有输出  
✅ HBuilderX 运行菜单中有【微信开发者工具】选项  
✅ 按 Ctrl+R 能自动打开微信开发者工具  

---

**🚀 配置完成后，重启HBuilderX，然后按 Ctrl+R 运行项目！**

