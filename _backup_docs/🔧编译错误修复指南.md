# ğŸ”§ ç¼–è¯‘é”™è¯¯ä¿®å¤æŒ‡å—

**é”™è¯¯æ—¶é—´**: 2025-11-01 15:22  
**é”™è¯¯ç±»å‹**: uni-appæ¨¡æ¿è¯­æ³•é”™è¯¯

---

## ğŸ› ç¼–è¯‘é”™è¯¯åˆ—è¡¨

### é”™è¯¯1: `:class`ä¸æ”¯æŒå‡½æ•°è°ƒç”¨ï¼ˆ4ä¸ªæ–‡ä»¶ï¼‰

**é”™è¯¯ä¿¡æ¯**: `:classä¸æ”¯æŒ getXxxClass(xxx) è¯­æ³•`

**å½±å“æ–‡ä»¶**:
1. `pages-sub/report/query.vue`
2. `pages-sub/clinic/list.vue`
3. `pages-sub/report/detail.vue`

**é—®é¢˜åŸå› **: uni-appçš„`:class`å±æ€§ä¸æ”¯æŒåœ¨æ¨¡æ¿ä¸­ç›´æ¥è°ƒç”¨æ–¹æ³•ï¼Œéœ€è¦æ”¹ä¸ºè®¡ç®—å±æ€§æˆ–ä¸‰å…ƒè¡¨è¾¾å¼ã€‚

**é”™è¯¯ä»£ç ç¤ºä¾‹**:
```vue
<!-- âŒ é”™è¯¯å†™æ³• -->
<view :class="getExpiryClass(item.expiryStatus)">

<!-- âŒ é”™è¯¯å†™æ³• -->
<text :class="getExpiryDaysClass(item.daysToExpiry)">

<!-- âŒ é”™è¯¯å†™æ³• -->
<view :class="getLocationClass(item.location)">
```

**æ­£ç¡®å†™æ³•**:
```vue
<!-- âœ… æ–¹æ³•1: ä½¿ç”¨å¯¹è±¡è¯­æ³• -->
<view :class="{
  'status-expired': item.expiryStatus === 'è¿‡æœŸ',
  'status-warning': item.expiryStatus === 'ä¸´æœŸ',
  'status-normal': item.expiryStatus === 'æ­£å¸¸'
}">

<!-- âœ… æ–¹æ³•2: ä½¿ç”¨æ•°ç»„+ä¸‰å…ƒè¡¨è¾¾å¼ -->
<view :class="[
  'status-badge',
  item.expiryStatus === 'è¿‡æœŸ' ? 'expired' : 
  item.expiryStatus === 'ä¸´æœŸ' ? 'warning' : 'normal'
]">

<!-- âœ… æ–¹æ³•3: ä½¿ç”¨è®¡ç®—å±æ€§ -->
<view :class="expiryClassComputed">
<!-- ç„¶ååœ¨computedä¸­å®šä¹‰ -->
```

---

### é”™è¯¯2: é‡å¤çš„export default

**é”™è¯¯ä¿¡æ¯**: `Only one default export allowed per module`

**å½±å“æ–‡ä»¶**: `pages-sub/report/detail.vue`

**é—®é¢˜åŸå› **: æ–‡ä»¶ä¸­æœ‰ä¸¤ä¸ª`export default {}`å£°æ˜

**ä½ç½®**: ç¬¬480è¡Œ

**ä¿®å¤æ–¹æ³•**: åˆ é™¤ç¬¬480è¡Œå¼€å§‹çš„é‡å¤export defaultå—

---

## ğŸ”§ å¿«é€Ÿä¿®å¤æ–¹æ¡ˆ

ç”±äºæ–‡ä»¶è¾ƒå¤§ä¸”é”™è¯¯è¾ƒå¤šï¼Œå»ºè®®é‡‡ç”¨ä»¥ä¸‹æ–¹æ¡ˆï¼š

### æ–¹æ¡ˆ1: ç®€åŒ–`:class`ç»‘å®šï¼ˆæ¨èï¼‰

å°†æ‰€æœ‰åŠ¨æ€classæ”¹ä¸ºé™æ€class + å†…è”æ ·å¼ï¼š

```vue
<!-- ä¿®æ”¹å‰ -->
<view :class="getStatusClass(row.expiryStatus)">

<!-- ä¿®æ”¹å -->
<view class="status-badge" :style="{ 
  backgroundColor: row.expiryStatus === 'è¿‡æœŸ' ? '#ff4444' : 
                   row.expiryStatus === 'ä¸´æœŸ' ? '#ff9800' : '#4caf50',
  color: '#fff'
}">
```

### æ–¹æ¡ˆ2: ä½¿ç”¨è®¡ç®—å±æ€§

åœ¨methodsä¸­æ·»åŠ è¾…åŠ©æ–¹æ³•æ¥ç”Ÿæˆclasså­—ç¬¦ä¸²ï¼š

```javascript
methods: {
  getExpiryClassString(status) {
    const map = {
      'è¿‡æœŸ': 'status-expired',
      'ä¸´æœŸ': 'status-warning',
      'æ­£å¸¸': 'status-normal'
    };
    return `status-badge ${map[status] || ''}`;
  }
}
```

ç„¶ååœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ï¼š
```vue
<view :class="getExpiryClassString(item.expiryStatus)">
```

---

## ğŸ“ éœ€è¦ä¿®å¤çš„å…·ä½“ä½ç½®

### pages-sub/report/detail.vue

1. **ç¬¬168è¡Œ** - `:class="getStatusClass(row[col.key])"`
2. **ç¬¬176è¡Œ** - `:class="getExpiryDaysClass(row[col.key])"`
3. **ç¬¬188è¡Œ** - `:class="getLocationClass(row[col.key])"`
4. **ç¬¬200è¡Œ** - `:class="getDiffRateClass(row[col.key])"`
5. **ç¬¬480è¡Œ** - åˆ é™¤é‡å¤çš„`export default {`

### pages-sub/report/query.vue

1. **ç¬¬173è¡Œ** - `:class="getExpiryClass(item.expiryStatus)"`
2. **ç¬¬197è¡Œ** - `:class="getExpiryDaysClass(item.daysToExpiry)"`

### pages-sub/clinic/list.vue

1. **ç¬¬80è¡Œ** - `:class="getLocationClass(item.location)"`

---

## âœ… ä¿®å¤æ­¥éª¤

### Step 1: åˆ é™¤é‡å¤çš„export defaultï¼ˆç«‹å³ä¿®å¤ï¼‰

æ‰“å¼€ `pages-sub/report/detail.vue`ï¼Œæ‰¾åˆ°ç¬¬480è¡Œé™„è¿‘ï¼Œåˆ é™¤ä»`export default {`å¼€å§‹åˆ°æ–‡ä»¶æœ«å°¾çš„é‡å¤å†…å®¹ã€‚

### Step 2: ä¿®å¤:classç»‘å®š

æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼š

**é€‰æ‹©A: ä½¿ç”¨å†…è”æ ·å¼ï¼ˆæœ€å¿«ï¼‰**
- å°†æ‰€æœ‰`:class="getXxxClass()"`æ”¹ä¸º`:style`ç»‘å®š

**é€‰æ‹©B: æ”¹ä¸ºé™æ€classï¼ˆæ¨èï¼‰**
- é¢„å®šä¹‰æ‰€æœ‰å¯èƒ½çš„class
- ä½¿ç”¨å¯¹è±¡æˆ–æ•°ç»„è¯­æ³•ç»‘å®š

### Step 3: é‡æ–°ç¼–è¯‘

ä¿®å¤å®Œæˆåï¼Œé‡æ–°è¿è¡Œç¼–è¯‘ï¼š
```bash
ç‚¹å‡»å¾®ä¿¡å¼€å‘è€…å·¥å…·çš„"ç¼–è¯‘"æŒ‰é’®
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥æ“ä½œ

1. âœ… å…ˆä¿®å¤`pages-sub/report/detail.vue`çš„é‡å¤export defaulté—®é¢˜
2. âœ… ç„¶åä¿®å¤æ‰€æœ‰`:class`å‡½æ•°è°ƒç”¨é—®é¢˜
3. âœ… é‡æ–°ç¼–è¯‘æµ‹è¯•
4. âœ… å¦‚æœè¿˜æœ‰é”™è¯¯ï¼Œç»§ç»­ä¿®å¤

---

**é¢„è®¡ä¿®å¤æ—¶é—´**: 10-15åˆ†é’Ÿ  
**éš¾åº¦**: ä¸­ç­‰  
**ä¼˜å…ˆçº§**: é«˜ï¼ˆé˜»å¡ç¼–è¯‘ï¼‰

---

## ğŸ’¡ æç¤º

å¦‚æœæ‰‹åŠ¨ä¿®å¤å¤ªç¹çï¼Œå¯ä»¥è€ƒè™‘ï¼š
1. æš‚æ—¶æ³¨é‡Šæ‰è¿™äº›åŠ¨æ€class
2. ä½¿ç”¨å›ºå®šçš„classå
3. åç»­å†ä¼˜åŒ–æ ·å¼

è¿™æ ·å¯ä»¥å…ˆè®©é¡¹ç›®ç¼–è¯‘é€šè¿‡ï¼Œç„¶åå†é€æ­¥å®Œå–„åŠŸèƒ½ã€‚

---

**åˆ›å»ºæ—¶é—´**: 2025-11-01  
**æœ€åæ›´æ–°**: 2025-11-01


