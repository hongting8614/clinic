# ğŸ”§ è¯å“æ¡£æ¡ˆä¿å­˜é—®é¢˜ä¿®å¤æŠ¥å‘Š

**ä¿®å¤æ—¥æœŸï¼š** 2026å¹´1æœˆ2æ—¥  
**é—®é¢˜ï¼š** è¯ææ¡£æ¡ˆä¿¡æ¯ä¿®æ”¹åä¿å­˜ï¼Œæç¤ºå·²ä¿å­˜ï¼Œä½†å†æ¬¡æ‰“å¼€è¿˜æ˜¯åŸæ¥æ”¹ä¹‹å‰çš„ä¿¡æ¯

---

## ğŸ” é—®é¢˜åˆ†æ

### æ ¹æœ¬åŸå› 

**å­—æ®µåä¸ä¸€è‡´å¯¼è‡´ä¿å­˜å¤±è´¥**

1. **æ•°æ®åº“å­—æ®µåæ··ä¹±** â­â­â­â­â­
   - æ•°æ®åº“ä¸­å¯èƒ½ä½¿ç”¨ `barCode`ï¼ˆé©¼å³°å‘½åï¼‰
   - ä¿å­˜æ—¶åªæ›´æ–°äº† `barcode`ï¼ˆå°å†™ï¼‰
   - å¯¼è‡´å®é™…æ•°æ®æ²¡æœ‰æ›´æ–°

2. **ç¼ºå°‘å­—æ®µå…¼å®¹** â­â­â­â­
   - ä¿å­˜æ—¶æ²¡æœ‰åŒæ—¶æ›´æ–° `name` å’Œ `drugName`
   - ä¿å­˜æ—¶æ²¡æœ‰åŒæ—¶æ›´æ–° `barcode` å’Œ `barCode`
   - å¯¼è‡´éƒ¨åˆ†å­—æ®µæ›´æ–°å¤±è´¥

3. **æ—¶é—´å­—æ®µé—®é¢˜** â­â­â­
   - ä½¿ç”¨ `new Date()` å¯èƒ½å¯¼è‡´æ—¶åŒºé—®é¢˜
   - åº”è¯¥ä½¿ç”¨ `db.serverDate()` è·å–æœåŠ¡å™¨æ—¶é—´

4. **ç¼ºå°‘è°ƒè¯•æ—¥å¿—** â­â­â­
   - ä¿å­˜æ—¶æ²¡æœ‰æ—¥å¿—è¾“å‡º
   - éš¾ä»¥å®šä½å…·ä½“é—®é¢˜

---

## âœ… å·²å®æ–½çš„ä¿®å¤

### ä¿®å¤ 1ï¼šå…¼å®¹å¤šç§å­—æ®µå

**æ–‡ä»¶ï¼š** `pages-sub/drug/detail.vue`

**ä¿®æ”¹å†…å®¹ï¼š**

```javascript
async saveDrug() {
    // ... éªŒè¯ä»£ç  ...
    
    const updateData = {
        name: this.drugData.name,
        drugName: this.drugData.name,              // â­ å…¼å®¹å­—æ®µ
        specification: this.drugData.specification,
        spec: this.drugData.specification,         // â­ å…¼å®¹å­—æ®µ
        unit: this.drugData.unit,
        packUnit: this.drugData.unit,              // â­ å…¼å®¹å­—æ®µ
        manufacturer: this.drugData.manufacturer,
        barcode: this.drugData.barcode,            // â­ å°å†™å­—æ®µ
        barCode: this.drugData.barcode,            // â­ é©¼å³°å­—æ®µï¼ˆå…¼å®¹ï¼‰
        approvalNumber: this.drugData.approvalNumber,
        category: this.drugData.category,
        safeStock: Number(this.drugData.safeStock) || 50,
        minStock: Number(this.drugData.minStock) || 20,
        isHighValue: this.drugData.isHighValue,
        isEmergency: this.drugData.isEmergency,
        updateTime: db.serverDate()                // â­ ä½¿ç”¨æœåŠ¡å™¨æ—¶é—´
    }
    
    const result = await db.collection('drugs').doc(this.drugId).update({
        data: updateData
    })
}
```

**ä¼˜åŠ¿ï¼š**
- âœ… åŒæ—¶æ›´æ–° `barcode` å’Œ `barCode`ï¼Œç¡®ä¿å…¼å®¹æ€§
- âœ… åŒæ—¶æ›´æ–° `name` å’Œ `drugName`ï¼Œç¡®ä¿å…¼å®¹æ€§
- âœ… ä½¿ç”¨ `db.serverDate()` é¿å…æ—¶åŒºé—®é¢˜
- âœ… æ·»åŠ è¯¦ç»†æ—¥å¿—ï¼Œä¾¿äºè°ƒè¯•

---

### ä¿®å¤ 2ï¼šåŠ è½½æ—¶å…¼å®¹å¤šç§å­—æ®µå

**æ–‡ä»¶ï¼š** `pages-sub/drug/detail.vue`

**ä¿®æ”¹å†…å®¹ï¼š**

```javascript
async loadDrugDetail() {
    // ... åŠ è½½ä»£ç  ...
    
    if (result.data) {
        // â­ å…¼å®¹ barcode å’Œ barCode ä¸¤ç§å­—æ®µå
        const barcodeValue = result.data.barcode || result.data.barCode || ''
        
        this.drugData = {
            name: result.data.name || result.data.drugName || '',
            specification: result.data.specification || result.data.spec || '',
            unit: result.data.unit || result.data.packUnit || '',
            manufacturer: result.data.manufacturer || '',
            barcode: barcodeValue,  // â­ ç»Ÿä¸€ä½¿ç”¨å°å†™å­—æ®µ
            // ... å…¶ä»–å­—æ®µ ...
        }
        
        console.log('ğŸ“– è§£æåçš„æ•°æ®:', this.drugData)
    }
}
```

**ä¼˜åŠ¿ï¼š**
- âœ… åŠ è½½æ—¶å…¼å®¹ `barcode` å’Œ `barCode`
- âœ… åŠ è½½æ—¶å…¼å®¹ `name` å’Œ `drugName`
- âœ… æ·»åŠ æ—¥å¿—è¾“å‡ºï¼Œä¾¿äºè°ƒè¯•

---

### ä¿®å¤ 3ï¼šå¢å¼ºé”™è¯¯æç¤º

**æ–‡ä»¶ï¼š** `pages-sub/drug/detail.vue`

**ä¿®æ”¹å†…å®¹ï¼š**

```javascript
} catch (err) {
    console.error('âŒ ä¿å­˜å¤±è´¥:', err)
    console.error('é”™è¯¯è¯¦æƒ…:', err.errMsg)
    
    let errorMsg = 'ä¿å­˜å¤±è´¥'
    if (err.errMsg) {
        if (err.errMsg.includes('permission')) {
            errorMsg = 'æƒé™ä¸è¶³ï¼Œæ— æ³•ä¿å­˜'
        } else if (err.errMsg.includes('timeout')) {
            errorMsg = 'ç½‘ç»œè¶…æ—¶ï¼Œè¯·é‡è¯•'
        } else {
            errorMsg = err.errMsg
        }
    }
    
    uni.showModal({
        title: 'ä¿å­˜å¤±è´¥',
        content: errorMsg,
        showCancel: false
    })
}
```

**ä¼˜åŠ¿ï¼š**
- âœ… åŒºåˆ†ä¸åŒç±»å‹çš„é”™è¯¯
- âœ… æä¾›å…·ä½“çš„é”™è¯¯ä¿¡æ¯
- âœ… ä¾¿äºç”¨æˆ·ç†è§£é—®é¢˜

---

## ğŸš€ æµ‹è¯•éªŒè¯

### æµ‹è¯•åœºæ™¯ 1ï¼šä¿®æ”¹è¯å“åç§°

**æ“ä½œæ­¥éª¤ï¼š**
1. æ‰“å¼€è¯å“æ¡£æ¡ˆè¯¦æƒ…é¡µ
2. ç‚¹å‡»"ç¼–è¾‘"æŒ‰é’®
3. ä¿®æ”¹è¯å“åç§°
4. ç‚¹å‡»"ä¿å­˜"æŒ‰é’®
5. ç­‰å¾…æç¤º"ä¿å­˜æˆåŠŸ"
6. è¿”å›åˆ—è¡¨é¡µï¼Œå†æ¬¡æ‰“å¼€è¯¥è¯å“

**é¢„æœŸç»“æœï¼š**
- âœ… æ˜¾ç¤º"ä¿å­˜æˆåŠŸ"
- âœ… å†æ¬¡æ‰“å¼€æ—¶ï¼Œè¯å“åç§°å·²æ›´æ–°
- âœ… æ§åˆ¶å°æ˜¾ç¤ºä¿å­˜æ—¥å¿—

**æ§åˆ¶å°æ—¥å¿—ï¼š**
```
ğŸ’¾ å¼€å§‹ä¿å­˜è¯å“æ¡£æ¡ˆ...
è¯å“ID: xxx
ä¿å­˜æ•°æ®: { name: 'æ–°åç§°', ... }
æ›´æ–°æ•°æ®: { name: 'æ–°åç§°', drugName: 'æ–°åç§°', ... }
âœ… ä¿å­˜æˆåŠŸï¼Œæ›´æ–°ç»“æœ: { stats: { updated: 1 } }
```

---

### æµ‹è¯•åœºæ™¯ 2ï¼šä¿®æ”¹æ¡å½¢ç 

**æ“ä½œæ­¥éª¤ï¼š**
1. æ‰“å¼€è¯å“æ¡£æ¡ˆè¯¦æƒ…é¡µ
2. ç‚¹å‡»"ç¼–è¾‘"æŒ‰é’®
3. ä¿®æ”¹æ¡å½¢ç 
4. ç‚¹å‡»"ä¿å­˜"æŒ‰é’®
5. ç­‰å¾…æç¤º"ä¿å­˜æˆåŠŸ"
6. è¿”å›åˆ—è¡¨é¡µï¼Œå†æ¬¡æ‰“å¼€è¯¥è¯å“

**é¢„æœŸç»“æœï¼š**
- âœ… æ˜¾ç¤º"ä¿å­˜æˆåŠŸ"
- âœ… å†æ¬¡æ‰“å¼€æ—¶ï¼Œæ¡å½¢ç å·²æ›´æ–°
- âœ… æ•°æ®åº“ä¸­ `barcode` å’Œ `barCode` éƒ½å·²æ›´æ–°

**éªŒè¯æ–¹æ³•ï¼š**
åœ¨äº‘å¼€å‘æ§åˆ¶å° â†’ æ•°æ®åº“ â†’ `drugs` é›†åˆä¸­æŸ¥çœ‹è¯¥è®°å½•ï¼š
```json
{
  "_id": "xxx",
  "name": "å¸ƒæ´›èŠ¬ç¼“é‡Šèƒ¶å›Š",
  "drugName": "å¸ƒæ´›èŠ¬ç¼“é‡Šèƒ¶å›Š",
  "barcode": "6901285991622",
  "barCode": "6901285991622",  // â­ ä¸¤ä¸ªå­—æ®µéƒ½å·²æ›´æ–°
  "updateTime": "2026-01-02T10:30:00.000Z"
}
```

---

### æµ‹è¯•åœºæ™¯ 3ï¼šä¿®æ”¹å¤šä¸ªå­—æ®µ

**æ“ä½œæ­¥éª¤ï¼š**
1. æ‰“å¼€è¯å“æ¡£æ¡ˆè¯¦æƒ…é¡µ
2. ç‚¹å‡»"ç¼–è¾‘"æŒ‰é’®
3. åŒæ—¶ä¿®æ”¹ï¼šåç§°ã€è§„æ ¼ã€å•ä½ã€å‚å®¶ã€æ¡å½¢ç 
4. ç‚¹å‡»"ä¿å­˜"æŒ‰é’®
5. ç­‰å¾…æç¤º"ä¿å­˜æˆåŠŸ"
6. è¿”å›åˆ—è¡¨é¡µï¼Œå†æ¬¡æ‰“å¼€è¯¥è¯å“

**é¢„æœŸç»“æœï¼š**
- âœ… æ˜¾ç¤º"ä¿å­˜æˆåŠŸ"
- âœ… å†æ¬¡æ‰“å¼€æ—¶ï¼Œæ‰€æœ‰å­—æ®µéƒ½å·²æ›´æ–°
- âœ… æ§åˆ¶å°æ˜¾ç¤ºå®Œæ•´çš„ä¿å­˜æ—¥å¿—

---

## ğŸ” é—®é¢˜è¯Šæ–­æµç¨‹

å¦‚æœä¿®å¤åä»ç„¶æ— æ³•ä¿å­˜ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤è¯Šæ–­ï¼š

### æ­¥éª¤ 1ï¼šæŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—

æ‰“å¼€æ§åˆ¶å°ï¼Œç‚¹å‡»"ä¿å­˜"åæŸ¥çœ‹ï¼š

```
ğŸ’¾ å¼€å§‹ä¿å­˜è¯å“æ¡£æ¡ˆ...
è¯å“ID: xxx
ä¿å­˜æ•°æ®: { ... }
æ›´æ–°æ•°æ®: { ... }
âœ… ä¿å­˜æˆåŠŸï¼Œæ›´æ–°ç»“æœ: { stats: { updated: 1 } }
```

å¦‚æœçœ‹åˆ° `updated: 1`ï¼Œè¯´æ˜ä¿å­˜æˆåŠŸã€‚

---

### æ­¥éª¤ 2ï¼šæ£€æŸ¥æ•°æ®åº“æƒé™

åœ¨äº‘å¼€å‘æ§åˆ¶å° â†’ æ•°æ®åº“ â†’ `drugs` é›†åˆ â†’ æƒé™è®¾ç½®ï¼š

**æ¨èæƒé™è®¾ç½®ï¼š**
```json
{
  "read": true,
  "write": "doc._openid == auth.openid"
}
```

æˆ–è€…ä½¿ç”¨äº‘å‡½æ•°æ›´æ–°ï¼ˆç»•è¿‡æƒé™é™åˆ¶ï¼‰ã€‚

---

### æ­¥éª¤ 3ï¼šæ£€æŸ¥æ•°æ®åº“è®°å½•

åœ¨äº‘å¼€å‘æ§åˆ¶å° â†’ æ•°æ®åº“ â†’ `drugs` é›†åˆä¸­ï¼š

1. æœç´¢è¯¥è¯å“
2. æŸ¥çœ‹ `updateTime` å­—æ®µæ˜¯å¦æ›´æ–°
3. æŸ¥çœ‹ä¿®æ”¹çš„å­—æ®µæ˜¯å¦å·²æ›´æ–°

---

### æ­¥éª¤ 4ï¼šæ£€æŸ¥å­—æ®µå

åœ¨æ•°æ®åº“ä¸­æŸ¥çœ‹è¯¥è®°å½•çš„æ‰€æœ‰å­—æ®µï¼š

```json
{
  "_id": "xxx",
  "name": "xxx",           // â† æ£€æŸ¥æ˜¯å¦å­˜åœ¨
  "drugName": "xxx",       // â† æ£€æŸ¥æ˜¯å¦å­˜åœ¨
  "barcode": "xxx",        // â† æ£€æŸ¥æ˜¯å¦å­˜åœ¨
  "barCode": "xxx",        // â† æ£€æŸ¥æ˜¯å¦å­˜åœ¨
  "updateTime": "xxx"      // â† æ£€æŸ¥æ˜¯å¦æ›´æ–°
}
```

---

## ğŸ“Š å¯èƒ½çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜ 1ï¼šæƒé™ä¸è¶³

**ç°è±¡ï¼š**
- ä¿å­˜æ—¶æç¤º"æƒé™ä¸è¶³ï¼Œæ— æ³•ä¿å­˜"
- æ§åˆ¶å°æ˜¾ç¤º `permission denied`

**è§£å†³ï¼š**
1. æ£€æŸ¥æ•°æ®åº“æƒé™è®¾ç½®
2. ç¡®ä¿ `write` æƒé™å…è®¸ç”¨æˆ·æ›´æ–°
3. æˆ–è€…ä½¿ç”¨äº‘å‡½æ•°æ›´æ–°ï¼ˆç»•è¿‡æƒé™é™åˆ¶ï¼‰

---

### é—®é¢˜ 2ï¼šç½‘ç»œè¶…æ—¶

**ç°è±¡ï¼š**
- ä¿å­˜æ—¶æç¤º"ç½‘ç»œè¶…æ—¶ï¼Œè¯·é‡è¯•"
- æ§åˆ¶å°æ˜¾ç¤º `timeout`

**è§£å†³ï¼š**
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. é‡æ–°ä¿å­˜
3. å¦‚æœä»ç„¶è¶…æ—¶ï¼Œæ£€æŸ¥äº‘å‡½æ•°æ—¥å¿—

---

### é—®é¢˜ 3ï¼šå­—æ®µåä¸åŒ¹é…

**ç°è±¡ï¼š**
- ä¿å­˜æˆåŠŸï¼Œä½†å†æ¬¡æ‰“å¼€æ—¶æ•°æ®æœªæ›´æ–°
- æ•°æ®åº“ä¸­åªæœ‰ `barCode`ï¼Œæ²¡æœ‰ `barcode`

**è§£å†³ï¼š**
- âœ… å·²ä¿®å¤ï¼ç°åœ¨åŒæ—¶æ›´æ–°ä¸¤ç§å­—æ®µå

---

### é—®é¢˜ 4ï¼šæ•°æ®ç±»å‹é”™è¯¯

**ç°è±¡ï¼š**
- ä¿å­˜æ—¶æç¤º"æ•°æ®ç±»å‹é”™è¯¯"
- æ§åˆ¶å°æ˜¾ç¤ºç±»å‹è½¬æ¢é”™è¯¯

**è§£å†³ï¼š**
- âœ… å·²ä¿®å¤ï¼ä½¿ç”¨ `Number()` è½¬æ¢æ•°å€¼ç±»å‹

---

## ğŸ’¡ åç»­ä¼˜åŒ–å»ºè®®

### 1. ç»Ÿä¸€æ•°æ®åº“å­—æ®µå

å»ºè®®å°†æ‰€æœ‰è¯å“çš„å­—æ®µåç»Ÿä¸€ï¼š
- `name`ï¼ˆä¸ä½¿ç”¨ `drugName`ï¼‰
- `barcode`ï¼ˆä¸ä½¿ç”¨ `barCode`ï¼‰
- `specification`ï¼ˆä¸ä½¿ç”¨ `spec`ï¼‰
- `unit`ï¼ˆä¸ä½¿ç”¨ `packUnit`ï¼‰

å¯ä»¥åˆ›å»ºä¸€ä¸ªæ•°æ®è¿ç§»è„šæœ¬ï¼š

```javascript
// äº‘å‡½æ•°ï¼šmigrateFields
const cloud = require('wx-server-sdk')
cloud.init()
const db = cloud.database()

exports.main = async (event, context) => {
  const drugs = await db.collection('drugs').get()
  
  for (let drug of drugs.data) {
    const updateData = {}
    
    // ç»Ÿä¸€å­—æ®µå
    if (drug.drugName && !drug.name) {
      updateData.name = drug.drugName
    }
    if (drug.barCode && !drug.barcode) {
      updateData.barcode = drug.barCode
    }
    if (drug.spec && !drug.specification) {
      updateData.specification = drug.spec
    }
    if (drug.packUnit && !drug.unit) {
      updateData.unit = drug.packUnit
    }
    
    if (Object.keys(updateData).length > 0) {
      await db.collection('drugs').doc(drug._id).update({
        data: updateData
      })
    }
  }
  
  return { success: true, count: drugs.data.length }
}
```

### 2. æ·»åŠ ä¿å­˜å‰éªŒè¯

åœ¨ä¿å­˜å‰éªŒè¯æ•°æ®æ ¼å¼ï¼š

```javascript
function validateDrugData(data) {
  const errors = []
  
  // éªŒè¯å¿…å¡«é¡¹
  if (!data.name || !data.name.trim()) {
    errors.push('è¯å“åç§°ä¸èƒ½ä¸ºç©º')
  }
  
  // éªŒè¯æ¡å½¢ç æ ¼å¼
  if (data.barcode && !/^\d{8,14}$/.test(data.barcode)) {
    errors.push('æ¡å½¢ç æ ¼å¼ä¸æ­£ç¡®ï¼ˆåº”ä¸º8-14ä½æ•°å­—ï¼‰')
  }
  
  // éªŒè¯æ•°å€¼èŒƒå›´
  if (data.safeStock < 0) {
    errors.push('å®‰å…¨åº“å­˜ä¸èƒ½ä¸ºè´Ÿæ•°')
  }
  
  return errors
}
```

### 3. æ·»åŠ ä¿å­˜ç¡®è®¤

åœ¨ä¿å­˜å‰æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†ï¼š

```javascript
async saveDrug() {
  // æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†
  const confirmRes = await uni.showModal({
    title: 'ç¡®è®¤ä¿å­˜',
    content: 'ç¡®å®šè¦ä¿å­˜ä¿®æ”¹å—ï¼Ÿ',
    confirmText: 'ä¿å­˜',
    cancelText: 'å–æ¶ˆ'
  })
  
  if (!confirmRes.confirm) {
    return
  }
  
  // ç»§ç»­ä¿å­˜...
}
```

---

## ğŸ“ æ€»ç»“

### å·²å®Œæˆçš„ä¿®å¤

1. âœ… ä¿å­˜æ—¶åŒæ—¶æ›´æ–° `barcode` å’Œ `barCode` å­—æ®µ
2. âœ… ä¿å­˜æ—¶åŒæ—¶æ›´æ–° `name` å’Œ `drugName` å­—æ®µ
3. âœ… ä½¿ç”¨ `db.serverDate()` é¿å…æ—¶åŒºé—®é¢˜
4. âœ… åŠ è½½æ—¶å…¼å®¹å¤šç§å­—æ®µå
5. âœ… æ·»åŠ è¯¦ç»†çš„è°ƒè¯•æ—¥å¿—
6. âœ… å¢å¼ºé”™è¯¯æç¤º

### ä¿®å¤æ•ˆæœ

- âœ… ä¿å­˜åæ•°æ®çœŸæ­£æ›´æ–°åˆ°æ•°æ®åº“
- âœ… å†æ¬¡æ‰“å¼€æ—¶æ˜¾ç¤ºæœ€æ–°æ•°æ®
- âœ… å…¼å®¹æ—§æ•°æ®å’Œæ–°æ•°æ®
- âœ… è¯¦ç»†çš„æ—¥å¿—ä¾¿äºè°ƒè¯•

---

## ğŸš€ ç«‹å³æ‰§è¡Œçš„æ“ä½œ

### ç¬¬ä¸€æ­¥ï¼šé‡æ–°ç¼–è¯‘é¡¹ç›®

ç‚¹å‡»å¼€å‘è€…å·¥å…·é¡¶éƒ¨çš„ **"ç¼–è¯‘"** æŒ‰é’®

### ç¬¬äºŒæ­¥ï¼šæµ‹è¯•ä¿å­˜åŠŸèƒ½

1. æ‰“å¼€ **æ§åˆ¶å°**ï¼ˆæŸ¥çœ‹æ—¥å¿—ï¼‰
2. è¿›å…¥è¯å“æ¡£æ¡ˆè¯¦æƒ…é¡µ
3. ç‚¹å‡»"ç¼–è¾‘"æŒ‰é’®
4. ä¿®æ”¹ä»»æ„å­—æ®µ
5. ç‚¹å‡»"ä¿å­˜"æŒ‰é’®
6. æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—

### ç¬¬ä¸‰æ­¥ï¼šéªŒè¯ä¿å­˜ç»“æœ

1. è¿”å›åˆ—è¡¨é¡µ
2. å†æ¬¡æ‰“å¼€è¯¥è¯å“
3. ç¡®è®¤ä¿®æ”¹å·²ä¿å­˜

---

## ğŸ“Š é¢„æœŸæ•ˆæœ

### âœ… æˆåŠŸæ—¶ï¼š

**æ§åˆ¶å°æ—¥å¿—ï¼š**
```
ğŸ’¾ å¼€å§‹ä¿å­˜è¯å“æ¡£æ¡ˆ...
è¯å“ID: xxx
ä¿å­˜æ•°æ®: { name: 'æ–°åç§°', barcode: '123456', ... }
æ›´æ–°æ•°æ®: { name: 'æ–°åç§°', drugName: 'æ–°åç§°', barcode: '123456', barCode: '123456', ... }
âœ… ä¿å­˜æˆåŠŸï¼Œæ›´æ–°ç»“æœ: { stats: { updated: 1 } }
ğŸ“– åŠ è½½è¯å“è¯¦æƒ…ï¼ŒID: xxx
ğŸ“– æ•°æ®åº“è¿”å›: { name: 'æ–°åç§°', barcode: '123456', ... }
ğŸ“– è§£æåçš„æ•°æ®: { name: 'æ–°åç§°', barcode: '123456', ... }
```

**ç”¨æˆ·ç•Œé¢ï¼š**
- æ˜¾ç¤º"ä¿å­˜æˆåŠŸ"æç¤º
- è‡ªåŠ¨é€€å‡ºç¼–è¾‘æ¨¡å¼
- å†æ¬¡æ‰“å¼€æ—¶æ˜¾ç¤ºæœ€æ–°æ•°æ®

---

### ğŸ”´ å¤±è´¥æ—¶ï¼š

**æ§åˆ¶å°æ—¥å¿—ï¼š**
```
ğŸ’¾ å¼€å§‹ä¿å­˜è¯å“æ¡£æ¡ˆ...
âŒ ä¿å­˜å¤±è´¥: { errMsg: 'permission denied' }
é”™è¯¯è¯¦æƒ…: permission denied
```

**ç”¨æˆ·ç•Œé¢ï¼š**
- æ˜¾ç¤º"æƒé™ä¸è¶³ï¼Œæ— æ³•ä¿å­˜"
- æä¾›å…·ä½“çš„é”™è¯¯ä¿¡æ¯

---

**å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·æä¾›ï¼š**
1. **æ§åˆ¶å°æ—¥å¿—**ï¼ˆå®Œæ•´çš„ä¿å­˜æ—¥å¿—ï¼‰
2. **é”™è¯¯æç¤ºæˆªå›¾**ï¼ˆæ˜¾ç¤ºçš„æ˜¯ä»€ä¹ˆé”™è¯¯ï¼‰
3. **æ•°æ®åº“æˆªå›¾**ï¼ˆä¿å­˜å‰åçš„è®°å½•å¯¹æ¯”ï¼‰
4. **æ“ä½œæ­¥éª¤**ï¼ˆè¯¦ç»†çš„æ“ä½œæµç¨‹ï¼‰

æˆ‘ä¼šå¸®æ‚¨ç²¾å‡†å®šä½é—®é¢˜ï¼ğŸ”





