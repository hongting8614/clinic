# 快速开始：扫码入库

## 🚀 5分钟上手指南

---

## 第一步：导入常用药材（3分钟）

### **在小程序开发工具控制台运行：**

1. **打开文件：** `d:\AK-PMS\scripts\导入实际药材清单.js`

2. **复制全部内容**

3. **粘贴到控制台**

4. **回车运行**

5. **等待完成：**
   ```
   ✅ 成功导入 32 个药材
   ```

---

## 第二步：部署云函数（1分钟）

### **右键 → 上传并部署：云端安装依赖**

1. **`cloudfunctions/drugBarcodeQuery`**
2. **`cloudfunctions/drugSearch`**

等待部署完成（约30秒）

---

## 第三步：测试扫码（1分钟）

### **真机调试：**

1. 编译小程序
2. 手机扫码预览
3. 进入"入库"页面
4. 点击"扫码"按钮
5. 扫描药材条形码

---

## 🎯 扫码后会发生什么？

### **情况A：已导入的药材**
```
扫码 → 立即识别 → ✅ 添加成功
```
**耗时：** < 1秒

---

### **情况B：新药材（首次扫描）**

```
扫码 → 弹出选择框

┌─────────────────────────┐
│  首次识别此条形码        │
├─────────────────────────┤
│ 1. 从已有药材中选择      │ ← 选这个！
│ 2. 输入药材名称          │
│ 3. 手动新建药材          │
└─────────────────────────┘
```

#### **推荐：选择"从已有药材中选择"**

```
点击 → 显示32种药材列表
     → 点击对应药材
     → ✅ 关联成功！
     → 下次扫码立即识别
```

**耗时：** 3秒

---

## 💡 使用技巧

### **技巧1：批量关联条形码**

```
场景：有10瓶布洛芬，条形码都不同

操作：
1. 扫第1个条形码 → 选择"布洛芬"
2. 扫第2个条形码 → 选择"布洛芬"
3. ...
4. 以后这10个条形码都能立即识别！
```

---

### **技巧2：新药材查NMPA**

```
场景：药材不在32种常用药材中

操作：
1. 扫码
2. 选择"输入药材名称"
3. 输入"阿莫西林胶囊"
4. 系统自动查询国家药监局
5. 获取完整信息
6. ✅ 保存成功
```

---

## 📊 完整流程示例

### **示例：入库10盒布洛芬**

```
1️⃣ 扫第1盒：
   扫码 → 选择"布洛芬缓释胶囊" → ✅
   
2️⃣ 扫第2-10盒：
   扫码 → ✅ 立即识别（已关联）
   
3️⃣ 确认入库：
   点击"提交" → ✅ 入库成功
```

**总耗时：** 约30秒（10盒药材）

---

## ✅ 完成！

现在你已经可以：

- ✅ 扫码立即识别32种常用药材
- ✅ 快速关联新条形码（3秒）
- ✅ 查询NMPA获取权威数据（10秒）
- ✅ 完全免费，无任何限制

---

## 🆘 遇到问题？

### **扫码没反应？**
- 检查摄像头权限
- 确保光线充足
- 对准条形码

### **提示"未找到药材"？**
- 正常！首次扫描就是这样
- 选择"从已有药材中选择"
- 或"输入药材名称"

### **找不到药材列表？**
- 确认已导入32种药材
- 检查控制台是否有错误
- 重新运行导入脚本

---

## 📚 详细文档

- 📄 `docs/免费扫码方案使用说明.md` - 完整使用手册
- 📄 `docs/微信扫码API使用说明.md` - API技术文档

---

**开始享受便捷的扫码入库吧！** 🎉
