# ğŸš€ å¿«é€Ÿéƒ¨ç½² - ä¾›åº”å•†é€‰æ‹©åŠŸèƒ½

## âš ï¸ æ–‡ä»¶è¯»å–è¶…æ—¶é—®é¢˜

ç”±äº `pages-sub/in/add.vue` æ–‡ä»¶è¾ƒå¤§ï¼Œè‡ªåŠ¨è¯»å–è¶…æ—¶ã€‚

---

## ğŸ“‹ è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šæ‰‹åŠ¨ä¿®æ”¹ï¼ˆæ¨èï¼‰â­

æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ‰‹åŠ¨ä¿®æ”¹æ–‡ä»¶ï¼š

#### æ­¥éª¤1: æ‰“å¼€æ–‡ä»¶
åœ¨ VSCode ä¸­æ‰“å¼€ï¼š`pages-sub/in/add.vue`

#### æ­¥éª¤2: ä¿®æ”¹ä¾›åº”å•†è¾“å…¥æ¡†

**ä½¿ç”¨ Ctrl+F æŸ¥æ‰¾**ï¼š
```vue
placeholder="è¯·è¾“å…¥ä¾›åº”å•†"
```

**æ›¿æ¢ä¸º**ï¼š
```vue
<view 
  class="input-value clickable" 
  @click="showSupplierPicker = true"
>
  <text>{{ supplier || 'è¯·é€‰æ‹©ä¾›åº”å•†' }}</text>
  <text class="arrow">â€º</text>
</view>
```

#### æ­¥éª¤3: åœ¨ `</view>` ç»“æŸæ ‡ç­¾å‰æ·»åŠ ç»„ä»¶

æ‰¾åˆ°æœ€åçš„ `</view>` æ ‡ç­¾ï¼ˆçº¦ç¬¬322è¡Œï¼‰ï¼Œåœ¨å®ƒä¹‹å‰æ·»åŠ ï¼š

```vue
<!-- ä¾›åº”å•†é€‰æ‹©å¼¹çª— -->
<supplier-picker
  v-model="showSupplierPicker"
  @select="onSupplierSelect"
  @add-new="showCreateSupplier = true"
></supplier-picker>

<!-- æ–°å»ºä¾›åº”å•†å¼¹çª— -->
<u-popup 
  v-model="showCreateSupplier" 
  mode="center"
  :border-radius="20"
  width="85%"
>
  <view class="create-supplier-popup">
    <view class="popup-header">
      <text class="popup-title">æ–°å»ºä¾›åº”å•†</text>
      <text class="popup-close" @click="showCreateSupplier = false">Ã—</text>
    </view>
    <view class="popup-body">
      <view class="form-item">
        <text class="form-label">ä¾›åº”å•†åç§° *</text>
        <input 
          class="form-input" 
          v-model="newSupplier.name" 
          placeholder="è¯·è¾“å…¥ä¾›åº”å•†åç§°"
        />
      </view>
      <view class="form-item">
        <text class="form-label">è”ç³»äºº</text>
        <input 
          class="form-input" 
          v-model="newSupplier.contact" 
          placeholder="è”ç³»äºº"
        />
      </view>
      <view class="form-item">
        <text class="form-label">è”ç³»ç”µè¯</text>
        <input 
          class="form-input" 
          v-model="newSupplier.phone" 
          type="number"
          placeholder="è”ç³»ç”µè¯"
        />
      </view>
    </view>
    <view class="popup-footer">
      <u-button 
        text="å–æ¶ˆ" 
        plain
        @click="showCreateSupplier = false"
      ></u-button>
      <u-button 
        text="ç¡®å®š" 
        type="primary"
        @click="confirmCreateSupplier"
      ></u-button>
    </view>
  </view>
</u-popup>
```

#### æ­¥éª¤4: ä¿®æ”¹ script éƒ¨åˆ†

**åœ¨ `<script>` å¼€å¤´æ·»åŠ å¯¼å…¥**ï¼š
```javascript
import SupplierPicker from '@/components/supplier-picker.vue'

export default {
  components: {
    SupplierPicker
  },
```

**åœ¨ `data()` è¿”å›å¯¹è±¡ä¸­æ·»åŠ **ï¼š
```javascript
// ä¾›åº”å•†é€‰æ‹©
showSupplierPicker: false,
showCreateSupplier: false,
newSupplier: {
  name: '',
  contact: '',
  phone: ''
},
```

**åœ¨ `methods` ä¸­æ·»åŠ **ï¼š
```javascript
// é€‰æ‹©ä¾›åº”å•†
onSupplierSelect(supplier) {
  this.supplier = supplier.name
},

// ç¡®è®¤æ–°å»ºä¾›åº”å•†
async confirmCreateSupplier() {
  if (!this.newSupplier.name) {
    wx.showToast({ title: 'è¯·è¾“å…¥ä¾›åº”å•†åç§°', icon: 'none' })
    return
  }
  
  try {
    const db = wx.cloud.database()
    const code = `SUP${Date.now().toString().slice(-8)}`
    
    await db.collection('suppliers').add({
      data: {
        name: this.newSupplier.name,
        code: code,
        contact: this.newSupplier.contact,
        phone: this.newSupplier.phone,
        status: 'active',
        createTime: new Date()
      }
    })
    
    wx.showToast({ title: 'æ·»åŠ æˆåŠŸ', icon: 'success' })
    this.supplier = this.newSupplier.name
    this.showCreateSupplier = false
    this.newSupplier = { name: '', contact: '', phone: '' }
    
  } catch (error) {
    wx.showToast({ title: 'æ·»åŠ å¤±è´¥', icon: 'none' })
  }
},
```

#### æ­¥éª¤5: æ·»åŠ æ ·å¼

**åœ¨ `<style>` ä¸­æ·»åŠ **ï¼š
```css
/* å¯ç‚¹å‡»è¾“å…¥æ¡† */
.input-value.clickable {
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 40px;
  padding: 0 15px;
  background: #f5f5f5;
  border-radius: 5px;
}

.input-value.clickable .arrow {
  font-size: 20px;
  color: #999;
}

/* æ–°å»ºä¾›åº”å•†å¼¹çª— */
.create-supplier-popup {
  padding: 20px;
  background: #fff;
  border-radius: 20px;
}

.create-supplier-popup .popup-header {
  display: flex;
  justify-content: space-between;
  margin-bottom: 20px;
}

.create-supplier-popup .popup-title {
  font-size: 18px;
  font-weight: bold;
}

.create-supplier-popup .popup-close {
  font-size: 30px;
  color: #999;
}

.create-supplier-popup .form-item {
  margin-bottom: 15px;
}

.create-supplier-popup .form-label {
  display: block;
  font-size: 14px;
  color: #666;
  margin-bottom: 8px;
}

.create-supplier-popup .form-input {
  width: 100%;
  height: 45px;
  padding: 0 15px;
  background: #f5f5f5;
  border-radius: 8px;
}

.create-supplier-popup .popup-footer {
  display: flex;
  gap: 10px;
  margin-top: 20px;
}

/* ä¼˜åŒ–ç©ºçŠ¶æ€ */
.empty-state {
  padding: 80px 20px;
  text-align: center;
  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
  border-radius: 10px;
  margin: 10px;
}

.empty-icon {
  font-size: 80px;
  opacity: 0.8;
}

.empty-text {
  display: block;
  font-size: 18px;
  color: #666;
  font-weight: bold;
  margin-top: 20px;
}

.empty-hint {
  display: block;
  font-size: 14px;
  color: #999;
  margin-top: 10px;
}
```

---

### æ–¹æ¡ˆ2ï¼šåˆ›å»ºæ•°æ®åº“ï¼ˆå¿…é¡»ï¼‰

åœ¨äº‘å¼€å‘æ§åˆ¶å°æ‰§è¡Œï¼š

```javascript
// 1. åˆ›å»º suppliers é›†åˆï¼ˆæ‰‹åŠ¨åˆ›å»ºæˆ–æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼‰

// 2. æ·»åŠ æµ‹è¯•æ•°æ®
const db = wx.cloud.database()

const suppliers = [
  { name: "åº·ç¾è¯ä¸š", code: "SUP001", contact: "å¼ ç»ç†", phone: "13800138000" },
  { name: "ä¹å·é€šåŒ»è¯", code: "SUP002", contact: "æç»ç†", phone: "13800138001" },
  { name: "åæ¶¦åŒ»è¯", code: "SUP003", contact: "ç‹ç»ç†", phone: "13800138002" }
]

for (let item of suppliers) {
  await db.collection('suppliers').add({
    data: {
      ...item,
      status: 'active',
      createTime: new Date()
    }
  })
}

console.log('âœ… æµ‹è¯•æ•°æ®æ·»åŠ å®Œæˆï¼')
```

---

## âœ… æ£€æŸ¥æ¸…å•

- [ ] å·²ä¿®æ”¹ä¾›åº”å•†è¾“å…¥æ¡†ä¸ºé€‰æ‹©å™¨
- [ ] å·²æ·»åŠ ä¾›åº”å•†é€‰æ‹©å¼¹çª—ç»„ä»¶
- [ ] å·²æ·»åŠ æ–°å»ºä¾›åº”å•†å¼¹çª—
- [ ] å·²å¯¼å…¥ SupplierPicker ç»„ä»¶
- [ ] å·²æ·»åŠ  data å±æ€§
- [ ] å·²æ·»åŠ  methods æ–¹æ³•
- [ ] å·²æ·»åŠ æ ·å¼
- [ ] å·²åˆ›å»º suppliers é›†åˆ
- [ ] å·²æ·»åŠ æµ‹è¯•æ•°æ®
- [ ] å·²é‡æ–°ç¼–è¯‘æµ‹è¯•

---

## ğŸ¯ é¢„æœŸæ•ˆæœ

1. **ä¾›åº”å•†å­—æ®µ**ï¼šç‚¹å‡»åå¼¹å‡ºé€‰æ‹©å™¨
2. **é€‰æ‹©å™¨**ï¼šæ˜¾ç¤ºä¾›åº”å•†åˆ—è¡¨ï¼Œæ”¯æŒæœç´¢
3. **æ–°å»º**ï¼šå¯å¿«é€Ÿæ–°å»ºä¾›åº”å•†
4. **ç©ºçŠ¶æ€**ï¼šç¾è§‚çš„æ¸å˜å¡ç‰‡æ˜¾ç¤º

---

## ğŸ’¡ æç¤º

- ä¿®æ”¹å‰å»ºè®®å¤‡ä»½åŸæ–‡ä»¶
- é€æ­¥æµ‹è¯•æ¯ä¸ªåŠŸèƒ½
- æœ‰é—®é¢˜éšæ—¶å‘Šè¯‰æˆ‘

---

**å‚è€ƒæ–‡æ¡£**ï¼š
- `docs/å…¥åº“å•ä¼˜åŒ–æŒ‡å—.md` - è¯¦ç»†è¯´æ˜
- `pages-sub/in/add_patch.txt` - ä¿®æ”¹è¡¥ä¸

**ç¥æ‚¨ä¿®æ”¹é¡ºåˆ©ï¼** ğŸš€







