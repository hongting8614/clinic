# 🚀 扫码功能快速开始

## 📋 表单填写（极速数据平台）

### 应用平台
```
选择：微信 ✓
```

### 应用名称
```
爱康医务室管理系统
```

### 应用URL
```
https://weixin.qq.com
```

### 应用描述（直接复制粘贴）
```
1、应用介绍：爱康医务室药材进销存管理系统，用于医务室日常药材管理、库存管理、出入库记录等功能。

2、应用场景：通过扫描药材条形码快速识别药材信息，实现药材入库、出库、盘点等业务流程的自动化管理，提高医务室工作效率。

3、详细介绍：本系统为北京欢乐谷医务室开发的专业药材管理小程序，主要功能包括：药材基础信息管理、入库管理、出库管理、库存查询、效期预警、请领管理等。使用条形码API可以快速获取药材的标准信息（名称、规格、厂家等），避免手工录入错误，提升数据准确性。
```

---

## ⏳ 等待审核通过

审核时间：通常1-24小时

审核通过后，您会获得 **AppKey**

---

## ⚙️ 配置云函数（3步完成）

### 第1步：打开云开发控制台
```
微信开发者工具 → 云开发 → 云开发控制台
```

### 第2步：添加环境变量
```
左侧菜单：云函数
找到：drugBarcodeQuery
点击：配置
选项卡：环境变量
点击：添加环境变量

变量名：JISUAPI_APPKEY
变量值：[粘贴您的AppKey]

点击：保存
```

### 第3步：重新部署云函数
```
右键 drugBarcodeQuery 云函数
→ 云端安装依赖（不上传node_modules）
→ 等待完成
→ 上传并部署：云端安装依赖
```

---

## 🧪 测试功能

### 方法1：使用测试页面
```
1. 打开小程序
2. 在地址栏输入：pages/test/scan
3. 点击"开始扫码测试"
4. 扫描药材条形码或手动输入
5. 查看测试结果
```

### 方法2：在药材添加页面测试
```
1. 首页 → 系统设置 → 药材管理
2. 点击"添加药材"
3. 点击"📷 扫码添加药材"
4. 扫描药材条形码
5. 查看是否自动填充信息
```

### 测试用条形码
```
6901234567890  - 常见药材
6921168509089  - 阿莫西林胶囊
6920003800014  - 感冒灵颗粒
6901028000017  - 维生素C片
```

---

## ✅ 成功标志

### 扫码成功后会显示：
- ✅ 识别成功提示
- ✅ 数据来源标识（本地/缓存/API）
- ✅ 自动填充药材信息

### 云函数日志会显示：
```
✅ [第3级] 第三方API查询成功!
药材名称: xxx
数据来源: jisuapi
```

---

## ❓ 遇到问题？

### 问题1：提示"未配置API密钥"
**解决**：检查环境变量是否正确配置，变量名是否为 `JISUAPI_APPKEY`

### 问题2：API调用失败
**解决**：
1. 检查AppKey是否正确
2. 检查API账户余额
3. 查看云函数日志

### 问题3：未找到药材信息
**解决**：
1. 确认条形码正确
2. 尝试手动输入条形码
3. 手动填写药材信息

---

## 📖 详细文档

- `docs/极速数据API配置指南.md` - 完整配置说明
- `docs/扫码功能配置速查表.md` - 快速参考
- `docs/扫码功能开发总结.md` - 技术文档

---

**配置完成后，您就可以使用扫码功能了！** 🎉



