# 🔐 管理员初始密码说明

## 📋 当前情况

### ❌ 没有默认初始密码

根据代码分析，**系统目前没有设置默认初始密码**。

**原因：**
- 添加用户时，密码是**可选参数**
- 如果管理员添加用户时没有提供密码，用户就没有密码
- 用户首次登录后需要自己设置密码

---

## 🔧 解决方案

### 方案1：添加用户时设置初始密码（推荐）⭐

**操作步骤：**
1. 管理员在添加用户时，填写初始密码
2. 密码要求：
   - 不少于8位
   - 包含至少一个大写字母（A-Z）
   - 包含至少一个小写字母（a-z）
   - 包含至少一个数字（0-9）

**示例初始密码：**
- `Admin123` ✅
- `Password2024` ✅
- `User1234` ✅

**优点：**
- ✅ 用户可以直接使用初始密码登录
- ✅ 安全性高（每个用户不同密码）
- ✅ 符合密码安全要求

---

### 方案2：用户首次登录后设置密码

**操作步骤：**
1. 管理员添加用户时，不设置密码
2. 用户首次登录后，系统提示设置密码
3. 用户通过"修改密码"功能设置密码

**优点：**
- ✅ 用户自己设置密码，更安全
- ✅ 管理员不需要管理密码

**缺点：**
- ⚠️ 用户首次登录需要设置密码
- ⚠️ 如果忘记密码，需要通过密码重置功能

---

### 方案3：设置统一的默认初始密码（不推荐）

**如果希望设置统一的默认初始密码，可以修改代码：**

**修改 `cloudfunctions/addUser/index.js`：**

```javascript
// 4. 处理密码（如果提供）
let passwordHash = null
if (password) {
  // 验证并加密密码
  // ... 现有代码
} else {
  // 如果没有提供密码，使用默认密码
  const defaultPassword = 'Admin123' // 默认密码
  const crypto = require('crypto')
  passwordHash = crypto.createHash('sha256').update(defaultPassword).digest('hex')
}
```

**⚠️ 注意：**
- 不推荐使用统一默认密码
- 安全性较低
- 所有用户初始密码相同

---

## 📝 当前使用方式

### 添加用户时设置初始密码

**在用户管理页面：**
1. 点击"添加用户"
2. 填写用户信息
3. **初始密码字段（可选）：**
   - 如果填写：用户使用该密码登录
   - 如果不填写：用户首次登录后需要设置密码

**密码要求：**
- 不少于8位
- 包含大小写字母和数字
- 例如：`Admin123`、`Password2024`

---

## 🔐 密码重置

### 如果用户忘记密码

**方式1：密码重置功能**
1. 进入"重置密码"页面
2. 输入微信号
3. 获取验证码
4. 设置新密码

**方式2：管理员重置**
- 管理员可以在用户管理页面重置用户密码
- （此功能需要开发）

---

## ✅ 推荐做法

### 最佳实践：

1. **添加用户时设置初始密码**
   - 使用符合要求的密码（8位+大小写+数字）
   - 例如：`Admin123`、`User2024`

2. **告知用户初始密码**
   - 通过微信或其他方式告知用户
   - 建议用户首次登录后修改密码

3. **用户首次登录后修改密码**
   - 用户登录后立即修改密码
   - 使用自己的密码更安全

---

## 📊 密码管理流程

### 添加用户流程：

```
1. 管理员添加用户
   ↓
2. 设置初始密码（可选）
   - 如果设置：用户使用该密码登录
   - 如果不设置：用户首次登录后设置密码
   ↓
3. 告知用户初始密码
   ↓
4. 用户首次登录
   ↓
5. 用户修改密码（建议）
```

---

## 🎯 总结

**当前状态：**
- ❌ 没有默认初始密码
- ✅ 添加用户时可以设置初始密码
- ✅ 用户可以通过密码重置功能设置密码

**推荐做法：**
- ✅ 添加用户时设置初始密码
- ✅ 使用符合要求的密码格式
- ✅ 建议用户首次登录后修改密码

---

**最后更新：** 2025-11-09  
**版本：** v1.0

