# 🔐 角色权限详细对照表

## 📊 快速对比

| 功能模块 | 管理员 | 项目经理 | 医生 | 药房 | 查看者 |
|---------|-------|---------|------|------|--------|
| **用户管理** | ✅ | ✅ | ❌ | ❌ | ❌ |
| **药材管理** | ✅ | 查看 | 查看 | ✅ | 查看 |
| **药材入库** | ✅ | ✅ | ❌ | ✅ | ❌ |
| **入库复核** | ✅ | ✅ | ❌ | ❌ | ❌ |
| **药材出库** | ✅ | 查看 | 查看 | ✅ | 查看 |
| **门诊登记** | ✅ | ✅ | ✅ | ❌ | ❌ |
| **报表查看** | ✅ | ✅ | 部分 | 部分 | ✅ |
| **系统设置** | ✅ | ❌ | ❌ | ❌ | ❌ |

---

## 👤 管理员 (admin)

**权限级别：** ⭐⭐⭐⭐⭐ 最高  
**人员定位：** 系统管理员、医务室主任  
**role值：** `admin`

### ✅ 拥有的权限

#### 1️⃣ 用户管理
- ✅ 查看用户列表
- ✅ 添加用户
- ✅ 编辑用户信息
- ✅ 删除用户
- ✅ 启用/禁用用户

#### 2️⃣ 药材管理
- ✅ 查看药材列表
- ✅ 添加药材
- ✅ 编辑药材信息
- ✅ 删除药材
- ✅ 批量导入药材

#### 3️⃣ 入库管理
- ✅ 新建入库单
- ✅ 编辑入库单（草稿状态）
- ✅ 操作员签名
- ✅ **入库复核**
- ✅ **驳回入库单**
- ✅ 查看入库单
- ✅ 删除草稿

#### 4️⃣ 出库管理
- ✅ 新建出库单
- ✅ 发放人签名
- ✅ 接收人签名
- ✅ 查看出库单

#### 5️⃣ 门诊登记
- ✅ 新建门诊登记
- ✅ 查看门诊记录
- ✅ 编辑门诊记录

#### 6️⃣ 报表统计
- ✅ 门诊登记报表
- ✅ 库存报表
- ✅ 出库报表
- ✅ 入库报表
- ✅ 导出所有报表

#### 7️⃣ 系统设置
- ✅ 部门管理
- ✅ 位置管理
- ✅ 系统配置

### 📝 典型使用场景

```
医务室主任小张：
✅ 每天早上查看库存报表
✅ 添加新员工账号
✅ 审核复核入库单
✅ 调整系统设置
✅ 处理异常情况
```

---

## 👔 项目经理 (project_manager)

**权限级别：** ⭐⭐⭐⭐ 高  
**人员定位：** 项目经理、项目负责人  
**role值：** `project_manager`

### ✅ 拥有的权限

#### 1️⃣ 用户管理（重要）
- ✅ 查看用户列表
- ✅ 添加用户
- ✅ 编辑用户信息
- ✅ 删除用户
- ✅ 启用/禁用用户

#### 2️⃣ 药材管理
- ✅ 查看药材列表
- ❌ 添加/编辑/删除药材

#### 3️⃣ 入库管理（重要）
- ✅ 新建入库单
- ✅ 编辑入库单（草稿状态）
- ✅ 操作员签名
- ✅ **入库复核**（核心功能）
- ✅ **驳回入库单**（核心功能）
- ✅ 查看入库单
- ✅ 删除草稿

#### 4️⃣ 出库管理
- ✅ 查看出库单
- ❌ 新建/编辑出库单

#### 5️⃣ 门诊登记
- ✅ 新建门诊登记
- ✅ 查看门诊记录
- ✅ 编辑门诊记录

#### 6️⃣ 报表统计（重要）
- ✅ 门诊登记报表
- ✅ 库存报表
- ✅ 出库报表
- ✅ 入库报表
- ✅ 导出所有报表

#### 7️⃣ 系统设置
- ❌ 无系统设置权限

### ❌ 没有的权限

- ❌ 药材出库（只能查看）
- ❌ 药材管理（增删改）
- ❌ 系统设置

### 📝 典型使用场景

```
项目经理小李：
✅ 每周查看各类报表
✅ 复核药房人员提交的入库单
✅ 管理项目成员账号
✅ 查看库存情况
✅ 门诊登记和统计
❌ 不能进行实际的药材出库操作
```

---

## 👨‍⚕️ 医生 (doctor)

**权限级别：** ⭐⭐ 低  
**人员定位：** 医生  
**role值：** `doctor`

### ✅ 拥有的权限

#### 1️⃣ 门诊登记（核心功能）
- ✅ 新建门诊登记
- ✅ 查看门诊记录
- ✅ 编辑门诊记录

#### 2️⃣ 查看权限
- ✅ 查看药材列表
- ✅ 查看入库单
- ✅ 查看出库单

### ❌ 没有的权限

- ❌ 用户管理
- ❌ 药材管理
- ❌ 药材入库
- ❌ 入库复核
- ❌ 药材出库
- ❌ 报表统计（除基础查询外）
- ❌ 系统设置

### 📝 典型使用场景

```
医生小王：
✅ 为患者进行门诊登记
✅ 查询药材库存
✅ 查看历史门诊记录
❌ 不能进行药材出入库操作
❌ 不能管理用户
```

---

## 💊 药房人员 (pharmacy)

**权限级别：** ⭐⭐⭐ 中  
**人员定位：** 药房工作人员、药师  
**role值：** `pharmacy`

### ✅ 拥有的权限

#### 1️⃣ 药材管理（核心功能）
- ✅ 查看药材列表
- ✅ 添加药材
- ✅ 编辑药材信息
- ❌ 删除药材（仅管理员）

#### 2️⃣ 入库管理（核心功能）
- ✅ 新建入库单
- ✅ 编辑入库单（草稿状态）
- ✅ 操作员签名
- ✅ 查看入库单
- ✅ 删除草稿
- ❌ 入库复核（需项目经理或管理员）

#### 3️⃣ 出库管理（核心功能）
- ✅ 新建出库单
- ✅ 发放人签名
- ✅ 接收人签名
- ✅ 查看出库单

#### 4️⃣ 其他操作
- ✅ 园区调拨
- ✅ 药材消耗
- ✅ 药材请领
- ✅ 库存盘点

### ❌ 没有的权限

- ❌ 用户管理
- ❌ 入库复核
- ❌ 删除药材
- ❌ 报表统计（仅基础查询）
- ❌ 系统设置

### 📝 典型使用场景

```
药房小刘：
✅ 日常药材入库操作
✅ 为科室发放药材（出库）
✅ 添加新药材信息
✅ 进行库存盘点
✅ 提交入库单等待复核
❌ 不能复核自己提交的入库单
❌ 不能管理用户账号
```

---

## 👀 查看者 (viewer)

**权限级别：** ⭐ 最低  
**人员定位：** 财务人员、相关部门人员  
**role值：** `viewer`

### ✅ 拥有的权限

#### 1️⃣ 查看权限
- ✅ 查看药材列表
- ✅ 查看入库单
- ✅ 查看出库单
- ✅ 查看门诊记录
- ✅ 查看基础报表
- ✅ 查看库存信息

### ❌ 没有的权限

- ❌ 任何增删改操作
- ❌ 用户管理
- ❌ 药材管理
- ❌ 出入库操作
- ❌ 签名操作
- ❌ 系统设置

### 📝 典型使用场景

```
财务小周：
✅ 查看月度出入库报表
✅ 核对库存数据
✅ 查询药材使用情况
✅ 导出数据进行财务分析
❌ 不能进行任何操作
❌ 只能查看和导出
```

---

## 🔄 权限对比总结

### 按功能分类

#### 用户管理
```
✅ 管理员     → 完全控制
✅ 项目经理   → 完全控制
❌ 医生       → 无权限
❌ 药房       → 无权限
❌ 查看者     → 无权限
```

#### 入库复核（关键区分点）
```
✅ 管理员     → 可以复核
✅ 项目经理   → 可以复核
❌ 医生       → 不能复核
❌ 药房       → 不能复核（只能提交）
❌ 查看者     → 不能复核
```

#### 药材出库
```
✅ 管理员     → 完全操作
❌ 项目经理   → 只能查看
❌ 医生       → 只能查看
✅ 药房       → 完全操作
❌ 查看者     → 只能查看
```

#### 报表统计
```
✅ 管理员     → 所有报表
✅ 项目经理   → 所有报表
⚠️ 医生       → 基础查询
⚠️ 药房       → 基础查询
✅ 查看者     → 所有报表
```

---

## 💡 实际应用建议

### 开发测试阶段

**推荐配置：**
```
账号A（您的主账号）：管理员
  → 用于完整功能测试
  → 可以完成所有操作

账号B（备用账号）：项目经理
  → 测试复核流程
  → 测试用户管理
  → 测试报表功能

账号C（可选）：药房人员
  → 测试日常出入库
  → 测试权限限制
```

### 生产环境部署

**推荐配置：**
```
1-2个管理员：
  → 医务室主任
  → 系统管理员

1-2个项目经理：
  → 项目负责人
  → 负责复核和报表

2-4个药房人员：
  → 日常操作人员
  → 药房工作人员

若干医生：
  → 门诊登记

若干查看者：
  → 财务、相关部门
```

---

## 🎯 常见权限场景

### 场景1：谁可以复核入库单？

```
✅ 管理员       → 可以
✅ 项目经理     → 可以
❌ 药房人员     → 不可以（只能提交）
❌ 医生         → 不可以
❌ 查看者       → 不可以

✅ 推荐流程：
   药房人员提交 → 项目经理复核 ✓
```

### 场景2：谁可以管理用户？

```
✅ 管理员       → 可以
✅ 项目经理     → 可以
❌ 其他角色     → 都不可以

💡 说明：
   项目经理可以管理用户，方便项目管理
```

### 场景3：谁可以进行药材出库？

```
✅ 管理员       → 可以
✅ 药房人员     → 可以
❌ 项目经理     → 不可以（只能查看）
❌ 医生         → 不可以
❌ 查看者       → 不可以

💡 说明：
   出库是药房的日常工作
   项目经理主要负责审核和统计
```

### 场景4：谁可以查看报表？

```
✅ 管理员       → 所有报表
✅ 项目经理     → 所有报表
⚠️ 医生         → 基础查询
⚠️ 药房人员     → 基础查询
✅ 查看者       → 所有报表

💡 说明：
   查看者主要用于财务和相关部门查询
```

---

## 📝 快速决策树

### 添加新用户时，应该选择什么角色？

```
需要管理系统和复核？
├─ 是 → 项目经理 或 管理员
└─ 否 → 继续判断
    │
    ├─ 需要日常出入库？
    │  └─ 是 → 药房人员
    │
    ├─ 只需要门诊登记？
    │  └─ 是 → 医生
    │
    └─ 只需要查看数据？
       └─ 是 → 查看者
```

---

## ⚠️ 重要提醒

### 1. 管理员和项目经理的区别

```
相同点：
✅ 都可以管理用户
✅ 都可以复核入库
✅ 都可以查看报表

不同点：
✅ 管理员：可以出库、系统设置、删除药材
❌ 项目经理：不能出库、不能系统设置
```

### 2. 药房人员的限制

```
✅ 可以：日常出入库操作
❌ 不能：复核自己提交的入库单
❌ 不能：管理用户
❌ 不能：删除药材

建议：
配合项目经理使用，形成操作-复核机制
```

### 3. 开发测试注意事项

```
✅ 至少准备两个微信账号
✅ 主账号设为管理员（全功能测试）
✅ 备用账号设为项目经理（测试复核）
✅ 使用"自定义编译模式"快速切换
```

---

**最后更新：** 2025年11月10日  
**文档版本：** v1.0  
**适用系统：** AK-PMS v1.0+


