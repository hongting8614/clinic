{"version":3,"sources":["webpack:///D:/AK-PMS/components/batch-selector/index.vue?241f","webpack:///D:/AK-PMS/components/batch-selector/index.vue?0d72","webpack:///D:/AK-PMS/components/batch-selector/index.vue?be2c","webpack:///D:/AK-PMS/components/batch-selector/index.vue?9efa","uni-app:///components/batch-selector/index.vue","webpack:///D:/AK-PMS/components/batch-selector/index.vue?1f9e","webpack:///D:/AK-PMS/components/batch-selector/index.vue?a0c3"],"names":["name","props","buttonText","type","default","buttonType","buttonSize","drugId","required","drugInfo","defaultLocation","showLocationFilter","enableFIFO","data","visible","batchList","loading","methods","showDialog","console","uni","title","icon","handleClose","loadBatches","wx","action","location","result","selectBatch","content","success","confirmSelect","duration","getLocationName"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AAC0K;AAC1K,gBAAgB,uLAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5BA;AAAA;AAAA;AAAA;AAAqoB,CAAgB,iqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gBCgIzpB;EACAA;EACAC;IACA;IACAC;MACAC;MACAC;IACA;IACA;IACAC;MACAF;MACAC;IACA;IACA;IACAE;MACAH;MACAC;IACA;IACA;IACAG;MACAJ;MACAK;IACA;IACA;IACAC;MACAN;MACAC;QAAA;MAAA;IACA;IACA;IACAM;MACAP;MACAC;IACA;IACA;IACAO;MACAR;MACAC;IACA;IACA;IACAQ;MACAT;MACAC;IACA;EACA;EACAS;IACA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACAC;MACAA;MACAA;MACAA;QACAZ;QACAE;QACAC;QACAE;MACA;MAEA;QACAO;QACAC;UACAC;UACAC;QACA;QACA;MACA;MAEAH;MACA;MACA;MACA;IACA;IAEAI;MACA;IACA;IAEAC;MAAA;MAAA;QAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;;gBAEA;gBACAL;gBACAA;gBACAA;gBACAA;gBACAA;gBACAA;gBAAA;gBAAA;gBAAA,OAGAM;kBACAzB;kBACAa;oBACAa;oBACAb;sBACAN;sBACAoB;sBACAf;oBACA;kBACA;gBACA;cAAA;gBAVAgB;gBAYAT;gBACAA;gBAAA,KAEAS;kBAAA;kBAAA;gBAAA;gBACA;gBAEA;kBACAT;kBACAA;kBACAA;kBACAA;kBACAA;gBACA;kBACAA;gBACA;gBAAA;gBAAA;cAAA;gBAAA,MAEA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAA;gBACAC;kBACAC;kBACAC;gBACA;cAAA;gBAAA;gBAEA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEAO;MAAA;MACA;MACA;QACAT;UACAC;UACAC;QACA;QACA;MACA;;MAEA;MACA;QACAF;UACAC;UACAS;UACAC;YACA;cACA;YACA;UACA;QACA;MACA;QACA;MACA;IACA;IAEAC;MACA;MACA;MAEAZ;QACAC;QACAC;QACAW;MACA;IACA;IAEAC;MACA;QACA;QACA;MACA;MACA;IACA;EACA;AACA;AAAA,4B;;;;;;;;;;;;;ACpTA;AAAA;AAAA;AAAA;AAAouC,CAAgB,gtCAAG,EAAC,C;;;;;;;;;;;ACAxvC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/batch-selector/index.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=80038260&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=80038260&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"80038260\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/batch-selector/index.vue\"\nexport default component.exports","export * from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=80038260&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.batchList, function (batch, __i0__) {\n    var $orig = _vm.__get_orig(batch)\n    var m0 = _vm.showLocationFilter ? _vm.getLocationName(batch.location) : null\n    var g0 = _vm.enableFIFO && _vm.batchList.indexOf(batch) === 0\n    return {\n      $orig: $orig,\n      m0: m0,\n      g0: g0,\n    }\n  })\n  var g1 = !_vm.loading && _vm.batchList.length === 0\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        g1: g1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n\t<view>\n\t\t<!-- ä½¿ç”¨åŸç”Ÿbuttonå’Œviewç¡®ä¿äº‹ä»¶èƒ½è§¦å‘ -->\n\t\t<view \n\t\t\tclass=\"batch-selector-button\" \n\t\t\t:class=\"['btn-' + buttonType, 'btn-' + buttonSize]\"\n\t\t\t@tap=\"showDialog\"\n\t\t>\n\t\t\t<text v-if=\"loading\">åŠ è½½ä¸­...</text>\n\t\t\t<text v-else>{{ buttonText }}</text>\n\t\t</view>\n\t\t\n\t\t<!-- å¤‡ç”¨ï¼šuViewæŒ‰é’® -->\n\t\t<!-- <u-button \n\t\t\t:type=\"buttonType\" \n\t\t\t:text=\"buttonText\" \n\t\t\t:size=\"buttonSize\"\n\t\t\t@click=\"showDialog\"\n\t\t\t:loading=\"loading\"\n\t\t></u-button> -->\n\t\t\n\t\t<u-popup \n\t\t\t:show=\"visible\" \n\t\t\tmode=\"center\"\n\t\t\t:round=\"20\"\n\t\t\twidth=\"90%\"\n\t\t\theight=\"65%\"\n\t\t\t:closeable=\"true\"\n\t\t\t:overlay=\"true\"\n\t\t\t:closeOnClickOverlay=\"true\"\n\t\t\t:zIndex=\"9999\"\n\t\t\t:overlayStyle=\"{ backgroundColor: 'rgba(0, 0, 0, 0.5)' }\"\n\t\t\t@close=\"handleClose\"\n\t\t>\n\t\t\t<view class=\"batch-selector-popup\">\n\t\t\t\t<!-- å¤´éƒ¨ -->\n\t\t\t\t<view class=\"popup-header\">\n\t\t\t\t\t<text class=\"popup-title\">é€‰æ‹©æ‰¹æ¬¡</text>\n\t\t\t\t\t<view class=\"close-btn\" @tap=\"handleClose\">\n\t\t\t\t\t\t<text class=\"close-icon\">âœ•</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- è¯æä¿¡æ¯ -->\n\t\t\t\t<view class=\"drug-info-bar\" v-if=\"drugInfo\">\n\t\t\t\t\t<view class=\"info-row\">\n\t\t\t\t\t\t<text class=\"info-label\">è¯æï¼š</text>\n\t\t\t\t\t\t<text class=\"info-value\">{{ drugInfo.name }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"info-row\">\n\t\t\t\t\t\t<text class=\"info-label\">è§„æ ¼ï¼š</text>\n\t\t\t\t\t\t<text class=\"info-value\">{{ drugInfo.specification || drugInfo.spec }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- FIFOæç¤º -->\n\t\t\t\t<view v-if=\"enableFIFO\" class=\"fifo-tip\">\n\t\t\t\t\t<text class=\"tip-icon\">ğŸ’¡</text>\n\t\t\t\t\t<text class=\"tip-text\">å·²æŒ‰å…ˆè¿›å…ˆå‡º(FIFO)æ’åºï¼Œä¼˜å…ˆä½¿ç”¨æœ€æ—©æ‰¹æ¬¡</text>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- æ‰¹æ¬¡åˆ—è¡¨ -->\n\t\t\t\t<scroll-view class=\"batch-list\" scroll-y>\n\t\t\t\t\t<view \n\t\t\t\t\t\tv-for=\"batch in batchList\" \n\t\t\t\t\t\t:key=\"batch._id\" \n\t\t\t\t\t\tclass=\"batch-item\"\n\t\t\t\t\t\t@tap=\"selectBatch(batch)\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<!-- è¿‘æ•ˆæœŸæ ‡è®° -->\n\t\t\t\t\t\t<view v-if=\"batch.isNearExpiry\" class=\"expiry-badge\">\n\t\t\t\t\t\t\t<text>âš ï¸ è¿‘æ•ˆæœŸ</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<view class=\"batch-main\">\n\t\t\t\t\t\t\t<view class=\"batch-header\">\n\t\t\t\t\t\t\t\t<text class=\"batch-number\">æ‰¹å·ï¼š{{ batch.batch }}</text>\n\t\t\t\t\t\t\t\t<text class=\"stock-quantity\" :class=\"{'low-stock': batch.quantity < 10}\">\n\t\t\t\t\t\t\t\t\tåº“å­˜ï¼š{{ batch.quantity }} {{ drugInfo.unit }}\n\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<view class=\"batch-details\">\n\t\t\t\t\t\t\t\t<view class=\"detail-row\">\n\t\t\t\t\t\t\t\t\t<text class=\"detail-label\">ç”Ÿäº§æ—¥æœŸï¼š</text>\n\t\t\t\t\t\t\t\t\t<text class=\"detail-value\">{{ batch.productionDate }}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<view class=\"detail-row\">\n\t\t\t\t\t\t\t\t\t<text class=\"detail-label\">æœ‰æ•ˆæœŸè‡³ï¼š</text>\n\t\t\t\t\t\t\t\t\t<text class=\"detail-value\" :class=\"{'text-warning': batch.isNearExpiry}\">\n\t\t\t\t\t\t\t\t\t\t{{ batch.expireDate }}\n\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<view class=\"detail-row\" v-if=\"batch.price\">\n\t\t\t\t\t\t\t\t\t<text class=\"detail-label\">å•ä»·ï¼š</text>\n\t\t\t\t\t\t\t\t\t<text class=\"detail-value\">Â¥{{ batch.price }}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<view class=\"detail-row\" v-if=\"showLocationFilter\">\n\t\t\t\t\t\t\t\t\t<text class=\"detail-label\">å­˜æ”¾ä½ç½®ï¼š</text>\n\t\t\t\t\t\t\t\t\t<text class=\"detail-value\">{{ getLocationName(batch.location) }}</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<!-- æ¨èæ ‡è®° -->\n\t\t\t\t\t\t<view v-if=\"enableFIFO && batchList.indexOf(batch) === 0\" class=\"recommend-badge\">\n\t\t\t\t\t\t\t<text>æ¨è</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- åŠ è½½çŠ¶æ€ -->\n\t\t\t\t\t<view v-if=\"loading\" class=\"loading-hint\">\n\t\t\t\t\t\t<text>åŠ è½½ä¸­...</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- ç©ºçŠ¶æ€ -->\n\t\t\t\t\t<view v-if=\"!loading && batchList.length === 0\" class=\"empty-hint\">\n\t\t\t\t\t\t<text>ğŸ“¦</text>\n\t\t\t\t\t\t<text>è¯¥è¯ææš‚æ— åº“å­˜</text>\n\t\t\t\t\t\t<text class=\"empty-tip\">è¯·å…ˆè¿›è¡Œå…¥åº“æ“ä½œ</text>\n\t\t\t\t\t</view>\n\t\t\t\t</scroll-view>\n\t\t\t</view>\n\t\t</u-popup>\n\t</view>\n</template>\n\n<script>\nexport default {\n\tname: 'BatchSelector',\n\tprops: {\n\t\t// æŒ‰é’®æ–‡å­—\n\t\tbuttonText: {\n\t\t\ttype: String,\n\t\t\tdefault: 'é€‰æ‹©æ‰¹æ¬¡'\n\t\t},\n\t\t// æŒ‰é’®ç±»å‹\n\t\tbuttonType: {\n\t\t\ttype: String,\n\t\t\tdefault: 'info'\n\t\t},\n\t\t// æŒ‰é’®å°ºå¯¸\n\t\tbuttonSize: {\n\t\t\ttype: String,\n\t\t\tdefault: 'default'\n\t\t},\n\t\t// è¯æID\n\t\tdrugId: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\t// è¯æä¿¡æ¯\n\t\tdrugInfo: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => ({})\n\t\t},\n\t\t// é»˜è®¤å›­åŒº\n\t\tdefaultLocation: {\n\t\t\ttype: String,\n\t\t\tdefault: ''\n\t\t},\n\t\t// æ˜¯å¦æ˜¾ç¤ºå›­åŒºè¿‡æ»¤\n\t\tshowLocationFilter: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\t// æ˜¯å¦å¯ç”¨FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰\n\t\tenableFIFO: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tvisible: false,\n\t\t\tbatchList: [],\n\t\t\tloading: false\n\t\t}\n\t},\n\tmethods: {\n\t\tshowDialog() {\n\t\t\tconsole.log('=== æ‰¹æ¬¡é€‰æ‹©å™¨ showDialog è¢«è°ƒç”¨ ===')\n\t\t\tconsole.log('this.drugId:', this.drugId)\n\t\t\tconsole.log('this.drugInfo:', this.drugInfo)\n\t\t\tconsole.log('æ‰€æœ‰ props:', {\n\t\t\t\tdrugId: this.drugId,\n\t\t\t\tdrugInfo: this.drugInfo,\n\t\t\t\tdefaultLocation: this.defaultLocation,\n\t\t\t\tenableFIFO: this.enableFIFO\n\t\t\t})\n\t\t\t\n\t\t\tif (!this.drugId) {\n\t\t\t\tconsole.error('âŒ drugId ä¸ºç©ºï¼æ— æ³•åŠ è½½æ‰¹æ¬¡')\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'è¯·å…ˆé€‰æ‹©è¯æ',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\n\t\t\tconsole.log('âœ… drugId å­˜åœ¨ï¼Œæ‰“å¼€æ‰¹æ¬¡é€‰æ‹©å™¨')\n\t\t\tthis.visible = true\n\t\t\tthis.batchList = []\n\t\t\tthis.loadBatches()\n\t\t},\n\t\t\n\t\thandleClose() {\n\t\t\tthis.visible = false\n\t\t},\n\t\t\n\t\tasync loadBatches() {\n\t\t\tthis.loading = true\n\t\t\t\n\t\t\t// è°ƒè¯•æ—¥å¿—\n\t\t\tconsole.log('=== æ‰¹æ¬¡é€‰æ‹©å™¨è°ƒè¯• ===')\n\t\t\tconsole.log('è¯æID (drugId):', this.drugId)\n\t\t\tconsole.log('è¯æä¿¡æ¯ (drugInfo):', this.drugInfo)\n\t\t\tconsole.log('è¯æåç§°:', this.drugInfo?.name)\n\t\t\tconsole.log('é»˜è®¤å›­åŒº (location):', this.defaultLocation)\n\t\t\tconsole.log('å¯ç”¨FIFO:', this.enableFIFO)\n\t\t\t\n\t\t\ttry {\n\t\t\t\tconst result = await wx.cloud.callFunction({\n\t\t\t\t\tname: 'stockManage',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\taction: 'getBatchList',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tdrugId: this.drugId,\n\t\t\t\t\t\t\tlocation: this.defaultLocation || undefined,\n\t\t\t\t\t\t\tenableFIFO: this.enableFIFO\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tconsole.log('äº‘å‡½æ•°è¿”å›:', result.result)\n\t\t\t\tconsole.log('æ‰¹æ¬¡æ•°é‡:', result.result.data?.length || 0)\n\t\t\t\t\n\t\t\t\tif (result.result.success) {\n\t\t\t\t\tthis.batchList = result.result.data\n\t\t\t\t\t\n\t\t\t\t\tif (this.batchList.length === 0) {\n\t\t\t\t\t\tconsole.warn('âš ï¸ è¯¥è¯ææš‚æ— åº“å­˜ï¼Œä½†é€‰æ‹©é¡µé¢æ˜¾ç¤ºæœ‰åº“å­˜')\n\t\t\t\t\t\tconsole.warn('å¯èƒ½åŸå› ï¼š')\n\t\t\t\t\t\tconsole.warn('  1. drugId ä¸åŒ¹é…')\n\t\t\t\t\t\tconsole.warn('  2. å›­åŒºç­›é€‰å¯¼è‡´æ— åº“å­˜')\n\t\t\t\t\t\tconsole.warn('  3. åº“å­˜å·²è¢«å…¶ä»–æ“ä½œæ¶ˆè€—')\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log('âœ… æ‰¾åˆ°æ‰¹æ¬¡:', this.batchList)\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(result.result.message || 'æŸ¥è¯¢å¤±è´¥')\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error('âŒ åŠ è½½æ‰¹æ¬¡å¤±è´¥:', err)\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: err.message || 'åŠ è½½å¤±è´¥',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t} finally {\n\t\t\t\tthis.loading = false\n\t\t\t}\n\t\t},\n\t\t\n\t\tselectBatch(batch) {\n\t\t\t// æ£€æŸ¥åº“å­˜\n\t\t\tif (batch.quantity <= 0) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'è¯¥æ‰¹æ¬¡å·²æ— åº“å­˜',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\n\t\t\t// è¿‘æ•ˆæœŸæç¤º\n\t\t\tif (batch.isNearExpiry) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: 'è¿‘æ•ˆæœŸæç¤º',\n\t\t\t\t\tcontent: `è¯¥æ‰¹æ¬¡å°†äº ${batch.expireDate} åˆ°æœŸï¼Œæ˜¯å¦ç»§ç»­ä½¿ç”¨ï¼Ÿ`,\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tthis.confirmSelect(batch)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tthis.confirmSelect(batch)\n\t\t\t}\n\t\t},\n\t\t\n\t\tconfirmSelect(batch) {\n\t\t\tthis.$emit('select', batch)\n\t\t\tthis.handleClose()\n\t\t\t\n\t\t\tuni.showToast({\n\t\t\t\ttitle: 'å·²é€‰æ‹©',\n\t\t\t\ticon: 'success',\n\t\t\t\tduration: 1000\n\t\t\t})\n\t\t},\n\t\t\n\t\tgetLocationName(location) {\n\t\t\tconst locationMap = {\n\t\t\t\t'land_park': 'é™†å›­',\n\t\t\t\t'water_park': 'æ°´å›­'\n\t\t\t}\n\t\t\treturn locationMap[location] || location\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n/* æ‰¹æ¬¡é€‰æ‹©å™¨æŒ‰é’®æ ·å¼ */\n.batch-selector-button {\n\tdisplay: inline-flex;\n\talign-items: center;\n\tjustify-content: center;\n\tpadding: 0 30rpx;\n\theight: 64rpx;\n\tline-height: 64rpx;\n\tborder-radius: 6rpx;\n\tfont-size: 28rpx;\n\tcolor: #fff;\n\tbackground-color: #2979ff;\n\tcursor: pointer;\n\ttransition: all 0.3s;\n\t\n\t&.btn-small {\n\t\theight: 50rpx;\n\t\tline-height: 50rpx;\n\t\tpadding: 0 20rpx;\n\t\tfont-size: 24rpx;\n\t}\n\t\n\t&.btn-info {\n\t\tbackground-color: #2979ff;\n\t}\n\t\n\t&.btn-primary {\n\t\tbackground-color: #3c9cff;\n\t}\n\t\n\t&.btn-success {\n\t\tbackground-color: #5ac725;\n\t}\n\t\n\t&.btn-warning {\n\t\tbackground-color: #f9ae3d;\n\t}\n\t\n\t&:active {\n\t\topacity: 0.8;\n\t}\n}\n\n.batch-selector-popup {\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100%;\n\tbackground-color: #FFFFFF;\n\tborder-radius: 20rpx;\n\tposition: relative;\n\tz-index: 1000;\n\toverflow: hidden;\n}\n\n.popup-header {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 30rpx;\n\tborder-bottom: 1px solid #F0F0F0;\n}\n\n.popup-title {\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n\tcolor: #333333;\n}\n\n.close-btn {\n\twidth: 50rpx;\n\theight: 50rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.close-icon {\n\tfont-size: 40rpx;\n\tcolor: #999999;\n}\n\n.drug-info-bar {\n\tpadding: 20rpx 30rpx;\n\tbackground-color: #F8F9FA;\n\tborder-bottom: 1px solid #F0F0F0;\n}\n\n.info-row {\n\tdisplay: flex;\n\tfont-size: 26rpx;\n\tline-height: 40rpx;\n}\n\n.info-label {\n\tcolor: #999999;\n\tmin-width: 100rpx;\n}\n\n.info-value {\n\tcolor: #333333;\n\tflex: 1;\n}\n\n.fifo-tip {\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: 15rpx 30rpx;\n\tbackground-color: #E8F5E9;\n\tborder-left: 4rpx solid #4CAF50;\n\tmargin: 10rpx 30rpx;\n\tborder-radius: 8rpx;\n}\n\n.tip-icon {\n\tfont-size: 30rpx;\n\tmargin-right: 10rpx;\n}\n\n.tip-text {\n\tfont-size: 24rpx;\n\tcolor: #388E3C;\n\tflex: 1;\n}\n\n.batch-list {\n\tflex: 1;\n\tpadding: 20rpx 30rpx;\n}\n\n.batch-item {\n\tposition: relative;\n\tbackground-color: #FFFFFF;\n\tborder: 2rpx solid #E0E0E0;\n\tborder-radius: 15rpx;\n\tpadding: 25rpx;\n\tmargin-bottom: 20rpx;\n\tbox-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\n}\n\n.batch-item:active {\n\tbackground-color: #F5F5F5;\n}\n\n.expiry-badge {\n\tposition: absolute;\n\ttop: -10rpx;\n\tright: 20rpx;\n\tbackground-color: #FF9800;\n\tcolor: #FFFFFF;\n\tpadding: 4rpx 12rpx;\n\tborder-radius: 8rpx;\n\tfont-size: 22rpx;\n\tz-index: 1;\n}\n\n.recommend-badge {\n\tposition: absolute;\n\ttop: -10rpx;\n\tleft: 20rpx;\n\tbackground: linear-gradient(135deg, #4CAF50, #66BB6A);\n\tcolor: #FFFFFF;\n\tpadding: 4rpx 12rpx;\n\tborder-radius: 8rpx;\n\tfont-size: 22rpx;\n\tz-index: 1;\n}\n\n.batch-main {\n\tposition: relative;\n}\n\n.batch-header {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tmargin-bottom: 15rpx;\n}\n\n.batch-number {\n\tfont-size: 30rpx;\n\tfont-weight: bold;\n\tcolor: #333333;\n\tflex: 1;\n}\n\n.stock-quantity {\n\tfont-size: 28rpx;\n\tfont-weight: bold;\n\tcolor: #4CAF50;\n\tpadding: 4rpx 12rpx;\n\tbackground-color: #E8F5E9;\n\tborder-radius: 8rpx;\n}\n\n.stock-quantity.low-stock {\n\tcolor: #FF5722;\n\tbackground-color: #FFEBEE;\n}\n\n.batch-details {\n\tborder-top: 1px solid #F0F0F0;\n\tpadding-top: 15rpx;\n}\n\n.detail-row {\n\tdisplay: flex;\n\tmargin-bottom: 8rpx;\n\tfont-size: 26rpx;\n\tline-height: 40rpx;\n}\n\n.detail-label {\n\tcolor: #999999;\n\tmin-width: 160rpx;\n}\n\n.detail-value {\n\tcolor: #666666;\n\tflex: 1;\n}\n\n.detail-value.text-warning {\n\tcolor: #FF9800;\n\tfont-weight: bold;\n}\n\n.loading-hint {\n\ttext-align: center;\n\tpadding: 50rpx;\n\tcolor: #999999;\n\tfont-size: 26rpx;\n}\n\n.empty-hint {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tpadding: 40rpx 0;\n\ttext-align: center;\n}\n\n.empty-hint text:first-child {\n\tfont-size: 60rpx;\n\tmargin-bottom: 12rpx;\n}\n\n.empty-hint text:nth-child(2) {\n\tfont-size: 26rpx;\n\tcolor: #999999;\n\tmargin-bottom: 8rpx;\n}\n\n.empty-tip {\n\tfont-size: 22rpx;\n\tcolor: #CCCCCC;\n}\n</style>\n","import mod from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=80038260&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=80038260&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1767327914034\n      var cssReload = require(\"D:/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}