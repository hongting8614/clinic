{"version":3,"sources":["webpack:///D:/AK-PMS/components/signature/index.vue?3323","webpack:///D:/AK-PMS/components/signature/index.vue?5314","webpack:///D:/AK-PMS/components/signature/index.vue?b7ce","webpack:///D:/AK-PMS/components/signature/index.vue?659d","uni-app:///components/signature/index.vue","webpack:///D:/AK-PMS/components/signature/index.vue?7de6","webpack:///D:/AK-PMS/components/signature/index.vue?de79"],"names":["name","props","title","type","default","value","data","isFullScreen","signData","ctx","canvas","canvasWidth","canvasHeight","isDrawing","lastX","lastY","hasDrawn","dpr","canvasOffsetX","canvasOffsetY","watch","immediate","handler","methods","openFullScreen","setTimeout","closeFullScreen","initCanvas","console","initCanvasOld","windowInfo","positionQuery","offsetX","offsetY","drawExistingSign","updateCanvasPosition","query","left","top","resolve","touchStart","touchMove","touchEnd","clearCanvas","clearSign","confirmSign","uni","icon","res","fileID","duration","canvasToTempFilePath","success","fail","canvasId","uploadToCloud","timestamp","random","cloudPath","wx","filePath"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AAC0K;AAC1K,gBAAgB,uLAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAqoB,CAAgB,iqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eC+DzpB;EACAA;EAEAC;IACA;IACAC;MACAC;MACAC;IACA;IACA;IACAC;MACAF;MACAC;IACA;EACA;EAEAE;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;IACA;EACA;;EAEAC;IACAf;MACAgB;MACAC;QACA;MACA;IACA;EACA;EAEAC;IACAC;MAAA;MACA;;MAEA;MACA;QACAC;UACA;QACA;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEAC;MAAA;MACAD;MACA;MACA;MACA;QACAE;MACA;QACA;QACAA;MACA;MACA;MACA;;MAEA;MACA;MACAC;QACA;UACA;UACA;UACAH;YACAI;YACAC;UACA;QACA;MACA;;MAEA;MACA;;MAEA;MACA;MACA;MACA;MACA;MAEAL;IACA;IAEAM;MACA;MACA;IAAA,CACA;IAEA;IACAC;MAAA;MACA;QACA;UACA;UACAC;YACA;cACA;cACA;cACAR;gBACAS;gBACAC;cACA;YACA;YACAC;UACA;QACA;UACAX;UACAW;QACA;MACA;IACA;IAEAC;MACA;QACAZ;QACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;MACA;IACA;IAEAa;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;MACA;MACA;MACA;MACA;IACA;IAEAC;MACA;MACAd;IACA;IAEAe;MACA;MAEA;QACA;QACA;MACA;QACA;QACA;QACA;MACA;MAEA;MACAf;IACA;IAEAgB;MACA;MACA;MACA;MACA;MACA;IACA;IAEAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA;kBAAA;kBAAA;gBAAA;gBACAC;kBACA5C;kBACA6C;gBACA;gBAAA;cAAA;gBAIAD;kBACA5C;gBACA;gBAAA;gBAAA;gBAAA,OAIA;cAAA;gBAAA8C;gBAAA;gBAAA,OAGA;cAAA;gBAAAC;gBAEA;gBACA;gBACA;gBACA;gBAEArB;gBACAA;gBAEAkB;gBACAA;kBACA5C;kBACA6C;kBACAG;gBACA;gBAEA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAtB;gBACAkB;gBACAA;kBACA5C;kBACA6C;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEAI;MAAA;MACA;QACA;UACA;UACAL;YACApC;YACA0C;YACAC;UACA;QACA;UACA;UACAP;YACAQ;YACAF;YACAC;UACA;QACA;MACA;IACA;IAEAE;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBACAC;gBACAC;gBACAC;gBAAA;gBAAA;gBAAA,OAGAC;kBACAD;kBACAE;gBACA;cAAA;gBAHAZ;gBAAA,kCAIAA;cAAA;gBAAA;gBAAA;gBAAA,MAEA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACxVA;AAAA;AAAA;AAAA;AAAouC,CAAgB,gtCAAG,EAAC,C;;;;;;;;;;;ACAxvC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/signature/index.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=45eb2ad0&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=45eb2ad0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"45eb2ad0\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/signature/index.vue\"\nexport default component.exports","export * from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=45eb2ad0&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n\t<view>\n\t\t<!-- ÈùûÂÖ®Â±èÁ≠æÂêçÂå∫Âüü -->\n\t\t<view v-if=\"!isFullScreen\" class=\"signature-container\" @click=\"openFullScreen\">\n\t\t\t<view v-if=\"!signData\" class=\"signature-placeholder\">\n\t\t\t\t<text class=\"placeholder-icon\">üñäÔ∏è</text>\n\t\t\t\t<text class=\"placeholder-text\">ÁÇπÂáªÂÖ®Â±èÁ≠æÂêç</text>\n\t\t\t</view>\n\t\t\t<image v-else :src=\"signData\" mode=\"aspectFit\" class=\"signature-preview\"></image>\n\t\t\t<view v-if=\"signData\" class=\"signature-actions\">\n\t\t\t<button class=\"btn-resign\" @click.stop=\"clearSign\">ÈáçÊñ∞Á≠æÂêç</button>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- ÂÖ®Â±èÁ≠æÂêçÂºπÁ™ó -->\n\t<view v-if=\"isFullScreen\" class=\"signature-popup-mask\" @click.stop=\"closeFullScreen\">\n\t\t<view class=\"fullscreen-signature\" @click.stop>\n\t\t\t\t<!-- È°∂ÈÉ®Â∑•ÂÖ∑Ê†è -->\n\t\t\t<view class=\"signature-header\">\n\t\t\t\t\t<view class=\"header-left\" @click=\"closeFullScreen\">\n\t\t\t\t\t\t<text class=\"header-icon\">‚úï</text>\n\t\t\t\t\t\t<text class=\"header-text\">ÂèñÊ∂à</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"header-center\">\n\t\t\t\t\t\t<text class=\"header-title\">{{ title }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"header-right\" @click=\"clearCanvas\">\n\t\t\t\t\t\t<text class=\"header-icon\">üîÑ</text>\n\t\t\t\t\t\t<text class=\"header-text\">Ê∏ÖÁ©∫</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t<!-- Á≠æÂêçÁîªÂ∏É -->\n\t\t\t<view class=\"signature-canvas-wrapper\">\n\t\t\t\t<canvas \n\t\t\t\t\tid=\"signatureCanvas\"\n\t\t\t\t\tcanvas-id=\"signatureCanvas\"\n\t\t\t\t\tclass=\"signature-canvas\"\n\t\t\t\t\t@touchstart=\"touchStart\"\n\t\t\t\t\t@touchmove=\"touchMove\"\n\t\t\t\t\t@touchend=\"touchEnd\"\n\t\t\t\t\tdisable-scroll=\"true\"\n\t\t\t\t></canvas>\n\t\t\t\t<view v-if=\"!hasDrawn\" class=\"canvas-tip\">ËØ∑Âú®Ê≠§Â§ÑÁ≠æÁΩ≤ÊÇ®ÁöÑÂßìÂêç</view>\n\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- Â∫ïÈÉ®ÊåâÈíÆ -->\n\t\t\t<view class=\"signature-footer\">\n\t\t\t\t<button \n\t\t\t\t\tclass=\"btn-clear\" \n\t\t\t\t\t@click=\"clearCanvas\"\n\t\t\t\t>Ê∏ÖÁ©∫</button>\n\t\t\t\t<button \n\t\t\t\t\tclass=\"btn-save\" \n\t\t\t\t\t@click=\"confirmSign\"\n\t\t\t\t>Á°ÆËÆ§Á≠æÂêç</button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nexport default {\n\tname: 'Signature',\n\t\n\tprops: {\n\t\t// Á≠æÂêçÊ†áÈ¢ò\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\tdefault: 'Á≠æÂêç'\n\t\t},\n\t\t// ÂàùÂßãÁ≠æÂêçÊï∞ÊçÆ\n\t\tvalue: {\n\t\t\ttype: String,\n\t\t\tdefault: ''\n\t\t}\n\t},\n\t\n\tdata() {\n\t\treturn {\n\t\t\tisFullScreen: false,\n\t\t\tsignData: '',\n\t\t\tctx: null,\n\t\t\tcanvas: null,\n\t\t\tcanvasWidth: 0,\n\t\t\tcanvasHeight: 0,\n\t\t\tisDrawing: false,\n\t\t\tlastX: 0,\n\t\t\tlastY: 0,\n\t\t\thasDrawn: false,\n\t\t\tdpr: 1,\n\t\t\tcanvasOffsetX: 0,  // Canvas Áõ∏ÂØπ‰∫éÈ°µÈù¢ÁöÑ X ÂÅèÁßªÔºàÂàùÂßãÂåñÊó∂‰ΩøÁî®Ôºâ\n\t\t\tcanvasOffsetY: 0   // Canvas Áõ∏ÂØπ‰∫éÈ°µÈù¢ÁöÑ Y ÂÅèÁßªÔºàÂàùÂßãÂåñÊó∂‰ΩøÁî®Ôºâ\n\t\t}\n\t},\n\t\n\twatch: {\n\t\tvalue: {\n\t\t\timmediate: true,\n\t\t\thandler(val) {\n\t\t\t\tthis.signData = val\n\t\t\t}\n\t\t}\n\t},\n\t\n\tmethods: {\n\t\topenFullScreen() {\n\t\t\tthis.isFullScreen = true\n\t\t\t\n\t\t\t// Âª∂ËøüÂàùÂßãÂåñÁîªÂ∏ÉÔºåÁ°Æ‰øùpopupÂ∑≤ÂÆåÂÖ®ÊòæÁ§∫\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.initCanvas()\n\t\t\t\t}, 300)\n\t\t\t})\n\t\t},\n\t\t\n\t\tcloseFullScreen() {\n\t\t\tthis.isFullScreen = false\n\t\t},\n\t\t\n\tasync initCanvas() {\n\t\t// ‚ö†Ô∏è Áõ¥Êé•‰ΩøÁî®ÊóßÁâàAPIÔºåÊõ¥Á®≥ÂÆöÂèØÈù†\n\t\tconsole.log('üîß ‰ΩøÁî®ÊóßÁâàCanvas API‰ª•Á°Æ‰øùÂùêÊ†áÂáÜÁ°Æ')\n\t\tthis.initCanvasOld()\n\t},\n\t\t\n\tinitCanvasOld() {\n\t\tconsole.log('‰ΩøÁî®ÊóßÁâàCanvas API')\n\t\t// Ëé∑ÂèñÁ≥ªÁªü‰ø°ÊÅØÔºà‰ΩøÁî®Êñ∞APIÔºåÈÅøÂÖçÂºÉÁî®Ë≠¶ÂëäÔºâ\n\t\tlet windowInfo = {}\n\t\tif (uni.getWindowInfo) {\n\t\t\twindowInfo = uni.getWindowInfo()\n\t\t} else if (uni.getSystemInfoSync) {\n\t\t\t// ÈôçÁ∫ß‰ΩøÁî®Ôºå‰ΩÜ‰ºöÊòæÁ§∫Ë≠¶Âëä\n\t\t\twindowInfo = uni.getSystemInfoSync()\n\t\t}\n\t\tthis.canvasWidth = windowInfo.windowWidth || 375\n\t\tthis.canvasHeight = (windowInfo.windowHeight || 667) - 200\n\t\t\n\t\t// Ëé∑Âèñ canvas ÁöÑ‰ΩçÁΩÆÔºàÁî®‰∫éËÆ°ÁÆóÁõ∏ÂØπÂùêÊ†áÔºâ\n\t\tconst positionQuery = uni.createSelectorQuery().in(this)\n\t\tpositionQuery.select('#signatureCanvas').boundingClientRect((rect) => {\n\t\t\tif (rect) {\n\t\t\t\tthis.canvasOffsetX = rect.left\n\t\t\t\tthis.canvasOffsetY = rect.top\n\t\t\t\tconsole.log('Canvas‰ΩçÁΩÆ (ÊóßÁâàAPI):', {\n\t\t\t\t\toffsetX: this.canvasOffsetX,\n\t\t\t\t\toffsetY: this.canvasOffsetY\n\t\t\t\t})\n\t\t\t}\n\t\t}).exec()\n\t\t\n\t\t// ÂàõÂª∫canvas‰∏ä‰∏ãÊñáÔºàÊóßÁâàAPIÔºâ\n\t\tthis.ctx = uni.createCanvasContext('signatureCanvas', this)\n\t\t\n\t\t// ËÆæÁΩÆÁîªÁ¨îÊ†∑Âºè\n\t\tthis.ctx.setStrokeStyle('#000000')\n\t\tthis.ctx.setLineWidth(3)\n\t\tthis.ctx.setLineCap('round')\n\t\tthis.ctx.setLineJoin('round')\n\t\t\n\t\tconsole.log('CanvasÂàùÂßãÂåñÊàêÂäü (ÊóßÁâàAPI)')\n\t},\n\t\t\n\tdrawExistingSign() {\n\t\t// TODO: Â¶ÇÊûúÊúâÂ∑≤Â≠òÂú®ÁöÑÁ≠æÂêçÂõæÁâáÔºåÁªòÂà∂Âà∞ÁîªÂ∏É‰∏ä\n\t\t// ËøôÈáåÊöÇÊó∂Ë∑≥ËøáÔºåÂõ†‰∏∫Â∞èÁ®ãÂ∫ècanvasÁªòÂà∂ÂõæÁâáËæÉÂ§çÊùÇ\n\t},\n\t\n\t// Êõ¥Êñ∞ canvas ‰ΩçÁΩÆÔºàÁî®‰∫éÂ§ÑÁêÜÈ°µÈù¢ÊªöÂä®Á≠âÊÉÖÂÜµÔºâ\n\tupdateCanvasPosition() {\n\t\treturn new Promise((resolve) => {\n\t\t\ttry {\n\t\t\t\tconst query = uni.createSelectorQuery().in(this)\n\t\t\t\tquery.select('#signatureCanvas').boundingClientRect((rect) => {\n\t\t\t\t\tif (rect) {\n\t\t\t\t\t\tthis.canvasOffsetX = rect.left\n\t\t\t\t\t\tthis.canvasOffsetY = rect.top\n\t\t\t\t\t\tconsole.log('Êõ¥Êñ∞Canvas‰ΩçÁΩÆ:', {\n\t\t\t\t\t\t\tleft: rect.left,\n\t\t\t\t\t\t\ttop: rect.top\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\tresolve()\n\t\t\t\t}).exec()\n\t\t\t} catch (err) {\n\t\t\t\tconsole.warn('Êõ¥Êñ∞Canvas‰ΩçÁΩÆÂ§±Ë¥•:', err)\n\t\t\t\tresolve()\n\t\t\t}\n\t\t})\n\t},\n\t\t\n\ttouchStart(e) {\n\t\tif (!this.ctx) {\n\t\t\tconsole.error('CanvasÊú™ÂàùÂßãÂåñ')\n\t\t\treturn\n\t\t}\n\t\tconst touch = e.touches[0]\n\t\t// Áõ¥Êé•‰ΩøÁî®Áõ∏ÂØπÂùêÊ†áÔºå‰øùËØÅËøûË¥ØÊÄß\n\t\tconst x = typeof touch.x === 'number' ? touch.x : 0\n\t\tconst y = typeof touch.y === 'number' ? touch.y : 0\n\t\tthis.isDrawing = true\n\t\tthis.lastX = x\n\t\tthis.lastY = y\n\t\tthis.ctx.beginPath()\n\t\tthis.ctx.moveTo(x, y)\n\t\tif (!this.canvas) {\n\t\t\tthis.ctx.draw(true)\n\t\t}\n\t},\n\t\n\ttouchMove(e) {\n\t\tif (!this.isDrawing || !this.ctx) return\n\t\tconst touch = e.touches[0]\n\t\tconst x = typeof touch.x === 'number' ? touch.x : 0\n\t\tconst y = typeof touch.y === 'number' ? touch.y : 0\n\t\t// ÊØèÊ¨°‰ªé‰∏ä‰∏Ä‰∏™ÁÇπËøûÂà∞ÂΩìÂâçÁÇπÔºåÂΩ¢ÊàêËøûÁª≠Á¨îËøπ\n\t\tthis.ctx.beginPath()\n\t\tthis.ctx.moveTo(this.lastX, this.lastY)\n\t\tthis.ctx.lineTo(x, y)\n\t\tthis.ctx.stroke()\n\t\tif (!this.canvas) {\n\t\t\tthis.ctx.draw(true)\n\t\t}\n\t\tthis.lastX = x\n\t\tthis.lastY = y\n\t\tthis.hasDrawn = true\n\t},\n\t\t\n\ttouchEnd(e) {\n\t\tthis.isDrawing = false\n\t\tconsole.log('‚úÖ ÁªìÊùüÁªòÂà∂')\n\t},\n\t\t\n\t\tclearCanvas() {\n\t\t\tif (!this.ctx) return\n\t\t\t\n\t\t\tif (this.canvas) {\n\t\t\t\t// Êñ∞ÁâàAPI\n\t\t\t\tthis.ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight)\n\t\t\t} else {\n\t\t\t\t// ÊóßÁâàAPI\n\t\t\t\tthis.ctx.clearRect(0, 0, this.canvasWidth, this.canvasHeight)\n\t\t\t\tthis.ctx.draw(true)\n\t\t\t}\n\t\t\t\n\t\t\tthis.hasDrawn = false\n\t\t\tconsole.log('ÁîªÂ∏ÉÂ∑≤Ê∏ÖÁ©∫')\n\t\t},\n\t\t\n\t\tclearSign() {\n\t\t\tthis.signData = ''\n\t\t\tthis.hasDrawn = false\n\t\t\tthis.$emit('input', '')\n\t\t\tthis.$emit('update:value', '')\n\t\t\tthis.$emit('change', '')\n\t\t},\n\t\t\n\t\tasync confirmSign() {\n\t\t\tif (!this.hasDrawn) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'ËØ∑ÂÖàÁ≠æÂêç',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: 'Ê≠£Âú®‰øùÂ≠ò...'\n\t\t\t})\n\t\t\t\n\t\t\ttry {\n\t\t\t\t// Â∞ÜcanvasËΩ¨‰∏∫‰∏¥Êó∂ÂõæÁâá\n\t\t\t\tconst res = await this.canvasToTempFilePath()\n\t\t\t\t\n\t\t\t\t// ‰∏ä‰º†Âà∞‰∫ëÂ≠òÂÇ®\n\t\t\t\tconst fileID = await this.uploadToCloud(res.tempFilePath)\n\t\t\t\t\n\t\t\t\tthis.signData = fileID\n\t\t\t\tthis.$emit('input', fileID)\n\t\t\t\tthis.$emit('update:value', fileID)\n\t\t\t\tthis.$emit('change', fileID)\n\t\t\t\n\t\t\tconsole.log('‚úÖ Á≠æÂêç‰øùÂ≠òÊàêÂäü:', fileID)\n\t\t\tconsole.log('‚úÖ Â∑≤Ëß¶Âèëinput/update:value/change‰∫ã‰ª∂')\n\t\t\t\t\n\t\t\t\tuni.hideLoading()\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'Á≠æÂêçÊàêÂäü',\n\t\t\t\ticon: 'success',\n\t\t\t\tduration: 1500\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tthis.closeFullScreen()\n\t\t\t\t\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error('Á≠æÂêç‰øùÂ≠òÂ§±Ë¥•:', err)\n\t\t\t\tuni.hideLoading()\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'Á≠æÂêç‰øùÂ≠òÂ§±Ë¥•',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\t\n\t\tcanvasToTempFilePath() {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tif (this.canvas) {\n\t\t\t\t\t// Êñ∞ÁâàAPI\n\t\t\t\t\tuni.canvasToTempFilePath({\n\t\t\t\t\t\tcanvas: this.canvas,\n\t\t\t\t\t\tsuccess: resolve,\n\t\t\t\t\t\tfail: reject\n\t\t\t\t\t}, this)\n\t\t\t\t} else {\n\t\t\t\t\t// ÊóßÁâàAPI\n\t\t\t\t\tuni.canvasToTempFilePath({\n\t\t\t\t\t\tcanvasId: 'signatureCanvas',\n\t\t\t\t\t\tsuccess: resolve,\n\t\t\t\t\t\tfail: reject\n\t\t\t\t\t}, this)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t\n\t\tasync uploadToCloud(filePath) {\n\t\t\t// ÁîüÊàê‰∫ëÂ≠òÂÇ®Ë∑ØÂæÑ\n\t\t\tconst timestamp = Date.now()\n\t\t\tconst random = Math.floor(Math.random() * 1000)\n\t\t\tconst cloudPath = `signatures/${timestamp}_${random}.png`\n\t\t\t\n\t\t\ttry {\n\t\t\t\tconst res = await wx.cloud.uploadFile({\n\t\t\t\t\tcloudPath: cloudPath,\n\t\t\t\t\tfilePath: filePath\n\t\t\t\t})\n\t\t\t\treturn res.fileID\n\t\t\t} catch (err) {\n\t\t\t\tthrow new Error('‰∏ä‰º†‰∫ëÂ≠òÂÇ®Â§±Ë¥•')\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n// ==================== ÈùûÂÖ®Â±èÁ≠æÂêçÂå∫Âüü ====================\n.signature-container {\n\twidth: 100%;\n\theight: 90rpx;\n\tbackground-color: #FFFFFF;\n\tborder: 2rpx solid #E5E5E5;\n\tborder-radius: 16rpx;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tposition: relative;\n}\n\n.signature-placeholder {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tgap: 6rpx;\n\n.placeholder-icon {\n\t\tfont-size: 24rpx;\n}\n\n.placeholder-text {\n\t\tfont-size: 24rpx;\n\t\tcolor: #999999;\n\t}\n}\n\n.signature-preview {\n\twidth: 100%;\n\theight: 100%;\n}\n\n.signature-actions {\n\tposition: absolute;\n\tbottom: 8rpx;\n\tright: 12rpx;\n\t\n\t.btn-resign {\n\t\tpadding: 4rpx 16rpx;\n\t\tbackground-color: #FF976A;\n\t\tcolor: #FFFFFF;\n\t\tfont-size: 20rpx;\n\t\tborder-radius: 16rpx;\n\t\tborder: none;\n\t\t\n\t\t&::after {\n\t\t\tborder: none;\n\t\t}\n\t}\n}\n\n// ==================== ÂÖ®Â±èÁ≠æÂêçÂºπÁ™ó ====================\n.signature-popup-mask {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tbackground-color: rgba(0, 0, 0, 0.5);\n\tz-index: 9999;\n\tdisplay: flex;\n\talign-items: stretch;\n\tjustify-content: center;\n}\n\n.fullscreen-signature {\n\twidth: 100%;\n\theight: 100vh;\n\tmax-height: 100vh;\n\tdisplay: flex;\n\tflex-direction: column;\n\tbackground-color: #FFFFFF;\n\tpadding: calc(env(safe-area-inset-top) + 10rpx) 20rpx calc(env(safe-area-inset-bottom) + 180rpx) 20rpx;\n\tbox-sizing: border-box;\n\toverflow: hidden;\n\tgap: 16rpx;\n\tposition: relative;\n}\n\n// È°∂ÈÉ®Â∑•ÂÖ∑Ê†è\n.signature-header {\n\theight: 88rpx;\n\tbackground-color: #FFFFFF;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tpadding: 0 30rpx;\n\tbox-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\n\tflex-shrink: 0;\n\n.header-left,\n.header-right {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 10rpx;\n\tpadding: 10rpx;\n\n.header-icon {\n\tfont-size: 32rpx;\n}\n\n.header-text {\n\tfont-size: 28rpx;\n\tcolor: #333333;\n\t\t}\n}\n\n.header-center {\n\tflex: 1;\n\ttext-align: center;\n\n.header-title {\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n\tcolor: #333333;\n\t\t}\n\t}\n}\n\n// Á≠æÂêçÁîªÂ∏É\n.signature-canvas-wrapper {\n\tflex: 1;\n\tmin-height: 0;\n\tbackground-color: #FAFAFA;\n\tmargin: 10rpx 0 0;\n\tborder-radius: 20rpx;\n\tposition: relative;\n\toverflow: hidden;\n\tborder: 1rpx solid #E5E5E5;\n\n.signature-canvas {\n\twidth: 100%;\n\theight: 100%;\n}\n\n.canvas-tip {\n\tposition: absolute;\n\ttop: 50%;\n\tleft: 50%;\n\ttransform: translate(-50%, -50%);\n\tfont-size: 28rpx;\n\tcolor: #CCCCCC;\n\tpointer-events: none;\n\tz-index: 0;\n\t}\n}\n\n// Â∫ïÈÉ®ÊåâÈíÆ\n.signature-footer {\n\theight: 110rpx;\n\tbackground-color: #FFFFFF;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-around;\n\tpadding: 0 30rpx;\n\tbox-shadow: 0 -2rpx 10rpx rgba(0, 0, 0, 0.05);\n\tgap: 20rpx;\n\tflex-shrink: 0;\n\tborder-radius: 24rpx;\n\n\tbutton {\n\t\tflex: 1;\n\t\theight: 72rpx;\n\t\tborder-radius: 36rpx;\n\t\tfont-size: 28rpx;\n\t\tborder: none;\n\t\t\n\t\t&::after {\n\t\t\tborder: none;\n\t\t}\n\t}\n\t\n\t.btn-clear {\n\t\tbackground-color: #F7F8FA;\n\t\tcolor: #646566;\n\t}\n\t\n\t.btn-save {\n\t\tbackground-color: #07C160;\n\t\tcolor: #FFFFFF;\n\t\t\n\t\t&:disabled {\n\t\t\tbackground-color: #C8C9CC;\n\t\t\tcolor: #FFFFFF;\n\t\t}\n\t}\n}\n</style>\n\n\n","import mod from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=45eb2ad0&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=45eb2ad0&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1767406263304\n      var cssReload = require(\"D:/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}