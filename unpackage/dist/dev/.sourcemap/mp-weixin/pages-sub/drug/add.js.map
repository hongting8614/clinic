{"version":3,"sources":["uni-app:///main.js","webpack:///D:/AK-PMS/pages-sub/drug/add.vue?f4a7","webpack:///D:/AK-PMS/pages-sub/drug/add.vue?da1a","webpack:///D:/AK-PMS/pages-sub/drug/add.vue?5bfa","webpack:///D:/AK-PMS/pages-sub/drug/add.vue?f373","uni-app:///pages-sub/drug/add.vue","webpack:///D:/AK-PMS/pages-sub/drug/add.vue?3479","webpack:///D:/AK-PMS/pages-sub/drug/add.vue?5462"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","Scanner","data","isEdit","drugId","form","drugCode","drugName","specification","manufacturer","barcode","category","packUnit","minUnit","conversionRate","safeStock","minStock","isHighValue","isEmergency","remark","categoryOptions","categoryIndex","onLoad","methods","onScanSuccess","console","exists","uni","title","content","confirmText","cancelText","success","url","sourceText","icon","duration","fillFormFromScanData","parseConversionFromSpec","rate","onBarcodeNotFound","showCancel","scrollTop","checkBarcodeExists","name","action","res","loadDrugDetail","_id","drug","index","onCategoryChange","validateForm","handleSubmit","submitData","updateTime","setTimeout","generateDrugCode","handleCancel"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,YAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4H;AAC5H;AACuD;AACL;AACsC;;;AAGxF;AAC4M;AAC5M,gBAAgB,gNAAU;AAC1B,EAAE,yEAAM;AACR,EAAE,0FAAM;AACR,EAAE,mGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,8FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,4KAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AClDA;AAAA;AAAA;AAAA;AAAgyB,CAAgB,4xBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCmPpzB;EACAC;IACAC;EACA;EAEAC;IACA;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC,kBACA,QACA,QACA,SACA,SACA,SACA,QACA,QACA,QACA,KACA;MACAC;IACA;EACA;EAEAC;IACA;MACA;MACA;MACA;IACA;EACA;EAEAC;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAC;gBAEAf,4BAEA;gBAAA;gBAAA,OACA;cAAA;gBAAAgB;gBAAA,KAEAA;kBAAA;kBAAA;gBAAA;gBACAC;kBACAC;kBACAC;kBACAC;kBACAC;kBACAC;oBACA;sBACAL;wBACAM;sBACA;oBACA;kBACA;gBACA;gBAAA;cAAA;gBAIA;gBACA;;gBAEA;gBACAC;kBACA;kBACA;kBACA;gBACA;gBAEAP;kBACAC;kBACAO;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACAC;MACAZ;;MAEA;MACA;QACA;MACA;MAEA;QACA;MACA;MAEA;QACA;MACA;MAEA;QACA;MACA;;MAEA;MACA;QACA;QACA;QACA;UACA;QACA;MACA;;MAEA;MACA;QACA;MACA;;MAEA;MACA;QACA;QACA;UACA;UACA;YACA;UACA;QACA;MACA;MAEAA;IACA;IAEA;IACAa;MACA;MACA;MACA;MACA;;MAEA,gBACA;MAAA;MACA;MAAA,CACA;;MAEA;QAAA;QACA;QACA;UACA;YACAC;YACA1B;UACA;QACA;MACA;MAEA;IACA;IAEA;IACA2B;MAAA;MACAf;MAEA;MAEAE;QACAC;QACAC;QACAY;QACAX;QACAE;UACA;UACA;;UAEA;UACAL;YACAe;YACAN;UACA;QACA;MACA;IACA;IAEA;IACAO;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAEAhD;kBACAiD;kBACA1C;oBACA2C;oBACAnC;kBACA;gBACA;cAAA;gBANAoC;gBAAA,MAQAA;kBAAA;kBAAA;gBAAA;gBAAA,kCACAA;cAAA;gBAAA,kCAEA;cAAA;gBAAA;gBAAA;gBAEArB;gBAAA,kCACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAsB;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACApB;kBAAAC;gBAAA;gBAAA;gBAAA;gBAAA,OAGAjC;kBACAiD;kBACA1C;oBACA2C;oBACAG;kBACA;gBACA;cAAA;gBANAF;gBAQA;kBACAG;kBACA;oBACA3C;oBACAC;oBACAC;oBACAC;oBACAC;oBACAC;oBACAC;oBACAC;oBACAC;oBACAC;oBACAC;oBACAC;oBACAC;oBACAC;kBACA;;kBAEA;kBACA+B;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAzB;gBACAE;kBACAC;kBACAO;gBACA;cAAA;gBAAA;gBAEAR;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAwB;MACA;MACA;IACA;IAEA;IACAC;MACA;QACAzB;UACAC;UACAO;QACA;QACA;MACA;MAEA;QACAR;UACAC;UACAO;QACA;QACA;MACA;MAEA;QACAR;UACAC;UACAO;QACA;QACA;MACA;MAEA;QACAR;UACAC;UACAO;QACA;QACA;MACA;MAEA;QACAR;UACAC;UACAO;QACA;QACA;MACA;MAEA;QACAR;UACAC;UACAO;QACA;QACA;MACA;MAEA;IACA;IAEA;IACAkB;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAIA1B;kBAAAC;gBAAA;gBAAA;gBAGA;gBACA;kBACA;gBACA;gBAEA0B,6CACA;kBACAC;gBAAA;gBAAA,KAGA;kBAAA;kBAAA;gBAAA;gBACA;gBACAD;gBAAA;gBAAA,OACA3D;kBACAiD;kBACA1C;oBACA2C;kBAAA,GACAS;gBAEA;cAAA;gBAAA;gBAAA;cAAA;gBAEA;gBACAA;gBAAA;gBAAA,OACA3D;kBACAiD;kBACA1C;oBACA2C;kBAAA,GACAS;gBAEA;cAAA;gBAGA3B;kBACAC;kBACAO;gBACA;gBAEAqB;kBACA7B;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAGAF;gBACAE;kBACAC;kBACAO;gBACA;cAAA;gBAAA;gBAEAR;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACA8B;MACA;MACA;MACA;MACA;;MAEA;MACA;MACA;MAEA;IACA;IAEA;IACAC;MACA/B;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AChoBA;AAAA;AAAA;AAAA;AAA+/C,CAAgB,+6CAAG,EAAC,C;;;;;;;;;;;ACAnhD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages-sub/drug/add.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages-sub/drug/add.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./add.vue?vue&type=template&id=cfbffdd0&scoped=true&\"\nvar renderjs\nimport script from \"./add.vue?vue&type=script&lang=js&\"\nexport * from \"./add.vue?vue&type=script&lang=js&\"\nimport style0 from \"./add.vue?vue&type=style&index=0&id=cfbffdd0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cfbffdd0\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages-sub/drug/add.vue\"\nexport default component.exports","export * from \"-!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./add.vue?vue&type=template&id=cfbffdd0&scoped=true&\"","var components\ntry {\n  components = {\n    scanner: function () {\n      return import(\n        /* webpackChunkName: \"components/scanner/index\" */ \"@/components/scanner/index.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. æ’æŸ¥ç»„ä»¶åç§°æ‹¼å†™æ˜¯å¦æ­£ç¡®\")\n    console.error(\n      \"2. æ’æŸ¥ç»„ä»¶æ˜¯å¦ç¬¦åˆ easycom è§„èŒƒï¼Œæ–‡æ¡£ï¼šhttps://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. è‹¥ç»„ä»¶ä¸ç¬¦åˆ easycom è§„èŒƒï¼Œéœ€æ‰‹åŠ¨å¼•å…¥ï¼Œå¹¶åœ¨ components ä¸­æ³¨å†Œè¯¥ç»„ä»¶\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.form.remark.length\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.form.isHighValue = $event.detail.value\n    }\n    _vm.e1 = function ($event) {\n      _vm.form.isEmergency = $event.detail.value\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./add.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"page-container\">\n\t\t<!-- æ ‡é¢˜æ  -->\n\t\t<view class=\"page-header\">\n\t\t\t<view class=\"clinic-name\">ğŸ¥ çˆ±åº·åŒ»åŠ¡å®¤ç®¡ç†ç³»ç»Ÿ</view>\n\t\t\t<view class=\"doc-type\">åŒ—äº¬æ¬¢ä¹è°·åŒ»åŠ¡å®¤ Â· è¯ææ¡£æ¡ˆ{{ isEdit ? 'ç¼–è¾‘' : 'æ·»åŠ ' }}</view>\n\t\t</view>\n\n\t\t<!-- æ‰«ç åŒºåŸŸ - ä»…è¯ææ¡£æ¡ˆé¡µé¢ä¿ç•™æ‰«ç åŠŸèƒ½ -->\n\t\t<view class=\"scan-section\">\n\t\t\t<view class=\"scan-title\">ğŸ“· æ‰«ç å½•å…¥</view>\n\t\t\t<view class=\"scan-desc\">æ‰«æè¯ææ¡å½¢ç å¿«é€Ÿå½•å…¥è¯æä¿¡æ¯</view>\n\t\t\t<scanner \n\t\t\t\tbutton-text=\"ğŸ“· æ‰«ç æ·»åŠ è¯æ\"\n\t\t\t\tbutton-type=\"primary\"\n\t\t\t\t@success=\"onScanSuccess\"\n\t\t\t\t@notFound=\"onBarcodeNotFound\"\n\t\t\t></scanner>\n\t\t</view>\n\n\t\t<!-- åŸºæœ¬ä¿¡æ¯ -->\n\t\t<view class=\"form-section\">\n\t\t\t<view class=\"section-title\">ğŸ“‹ åŸºæœ¬ä¿¡æ¯</view>\n\n\t\t\t<!-- è¯æåç§° -->\n\t\t\t<view class=\"form-item\">\n\t\t\t\t<view class=\"label required\">è¯æåç§°</view>\n\t\t\t\t<input \n\t\t\t\t\tv-model=\"form.drugName\" \n\t\t\t\t\tclass=\"input\" \n\t\t\t\t\tplaceholder=\"è¯·è¾“å…¥è¯æåç§°\"\n\t\t\t\t\tplaceholder-class=\"placeholder\"\n\t\t\t\t/>\n\t\t\t</view>\n\n\t\t\t<!-- è¯æä»£ç  -->\n\t\t\t<view class=\"form-item\">\n\t\t\t\t<view class=\"label\">è¯æä»£ç </view>\n\t\t\t\t<input \n\t\t\t\t\tv-model=\"form.drugCode\" \n\t\t\t\t\tclass=\"input\" \n\t\t\t\t\tplaceholder=\"å¦‚ï¼šAMOX500-TABï¼ˆå¯é€‰ï¼Œç³»ç»Ÿå¯è‡ªåŠ¨ç”Ÿæˆï¼‰\"\n\t\t\t\t\tplaceholder-class=\"placeholder\"\n\t\t\t\t/>\n\t\t\t</view>\n\n\t\t\t<!-- æ¡å½¢ç  -->\n\t\t\t<view class=\"form-item\">\n\t\t\t\t<view class=\"label\">æ¡å½¢ç </view>\n\t\t\t\t<input \n\t\t\t\t\tv-model=\"form.barcode\" \n\t\t\t\t\tclass=\"input\" \n\t\t\t\t\tplaceholder=\"è¯·è¾“å…¥æˆ–æ‰«ææ¡å½¢ç \"\n\t\t\t\t\tplaceholder-class=\"placeholder\"\n\t\t\t\t/>\n\t\t\t</view>\n\n\t\t\t<!-- è§„æ ¼ -->\n\t\t\t<view class=\"form-item\">\n\t\t\t\t<view class=\"label required\">è§„æ ¼</view>\n\t\t\t\t<input \n\t\t\t\t\tv-model=\"form.specification\" \n\t\t\t\t\tclass=\"input\" \n\t\t\t\t\tplaceholder=\"å¦‚ï¼š0.25g*24ç²’\"\n\t\t\t\t\tplaceholder-class=\"placeholder\"\n\t\t\t\t/>\n\t\t\t</view>\n\n\t\t\t<!-- ç”Ÿäº§å‚å®¶ -->\n\t\t\t<view class=\"form-item\">\n\t\t\t\t<view class=\"label required\">ç”Ÿäº§å‚å®¶</view>\n\t\t\t\t<input \n\t\t\t\t\tv-model=\"form.manufacturer\" \n\t\t\t\t\tclass=\"input\" \n\t\t\t\t\tplaceholder=\"è¯·è¾“å…¥ç”Ÿäº§å‚å®¶\"\n\t\t\t\t\tplaceholder-class=\"placeholder\"\n\t\t\t\t/>\n\t\t\t</view>\n\n\t\t\t<!-- è¯æåˆ†ç±» -->\n\t\t\t<view class=\"form-item\">\n\t\t\t\t<view class=\"label\">è¯æåˆ†ç±»</view>\n\t\t\t\t<picker \n\t\t\t\t\tmode=\"selector\" \n\t\t\t\t\t:range=\"categoryOptions\" \n\t\t\t\t\t@change=\"onCategoryChange\"\n\t\t\t\t\t:value=\"categoryIndex\"\n\t\t\t\t>\n\t\t\t\t\t<view class=\"picker-display\">\n\t\t\t\t\t\t{{ form.category || 'è¯·é€‰æ‹©è¯æåˆ†ç±»' }}\n\t\t\t\t\t</view>\n\t\t\t\t</picker>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- å•ä½ä¿¡æ¯ -->\n\t\t<view class=\"form-section\">\n\t\t\t<view class=\"section-title\">ğŸ“¦ å•ä½è½¬æ¢</view>\n\t\t\t<view class=\"section-desc\">è®¾ç½®åŒ…è£…å•ä½å’Œæœ€å°å•ä½çš„è½¬æ¢å…³ç³»</view>\n\n\t\t\t<!-- åŒ…è£…å•ä½ -->\n\t\t\t<view class=\"form-item\">\n\t\t\t\t<view class=\"label required\">åŒ…è£…å•ä½</view>\n\t\t\t\t<view class=\"input-row\">\n\t\t\t\t\t<input \n\t\t\t\t\t\tv-model=\"form.packUnit\" \n\t\t\t\t\t\tclass=\"input flex-input\" \n\t\t\t\t\t\tplaceholder=\"å¦‚ï¼šç›’ã€ç“¶\"\n\t\t\t\t\t\tplaceholder-class=\"placeholder\"\n\t\t\t\t\t/>\n\t\t\t\t\t<text class=\"hint\">ï¼ˆä¸»åº“å­˜å•ä½ï¼‰</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- æœ€å°å•ä½ -->\n\t\t\t<view class=\"form-item\">\n\t\t\t\t<view class=\"label required\">æœ€å°å•ä½</view>\n\t\t\t\t<view class=\"input-row\">\n\t\t\t\t\t<input \n\t\t\t\t\t\tv-model=\"form.minUnit\" \n\t\t\t\t\t\tclass=\"input flex-input\" \n\t\t\t\t\t\tplaceholder=\"å¦‚ï¼šç‰‡ã€ç²’ã€ml\"\n\t\t\t\t\t\tplaceholder-class=\"placeholder\"\n\t\t\t\t\t/>\n\t\t\t\t\t<text class=\"hint\">ï¼ˆå›­åŒºä½¿ç”¨å•ä½ï¼‰</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- è½¬æ¢ç‡ -->\n\t\t\t<view class=\"form-item\">\n\t\t\t\t<view class=\"label required\">è½¬æ¢ç‡</view>\n\t\t\t\t<view class=\"conversion-row\">\n\t\t\t\t\t<text class=\"conversion-text\">1 {{ form.packUnit || 'ç›’' }} = </text>\n\t\t\t\t\t<input \n\t\t\t\t\t\tv-model.number=\"form.conversionRate\" \n\t\t\t\t\t\tclass=\"input conversion-input\" \n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tplaceholder=\"24\"\n\t\t\t\t\t\tplaceholder-class=\"placeholder\"\n\t\t\t\t\t/>\n\t\t\t\t\t<text class=\"conversion-text\">{{ form.minUnit || 'ç‰‡' }}</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- è½¬æ¢ç¤ºä¾‹ -->\n\t\t\t<view v-if=\"form.conversionRate\" class=\"conversion-example\">\n\t\t\t\t<text class=\"example-icon\">ğŸ’¡</text>\n\t\t\t\t<text class=\"example-text\">\n\t\t\t\t\tç¤ºä¾‹ï¼šå…¥åº“ 1{{ form.packUnit || 'ç›’' }}ï¼Œå‡ºåº“åˆ°å›­åŒºåå¯ç”¨ {{ form.conversionRate }}{{ form.minUnit || 'ç‰‡' }}\n\t\t\t\t</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- åº“å­˜ç®¡ç† -->\n\t\t<view class=\"form-section\">\n\t\t\t<view class=\"section-title\">ğŸ“Š åº“å­˜ç®¡ç†</view>\n\n\t\t\t<!-- å®‰å…¨åº“å­˜ -->\n\t\t\t<view class=\"form-item\">\n\t\t\t\t<view class=\"label\">å®‰å…¨åº“å­˜</view>\n\t\t\t\t<view class=\"input-row\">\n\t\t\t\t\t<input \n\t\t\t\t\t\tv-model.number=\"form.safeStock\" \n\t\t\t\t\t\tclass=\"input flex-input\" \n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tplaceholder=\"è¯·è¾“å…¥å®‰å…¨åº“å­˜æ•°é‡\"\n\t\t\t\t\t\tplaceholder-class=\"placeholder\"\n\t\t\t\t\t/>\n\t\t\t\t\t<text class=\"hint\">{{ form.packUnit || 'å•ä½' }}</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- æœ€ä½åº“å­˜ -->\n\t\t\t<view class=\"form-item\">\n\t\t\t\t<view class=\"label\">æœ€ä½åº“å­˜</view>\n\t\t\t\t<view class=\"input-row\">\n\t\t\t\t\t<input \n\t\t\t\t\t\tv-model.number=\"form.minStock\" \n\t\t\t\t\t\tclass=\"input flex-input\" \n\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\tplaceholder=\"è¯·è¾“å…¥æœ€ä½åº“å­˜æ•°é‡\"\n\t\t\t\t\t\tplaceholder-class=\"placeholder\"\n\t\t\t\t\t/>\n\t\t\t\t\t<text class=\"hint\">{{ form.packUnit || 'å•ä½' }}</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- ç‰¹æ®Šæ ‡è®° -->\n\t\t<view class=\"form-section\">\n\t\t\t<view class=\"section-title\">ğŸ·ï¸ ç‰¹æ®Šæ ‡è®°</view>\n\n\t\t\t<view class=\"switch-item\">\n\t\t\t\t<view class=\"switch-label\">\n\t\t\t\t\t<text class=\"label-text\">é«˜å€¼è¯æ</text>\n\t\t\t\t\t<text class=\"label-desc\">æ ‡è®°ä¸ºé«˜å€¼è¯æï¼Œéœ€ç‰¹æ®Šç®¡ç†</text>\n\t\t\t\t</view>\n\t\t\t\t<switch \n\t\t\t\t\t:checked=\"form.isHighValue\" \n\t\t\t\t\t@change=\"form.isHighValue = $event.detail.value\"\n\t\t\t\t\tcolor=\"#FF9800\"\n\t\t\t\t/>\n\t\t\t</view>\n\n\t\t\t<view class=\"switch-item\">\n\t\t\t\t<view class=\"switch-label\">\n\t\t\t\t\t<text class=\"label-text\">æ€¥æ•‘è¯æ</text>\n\t\t\t\t\t<text class=\"label-desc\">æ ‡è®°ä¸ºæ€¥æ•‘è¯æï¼Œä¼˜å…ˆç®¡ç†</text>\n\t\t\t\t</view>\n\t\t\t\t<switch \n\t\t\t\t\t:checked=\"form.isEmergency\" \n\t\t\t\t\t@change=\"form.isEmergency = $event.detail.value\"\n\t\t\t\t\tcolor=\"#F44336\"\n\t\t\t\t/>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- å¤‡æ³¨ -->\n\t\t<view class=\"form-section\">\n\t\t\t<view class=\"section-title\">ğŸ“ å¤‡æ³¨ä¿¡æ¯</view>\n\t\t\t<view class=\"form-item\">\n\t\t\t\t<textarea \n\t\t\t\t\tv-model=\"form.remark\" \n\t\t\t\t\tclass=\"textarea\" \n\t\t\t\t\tplaceholder=\"è¯·è¾“å…¥å¤‡æ³¨ä¿¡æ¯ï¼ˆé€‰å¡«ï¼‰\"\n\t\t\t\t\tplaceholder-class=\"placeholder\"\n\t\t\t\t\tmaxlength=\"200\"\n\t\t\t\t></textarea>\n\t\t\t\t<view class=\"char-count\">{{ form.remark.length }}/200</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- åº•éƒ¨æ“ä½œæŒ‰é’® -->\n\t\t<view class=\"bottom-actions\">\n\t\t\t<button class=\"btn-cancel\" @tap=\"handleCancel\">å–æ¶ˆ</button>\n\t\t\t<button class=\"btn-submit\" @tap=\"handleSubmit\">{{ isEdit ? 'ä¿å­˜ä¿®æ”¹' : 'ğŸ’¾ ä¿å­˜è¯æ' }}</button>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nimport Scanner from '@/components/scanner/index.vue'\n\nexport default {\n\tcomponents: {\n\t\tScanner\n\t},\n\t\n\tdata() {\n\t\treturn {\n\t\t\tisEdit: false,\n\t\t\tdrugId: '',\n\t\t\tform: {\n\t\t\t\tdrugCode: '',\n\t\t\t\tdrugName: '',\n\t\t\t\tspecification: '',\n\t\t\t\tmanufacturer: '',\n\t\t\t\tbarcode: '',\n\t\t\t\tcategory: '',\n\t\t\t\tpackUnit: 'ç›’',\n\t\t\t\tminUnit: 'ç‰‡',\n\t\t\t\tconversionRate: 1,\n\t\t\t\tsafeStock: 100,\n\t\t\t\tminStock: 50,\n\t\t\t\tisHighValue: false,\n\t\t\t\tisEmergency: false,\n\t\t\t\tremark: ''\n\t\t\t},\n\t\t\tcategoryOptions: [\n\t\t\t\t'æŠ—ç”Ÿç´ ç±»',\n\t\t\t\t'å¿ƒè¡€ç®¡ç±»',\n\t\t\t\t'æ¶ˆåŒ–ç³»ç»Ÿç±»',\n\t\t\t\t'å‘¼å¸ç³»ç»Ÿç±»',\n\t\t\t\t'è§£çƒ­é•‡ç—›ç±»',\n\t\t\t\t'ç»´ç”Ÿç´ ç±»',\n\t\t\t\t'å¤–ç”¨è¯ç±»',\n\t\t\t\t'æ€¥æ•‘è¯æ',\n\t\t\t\t'å…¶ä»–'\n\t\t\t],\n\t\t\tcategoryIndex: -1\n\t\t}\n\t},\n\n\tonLoad(options) {\n\t\tif (options.id) {\n\t\t\tthis.isEdit = true\n\t\t\tthis.drugId = options.id\n\t\t\tthis.loadDrugDetail()\n\t\t}\n\t},\n\n\tmethods: {\n\t\t// æ‰«ç æˆåŠŸå›è°ƒ\n\t\tasync onScanSuccess(drugInfo) {\n\t\t\tconsole.log('âœ… æ‰«ç æˆåŠŸï¼Œè·å–åˆ°è¯æä¿¡æ¯:', drugInfo)\n\t\t\t\n\t\t\tconst barcode = drugInfo.barcode\n\t\t\t\n\t\t\t// æ£€æŸ¥æ•°æ®åº“ä¸­æ˜¯å¦å·²å­˜åœ¨è¯¥æ¡å½¢ç \n\t\t\tconst exists = await this.checkBarcodeExists(barcode)\n\t\t\t\n\t\t\tif (exists) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: 'ğŸ’Š è¯æå·²å­˜åœ¨',\n\t\t\t\t\tcontent: `è¯¥æ¡å½¢ç è¯æå·²å½•å…¥ç³»ç»Ÿ\\n\\nè¯æåç§°ï¼š${exists.drugName}\\nè§„æ ¼ï¼š${exists.specification}\\n\\næ˜¯å¦æŸ¥çœ‹è¯¦æƒ…ï¼Ÿ`,\n\t\t\t\t\tconfirmText: 'æŸ¥çœ‹è¯¦æƒ…',\n\t\t\t\t\tcancelText: 'é‡æ–°å½•å…¥',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\t\turl: `/pages-sub/drug/detail?id=${exists._id}`\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\n\t\t\t// è‡ªåŠ¨å¡«å……è¡¨å•\n\t\t\tthis.fillFormFromScanData(drugInfo)\n\t\t\t\n\t\t\t// æ˜¾ç¤ºæˆåŠŸæç¤º\n\t\t\tconst sourceText = {\n\t\t\t\t'local': 'æœ¬åœ°æ¡£æ¡ˆ',\n\t\t\t\t'cache': 'ç¼“å­˜æ•°æ®',\n\t\t\t\t'gs1': 'APIæŸ¥è¯¢'\n\t\t\t}[drugInfo.source] || 'æ‰«ç '\n\t\t\t\n\t\t\tuni.showToast({\n\t\t\t\ttitle: `âœ… ä¿¡æ¯å·²è‡ªåŠ¨å¡«å…… (${sourceText})`,\n\t\t\t\ticon: 'success',\n\t\t\t\tduration: 2000\n\t\t\t})\n\t\t},\n\t\t\n\t\t// ä»æ‰«ç æ•°æ®å¡«å……è¡¨å•\n\t\tfillFormFromScanData(drugInfo) {\n\t\t\tconsole.log('ğŸ“ è‡ªåŠ¨å¡«å……è¡¨å•:', drugInfo)\n\t\t\t\n\t\t\t// å¡«å……åŸºæœ¬ä¿¡æ¯\n\t\t\tif (drugInfo.name) {\n\t\t\t\tthis.form.drugName = drugInfo.name\n\t\t\t}\n\t\t\t\n\t\t\tif (drugInfo.specification) {\n\t\t\t\tthis.form.specification = drugInfo.specification\n\t\t\t}\n\t\t\t\n\t\t\tif (drugInfo.manufacturer) {\n\t\t\t\tthis.form.manufacturer = drugInfo.manufacturer\n\t\t\t}\n\t\t\t\n\t\t\tif (drugInfo.barcode) {\n\t\t\t\tthis.form.barcode = drugInfo.barcode\n\t\t\t}\n\t\t\t\n\t\t\t// å¡«å……åˆ†ç±»\n\t\t\tif (drugInfo.category) {\n\t\t\t\tthis.form.category = drugInfo.category\n\t\t\t\tconst index = this.categoryOptions.indexOf(drugInfo.category)\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\tthis.categoryIndex = index\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// æ™ºèƒ½è§£æå•ä½ä¿¡æ¯\n\t\t\tif (drugInfo.unit) {\n\t\t\t\tthis.form.packUnit = drugInfo.unit\n\t\t\t}\n\t\t\t\n\t\t\t// å°è¯•ä»è§„æ ¼ä¸­è§£æè½¬æ¢ç‡\n\t\t\tif (drugInfo.specification) {\n\t\t\t\tconst conversionInfo = this.parseConversionFromSpec(drugInfo.specification)\n\t\t\t\tif (conversionInfo) {\n\t\t\t\t\tthis.form.conversionRate = conversionInfo.rate\n\t\t\t\t\tif (conversionInfo.minUnit) {\n\t\t\t\t\t\tthis.form.minUnit = conversionInfo.minUnit\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tconsole.log('âœ… è¡¨å•å¡«å……å®Œæˆ:', this.form)\n\t\t},\n\t\t\n\t\t// ä»è§„æ ¼å­—ç¬¦ä¸²è§£æè½¬æ¢ç‡\n\t\tparseConversionFromSpec(spec) {\n\t\t\t// åŒ¹é…å¸¸è§æ ¼å¼ï¼š\n\t\t\t// \"0.25g*24ç²’\" -> 24ç²’\n\t\t\t// \"10ml*10æ”¯\" -> 10æ”¯\n\t\t\t// \"100mgÃ—20ç‰‡\" -> 20ç‰‡\n\t\t\t\n\t\t\tconst patterns = [\n\t\t\t\t/[*Ã—](\\d+)([ç‰‡ç²’ç²’æ”¯è¢‹åŒ…])/,  // åŒ¹é… *24ç‰‡ æˆ– Ã—24ç‰‡\n\t\t\t\t/(\\d+)([ç‰‡ç²’æ”¯è¢‹åŒ…])\\/[ç›’ç“¶]/  // åŒ¹é… 24ç‰‡/ç›’\n\t\t\t]\n\t\t\t\n\t\t\tfor (let pattern of patterns) {\n\t\t\t\tconst match = spec.match(pattern)\n\t\t\t\tif (match) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\trate: parseInt(match[1]),\n\t\t\t\t\t\tminUnit: match[2]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn null\n\t\t},\n\n\t\t// æ¡å½¢ç ä¸å­˜åœ¨å›è°ƒ\n\t\tonBarcodeNotFound(data) {\n\t\t\tconsole.log('âš ï¸ æœªæ‰¾åˆ°æ¡å½¢ç :', data)\n\t\t\t\n\t\t\tconst barcode = data.barcode || data\n\t\t\t\n\t\t\tuni.showModal({\n\t\t\t\ttitle: 'ğŸ’Š æ–°è¯æå½•å…¥',\n\t\t\t\tcontent: `æ¡å½¢ç ï¼š${barcode}\\n\\nè¯¥è¯ææœªåœ¨ç³»ç»Ÿä¸­æ‰¾åˆ°ï¼Œè¯·æ‰‹åŠ¨å¡«å†™è¯æä¿¡æ¯ã€‚\\n\\næç¤ºï¼šå¡«å†™å®Œæˆåï¼Œä¸‹æ¬¡æ‰«ææ­¤æ¡å½¢ç å°†è‡ªåŠ¨è¯†åˆ«ã€‚`,\n\t\t\t\tshowCancel: false,\n\t\t\t\tconfirmText: 'å¼€å§‹å¡«å†™',\n\t\t\t\tsuccess: () => {\n\t\t\t\t\t// åªå¡«å……æ¡å½¢ç ï¼Œå…¶ä»–ä¿¡æ¯éœ€è¦æ‰‹åŠ¨å¡«å†™\n\t\t\t\t\tthis.form.barcode = barcode\n\t\t\t\t\t\n\t\t\t\t\t// æ»šåŠ¨åˆ°è¡¨å•é¡¶éƒ¨\n\t\t\t\t\tuni.pageScrollTo({\n\t\t\t\t\t\tscrollTop: 200,\n\t\t\t\t\t\tduration: 300\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\t// æ£€æŸ¥æ¡å½¢ç æ˜¯å¦å­˜åœ¨\n\t\tasync checkBarcodeExists(barcode) {\n\t\t\ttry {\n\t\t\t\tconst res = await wx.cloud.callFunction({\n\t\t\t\t\tname: 'drugManage',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\taction: 'checkBarcode',\n\t\t\t\t\t\tbarcode: barcode\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tif (res.result.success && res.result.data) {\n\t\t\t\t\treturn res.result.data\n\t\t\t\t}\n\t\t\t\treturn null\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error('æ£€æŸ¥æ¡å½¢ç å¤±è´¥:', err)\n\t\t\t\treturn null\n\t\t\t}\n\t\t},\n\n\t\t// åŠ è½½è¯æè¯¦æƒ…ï¼ˆç¼–è¾‘æ¨¡å¼ï¼‰\n\t\tasync loadDrugDetail() {\n\t\t\tuni.showLoading({ title: 'åŠ è½½ä¸­...' })\n\t\t\t\n\t\t\ttry {\n\t\t\t\tconst res = await wx.cloud.callFunction({\n\t\t\t\t\tname: 'drugManage',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\taction: 'getDetail',\n\t\t\t\t\t\t_id: this.drugId\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tif (res.result.success) {\n\t\t\t\t\tconst drug = res.result.data\n\t\t\t\t\tthis.form = {\n\t\t\t\t\t\tdrugCode: drug.drugCode || '',\n\t\t\t\t\t\tdrugName: drug.drugName || '',\n\t\t\t\t\t\tspecification: drug.specification || '',\n\t\t\t\t\t\tmanufacturer: drug.manufacturer || '',\n\t\t\t\t\t\tbarcode: drug.barcode || '',\n\t\t\t\t\t\tcategory: drug.category || '',\n\t\t\t\t\t\tpackUnit: drug.packUnit || 'ç›’',\n\t\t\t\t\t\tminUnit: drug.minUnit || 'ç‰‡',\n\t\t\t\t\t\tconversionRate: drug.conversionRate || 1,\n\t\t\t\t\t\tsafeStock: drug.safeStock || 100,\n\t\t\t\t\t\tminStock: drug.minStock || 50,\n\t\t\t\t\t\tisHighValue: drug.isHighValue || false,\n\t\t\t\t\t\tisEmergency: drug.isEmergency || false,\n\t\t\t\t\t\tremark: drug.remark || ''\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// è®¾ç½®åˆ†ç±»ç´¢å¼•\n\t\t\t\t\tconst index = this.categoryOptions.indexOf(this.form.category)\n\t\t\t\t\tthis.categoryIndex = index >= 0 ? index : -1\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error('åŠ è½½è¯æè¯¦æƒ…å¤±è´¥:', err)\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'åŠ è½½å¤±è´¥',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t} finally {\n\t\t\t\tuni.hideLoading()\n\t\t\t}\n\t\t},\n\n\t\t// åˆ†ç±»é€‰æ‹©\n\t\tonCategoryChange(e) {\n\t\t\tthis.categoryIndex = e.detail.value\n\t\t\tthis.form.category = this.categoryOptions[e.detail.value]\n\t\t},\n\n\t\t// è¡¨å•éªŒè¯\n\t\tvalidateForm() {\n\t\t\tif (!this.form.drugName) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'è¯·è¾“å…¥è¯æåç§°',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tif (!this.form.specification) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'è¯·è¾“å…¥è¯æè§„æ ¼',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tif (!this.form.manufacturer) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'è¯·è¾“å…¥ç”Ÿäº§å‚å®¶',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tif (!this.form.packUnit) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'è¯·è¾“å…¥åŒ…è£…å•ä½',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tif (!this.form.minUnit) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'è¯·è¾“å…¥æœ€å°å•ä½',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tif (!this.form.conversionRate || this.form.conversionRate <= 0) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'è¯·è¾“å…¥æ­£ç¡®çš„è½¬æ¢ç‡',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\treturn true\n\t\t},\n\n\t\t// æäº¤è¡¨å•\n\t\tasync handleSubmit() {\n\t\t\tif (!this.validateForm()) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tuni.showLoading({ title: this.isEdit ? 'ä¿å­˜ä¸­...' : 'æ·»åŠ ä¸­...' })\n\n\t\t\ttry {\n\t\t\t\t// å¦‚æœæ²¡æœ‰è¯æä»£ç ï¼Œè‡ªåŠ¨ç”Ÿæˆ\n\t\t\t\tif (!this.form.drugCode) {\n\t\t\t\t\tthis.form.drugCode = this.generateDrugCode()\n\t\t\t\t}\n\n\t\t\t\tconst submitData = {\n\t\t\t\t\t...this.form,\n\t\t\t\t\tupdateTime: new Date().getTime()\n\t\t\t\t}\n\n\t\t\t\tif (this.isEdit) {\n\t\t\t\t\t// æ›´æ–°è¯æ\n\t\t\t\t\tsubmitData._id = this.drugId\n\t\t\t\t\tawait wx.cloud.callFunction({\n\t\t\t\t\t\tname: 'drugManage',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\taction: 'update',\n\t\t\t\t\t\t\t...submitData\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\t// æ–°å¢è¯æ\n\t\t\t\t\tsubmitData.createTime = new Date().getTime()\n\t\t\t\t\tawait wx.cloud.callFunction({\n\t\t\t\t\t\tname: 'drugManage',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\taction: 'add',\n\t\t\t\t\t\t\t...submitData\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: this.isEdit ? 'ä¿å­˜æˆåŠŸ' : 'æ·»åŠ æˆåŠŸ',\n\t\t\t\t\ticon: 'success'\n\t\t\t\t})\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tuni.navigateBack()\n\t\t\t\t}, 1500)\n\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error('æäº¤å¤±è´¥:', err)\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'æäº¤å¤±è´¥',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t} finally {\n\t\t\t\tuni.hideLoading()\n\t\t\t}\n\t\t},\n\n\t\t// ç”Ÿæˆè¯æä»£ç \n\t\tgenerateDrugCode() {\n\t\t\t// ç®€å•çš„ä»£ç ç”Ÿæˆé€»è¾‘ï¼šå–è¯æåç§°æ‹¼éŸ³é¦–å­—æ¯ + è§„æ ¼é¦–å­—æ¯ + æ—¶é—´æˆ³å4ä½\n\t\t\tconst name = this.form.drugName\n\t\t\tconst spec = this.form.specification\n\t\t\tconst timestamp = Date.now().toString().slice(-4)\n\t\t\t\n\t\t\t// è¿™é‡Œç®€åŒ–å¤„ç†ï¼Œå®é™…åº”è¯¥ç”¨æ‹¼éŸ³åº“\n\t\t\tconst nameCode = name.substring(0, 3).toUpperCase()\n\t\t\tconst specCode = spec ? spec.substring(0, 3).replace(/[^a-zA-Z0-9]/g, '').toUpperCase() : ''\n\t\t\t\n\t\t\treturn `${nameCode}${specCode}-${timestamp}`\n\t\t},\n\n\t\t// å–æ¶ˆ\n\t\thandleCancel() {\n\t\t\tuni.navigateBack()\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.page-container {\n\tmin-height: 100vh;\n\t/* ä¸å‡ºå…¥åº“/åº“å­˜é¡µé¢ç»Ÿä¸€çš„è“è‰²æ¸å˜èƒŒæ™¯ */\n\tbackground: linear-gradient(180deg, #00c9ff 0%, #00a0ff 35%, #e5e7eb 100%);\n\tpadding: 24rpx 24rpx 150rpx;\n}\n\n.page-header {\n\tmax-width: 702rpx;\n\tmargin: 10rpx auto 8rpx;\n\tbackground: #fffff0;\n\tpadding: 26rpx 26rpx 20rpx;\n\ttext-align: center;\n\tborder-radius: 22rpx;\n\tbox-shadow:\n\t\t0 1rpx 0 rgba(255, 255, 255, 0.9) inset,\n\t\t0 -1rpx 0 rgba(15, 23, 42, 0.06) inset,\n\t\t0 18rpx 40rpx rgba(15, 23, 42, 0.14);\n}\n\n.clinic-name {\n\tfont-size: 40rpx;\n\tfont-weight: bold;\n\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n\t-webkit-background-clip: text;\n\t-webkit-text-fill-color: transparent;\n\tmargin-bottom: 12rpx;\n\tletter-spacing: 2rpx;\n}\n\n.doc-type {\n\tfont-size: 26rpx;\n\tcolor: #666666;\n\tletter-spacing: 1rpx;\n}\n\n.scan-section {\n\tmax-width: 702rpx;\n\tmargin: 0 auto 8rpx;\n\tbackground: #fffff0;\n\tborder-radius: 22rpx;\n\tpadding: 30rpx 26rpx 26rpx;\n\tbox-shadow: 0 8rpx 20rpx rgba(15, 23, 42, 0.12);\n}\n\n.scan-title {\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n\tcolor: #FFFFFF;\n\tmargin-bottom: 10rpx;\n\ttext-align: center;\n}\n\n.scan-desc {\n\tfont-size: 24rpx;\n\tcolor: rgba(255, 255, 255, 0.8);\n\ttext-align: center;\n\tmargin-bottom: 30rpx;\n}\n\n.form-section {\n\tmax-width: 702rpx;\n\tmargin: 0 auto 8rpx;\n\tbackground-color: #fffff0;\n\tborder-radius: 22rpx;\n\tpadding: 26rpx 26rpx 22rpx;\n\tbox-shadow: 0 8rpx 20rpx rgba(15, 23, 42, 0.12);\n}\n\n.section-title {\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n\tcolor: #333333;\n\tmargin-bottom: 10rpx;\n\tpadding-bottom: 20rpx;\n\tborder-bottom: 2rpx solid #F0F0F0;\n}\n\n.section-desc {\n\tfont-size: 24rpx;\n\tcolor: #999999;\n\tmargin-bottom: 30rpx;\n\tline-height: 1.6;\n}\n\n.form-item {\n\tmargin-bottom: 30rpx;\n}\n\n.label {\n\tfont-size: 28rpx;\n\tcolor: #333333;\n\tmargin-bottom: 15rpx;\n\tdisplay: block;\n\tfont-weight: 500;\n}\n\n.required::before {\n\tcontent: '*';\n\tcolor: #FF4444;\n\tmargin-right: 5rpx;\n}\n\n.input {\n\twidth: 100%;\n\theight: 80rpx;\n\tbackground-color: #F8F9FA;\n\tborder-radius: 12rpx;\n\tpadding: 0 20rpx;\n\tfont-size: 28rpx;\n\tcolor: #333333;\n\tborder: 2rpx solid transparent;\n\ttransition: all 0.3s;\n\tbox-sizing: border-box;\n}\n\n.input:focus {\n\tbackground-color: #FFFFFF;\n\tborder-color: #667eea;\n}\n\n.placeholder {\n\tcolor: #CCCCCC;\n}\n\n.picker-display {\n\theight: 80rpx;\n\tbackground-color: #F8F9FA;\n\tborder-radius: 12rpx;\n\tpadding: 0 20rpx;\n\tfont-size: 28rpx;\n\tcolor: #333333;\n\tdisplay: flex;\n\talign-items: center;\n\tborder: 2rpx solid transparent;\n}\n\n.input-row {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 15rpx;\n}\n\n.flex-input {\n\tflex: 1;\n}\n\n.hint {\n\tfont-size: 24rpx;\n\tcolor: #999999;\n\twhite-space: nowrap;\n}\n\n.conversion-row {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: 15rpx;\n\tbackground-color: #F8F9FA;\n\tborder-radius: 12rpx;\n\tpadding: 20rpx;\n}\n\n.conversion-text {\n\tfont-size: 28rpx;\n\tcolor: #666666;\n\twhite-space: nowrap;\n}\n\n.conversion-input {\n\twidth: 120rpx;\n\theight: 60rpx;\n\tbackground-color: #FFFFFF;\n\ttext-align: center;\n\tfont-weight: bold;\n\tcolor: #667eea;\n}\n\n.conversion-example {\n\tmargin-top: 20rpx;\n\tpadding: 20rpx;\n\tbackground: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%);\n\tborder-radius: 12rpx;\n\tdisplay: flex;\n\talign-items: flex-start;\n\tgap: 10rpx;\n}\n\n.example-icon {\n\tfont-size: 32rpx;\n\tline-height: 1;\n}\n\n.example-text {\n\tflex: 1;\n\tfont-size: 24rpx;\n\tcolor: #F57C00;\n\tline-height: 1.6;\n}\n\n.switch-item {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 25rpx 0;\n\tborder-bottom: 1rpx solid #F0F0F0;\n}\n\n.switch-item:last-child {\n\tborder-bottom: none;\n}\n\n.switch-label {\n\tflex: 1;\n}\n\n.label-text {\n\tfont-size: 28rpx;\n\tcolor: #333333;\n\tfont-weight: 500;\n\tdisplay: block;\n\tmargin-bottom: 8rpx;\n}\n\n.label-desc {\n\tfont-size: 24rpx;\n\tcolor: #999999;\n\tdisplay: block;\n}\n\n.textarea {\n\twidth: 100%;\n\tmin-height: 200rpx;\n\tbackground-color: #F8F9FA;\n\tborder-radius: 12rpx;\n\tpadding: 20rpx;\n\tfont-size: 28rpx;\n\tcolor: #333333;\n\tline-height: 1.6;\n\tbox-sizing: border-box;\n}\n\n.char-count {\n\ttext-align: right;\n\tfont-size: 24rpx;\n\tcolor: #999999;\n\tmargin-top: 10rpx;\n}\n\n.bottom-actions {\n\tposition: fixed;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tbackground-color: #FFFFFF;\n\tpadding: 18rpx 24rpx 26rpx;\n\tdisplay: flex;\n\tgap: 20rpx;\n\tbox-shadow: 0 -4rpx 20rpx rgba(0, 0, 0, 0.08);\n\tz-index: 100;\n}\n\n.btn-cancel,\n.btn-submit {\n\tflex: 1;\n\theight: 90rpx;\n\tborder-radius: 999rpx;\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n\tborder: none;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.btn-cancel {\n\tbackground-color: #ffffff;\n\tcolor: #64748b;\n\tborder: 1rpx solid #cbd5e1;\n}\n\n.btn-submit {\n\tbackground: linear-gradient(135deg, #00c9ff 0%, #00a0ff 100%);\n\tcolor: #ffffff;\n\tbox-shadow: 0 8rpx 20rpx rgba(0, 160, 255, 0.3);\n}\n</style>\n","import mod from \"-!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./add.vue?vue&type=style&index=0&id=cfbffdd0&lang=scss&scoped=true&\"; export default mod; export * from \"-!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\googleä¸‹è½½èµ„æ–™\\\\HBuilderX.4.84.2025110307\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./add.vue?vue&type=style&index=0&id=cfbffdd0&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1766576738281\n      var cssReload = require(\"F:/googleä¸‹è½½èµ„æ–™/HBuilderX.4.84.2025110307/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}