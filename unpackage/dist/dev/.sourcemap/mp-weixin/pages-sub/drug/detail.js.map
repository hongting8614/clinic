{"version":3,"sources":["uni-app:///main.js",null,"webpack:///D:/AK-PMS/pages-sub/drug/detail.vue?8db3","webpack:///D:/AK-PMS/pages-sub/drug/detail.vue?de2b","webpack:///D:/AK-PMS/pages-sub/drug/detail.vue?5745","uni-app:///pages-sub/drug/detail.vue","webpack:///D:/AK-PMS/pages-sub/drug/detail.vue?2872","webpack:///D:/AK-PMS/pages-sub/drug/detail.vue?a3ac"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","drugId","isEditMode","drugData","name","specification","unit","manufacturer","barcode","approvalNumber","category","safeStock","minStock","isHighValue","isEmergency","createTime","updateTime","originalData","unitOptions","unitIndex","categoryOptions","categoryIndex","computed","completeness","image","key","label","missingFields","percentage","filledCount","totalCount","isComplete","onLoad","methods","loadDrugDetail","uni","title","console","db","doc","get","result","barcodeValue","unitIdx","catIdx","icon","toggleEditMode","cancelEdit","content","success","saveDrug","updateData","drugName","spec","packUnit","barCode","action","_id","duration","setTimeout","errorMsg","showCancel","deleteDrug","confirmText","confirmColor","res","onUnitChange","onCategoryChange","formatDate"],"mappings":"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","file":"pages-sub/drug/detail.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages-sub/drug/detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./detail.vue?vue&type=template&id=56ab9baa&scoped=true&\"\nvar renderjs\nimport script from \"./detail.vue?vue&type=script&lang=js&\"\nexport * from \"./detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detail.vue?vue&type=style&index=0&id=56ab9baa&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"56ab9baa\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages-sub/drug/detail.vue\"\nexport default component.exports","export * from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=template&id=56ab9baa&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.completeness.missingFields.length\n  var g1 = g0 > 0 ? _vm.completeness.missingFields.join(\"ã€\") : null\n  var m0 = _vm.formatDate(_vm.drugData.createTime)\n  var m1 = _vm.drugData.updateTime\n    ? _vm.formatDate(_vm.drugData.updateTime)\n    : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.drugData.isHighValue = $event.detail.value\n    }\n    _vm.e1 = function ($event) {\n      _vm.drugData.isEmergency = $event.detail.value\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        m0: m0,\n        m1: m1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"page-container\">\n\t\t<!-- é¡µé¢å¤´éƒ¨ -->\n\t\t<view class=\"page-header\">\n\t\t\t<view class=\"header-title\">è¯å“æ¡£æ¡ˆè¯¦æƒ…</view>\n\t\t\t<view class=\"header-actions\">\n\t\t\t\t<view class=\"action-btn edit-btn\" @tap=\"toggleEditMode\" v-if=\"!isEditMode\">\n\t\t\t\t\t<text class=\"btn-icon\">âœï¸</text>\n\t\t\t\t\t<text class=\"btn-text\">ç¼–è¾‘</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"action-btn save-btn\" @tap=\"saveDrug\" v-if=\"isEditMode\">\n\t\t\t\t\t<text class=\"btn-icon\">ğŸ’¾</text>\n\t\t\t\t\t<text class=\"btn-text\">ä¿å­˜</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"action-btn cancel-btn\" @tap=\"cancelEdit\" v-if=\"isEditMode\">\n\t\t\t\t\t<text class=\"btn-text\">å–æ¶ˆ</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- æ¡£æ¡ˆå®Œæ•´åº¦å¡ç‰‡ -->\n\t\t<view class=\"completeness-card\">\n\t\t\t<view class=\"completeness-header\">\n\t\t\t\t<text class=\"card-title\">æ¡£æ¡ˆå®Œæ•´åº¦</text>\n\t\t\t\t<view \n\t\t\t\t\tclass=\"completeness-badge\"\n\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t'complete': completeness.percentage === 100,\n\t\t\t\t\t\t'good': completeness.percentage >= 75 && completeness.percentage < 100,\n\t\t\t\t\t\t'medium': completeness.percentage >= 50 && completeness.percentage < 75,\n\t\t\t\t\t\t'low': completeness.percentage < 50\n\t\t\t\t\t}\"\n\t\t\t\t>\n\t\t\t\t\t<text>{{ completeness.percentage }}%</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"completeness-progress\">\n\t\t\t\t<view class=\"progress-bar\">\n\t\t\t\t\t<view \n\t\t\t\t\t\tclass=\"progress-fill\"\n\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t'complete': completeness.percentage === 100,\n\t\t\t\t\t\t\t'good': completeness.percentage >= 75 && completeness.percentage < 100,\n\t\t\t\t\t\t\t'medium': completeness.percentage >= 50 && completeness.percentage < 75,\n\t\t\t\t\t\t\t'low': completeness.percentage < 50\n\t\t\t\t\t\t}\"\n\t\t\t\t\t\t:style=\"{ width: completeness.percentage + '%' }\"\n\t\t\t\t\t></view>\n\t\t\t\t</view>\n\t\t\t\t<text class=\"progress-text\">{{ completeness.filledCount }}/{{ completeness.totalCount }} é¡¹å·²å¡«å†™</text>\n\t\t\t</view>\n\t\t\t<view v-if=\"completeness.missingFields.length > 0\" class=\"missing-fields\">\n\t\t\t\t<text class=\"missing-label\">ç¼ºå°‘ï¼š</text>\n\t\t\t\t<text class=\"missing-text\">{{ completeness.missingFields.join('ã€') }}</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- åŸºæœ¬ä¿¡æ¯ -->\n\t\t<view class=\"info-section\">\n\t\t\t<view class=\"section-title\">ğŸ“‹ åŸºæœ¬ä¿¡æ¯</view>\n\t\t\t\n\t\t\t<view class=\"info-item\">\n\t\t\t\t<text class=\"item-label\">è¯å“åç§° <text class=\"required\">*</text></text>\n\t\t\t\t<input \n\t\t\t\t\tv-if=\"isEditMode\"\n\t\t\t\t\tclass=\"item-input\"\n\t\t\t\t\tv-model=\"drugData.name\"\n\t\t\t\t\tplaceholder=\"è¯·è¾“å…¥è¯å“åç§°\"\n\t\t\t\t/>\n\t\t\t\t<text v-else class=\"item-value\">{{ drugData.name || '-' }}</text>\n\t\t\t</view>\n\n\t\t\t<view class=\"info-item\">\n\t\t\t\t<text class=\"item-label\">è§„æ ¼ <text class=\"required\">*</text></text>\n\t\t\t\t<input \n\t\t\t\t\tv-if=\"isEditMode\"\n\t\t\t\t\tclass=\"item-input\"\n\t\t\t\t\tv-model=\"drugData.specification\"\n\t\t\t\t\tplaceholder=\"å¦‚ï¼š0.25gÃ—24ç²’/ç›’\"\n\t\t\t\t/>\n\t\t\t\t<text v-else class=\"item-value\">{{ drugData.specification || '-' }}</text>\n\t\t\t</view>\n\n\t\t\t<view class=\"info-item\">\n\t\t\t\t<text class=\"item-label\">å•ä½ <text class=\"required\">*</text></text>\n\t\t\t\t<picker \n\t\t\t\t\tv-if=\"isEditMode\"\n\t\t\t\t\tmode=\"selector\"\n\t\t\t\t\t:range=\"unitOptions\"\n\t\t\t\t\t:value=\"unitIndex\"\n\t\t\t\t\t@change=\"onUnitChange\"\n\t\t\t\t>\n\t\t\t\t\t<view class=\"picker-input\">\n\t\t\t\t\t\t<text>{{ drugData.unit || 'è¯·é€‰æ‹©å•ä½' }}</text>\n\t\t\t\t\t\t<text class=\"picker-arrow\">â–¼</text>\n\t\t\t\t\t</view>\n\t\t\t\t</picker>\n\t\t\t\t<text v-else class=\"item-value\">{{ drugData.unit || '-' }}</text>\n\t\t\t</view>\n\n\t\t\t<view class=\"info-item\">\n\t\t\t\t<text class=\"item-label\">ç”Ÿäº§å‚å®¶ <text class=\"required\">*</text></text>\n\t\t\t\t<input \n\t\t\t\t\tv-if=\"isEditMode\"\n\t\t\t\t\tclass=\"item-input\"\n\t\t\t\t\tv-model=\"drugData.manufacturer\"\n\t\t\t\t\tplaceholder=\"è¯·è¾“å…¥ç”Ÿäº§å‚å®¶\"\n\t\t\t\t/>\n\t\t\t\t<text v-else class=\"item-value\">{{ drugData.manufacturer || '-' }}</text>\n\t\t\t</view>\n\n\t\t\t<view class=\"info-item\">\n\t\t\t\t<text class=\"item-label\">æ¡å½¢ç </text>\n\t\t\t\t<input \n\t\t\t\t\tv-if=\"isEditMode\"\n\t\t\t\t\tclass=\"item-input\"\n\t\t\t\t\tv-model=\"drugData.barcode\"\n\t\t\t\t\tplaceholder=\"è¯·è¾“å…¥æ¡å½¢ç \"\n\t\t\t\t/>\n\t\t\t\t<text v-else class=\"item-value\">{{ drugData.barcode || '-' }}</text>\n\t\t\t</view>\n\n\t\t\t<view class=\"info-item\">\n\t\t\t\t<text class=\"item-label\">æ‰¹å‡†æ–‡å·</text>\n\t\t\t\t<input \n\t\t\t\t\tv-if=\"isEditMode\"\n\t\t\t\t\tclass=\"item-input\"\n\t\t\t\t\tv-model=\"drugData.approvalNumber\"\n\t\t\t\t\tplaceholder=\"è¯·è¾“å…¥æ‰¹å‡†æ–‡å·\"\n\t\t\t\t/>\n\t\t\t\t<text v-else class=\"item-value\">{{ drugData.approvalNumber || '-' }}</text>\n\t\t\t</view>\n\n\t\t\t<view class=\"info-item\">\n\t\t\t\t<text class=\"item-label\">åˆ†ç±»</text>\n\t\t\t\t<picker \n\t\t\t\t\tv-if=\"isEditMode\"\n\t\t\t\t\tmode=\"selector\"\n\t\t\t\t\t:range=\"categoryOptions\"\n\t\t\t\t\t:value=\"categoryIndex\"\n\t\t\t\t\t@change=\"onCategoryChange\"\n\t\t\t\t>\n\t\t\t\t\t<view class=\"picker-input\">\n\t\t\t\t\t\t<text>{{ drugData.category || 'è¯·é€‰æ‹©åˆ†ç±»' }}</text>\n\t\t\t\t\t\t<text class=\"picker-arrow\">â–¼</text>\n\t\t\t\t\t</view>\n\t\t\t\t</picker>\n\t\t\t\t<text v-else class=\"item-value\">{{ drugData.category || '-' }}</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- åº“å­˜ç®¡ç† -->\n\t\t<view class=\"info-section\">\n\t\t\t<view class=\"section-title\">ğŸ“Š åº“å­˜ç®¡ç†</view>\n\t\t\t\n\t\t\t<view class=\"info-item\">\n\t\t\t\t<text class=\"item-label\">å®‰å…¨åº“å­˜</text>\n\t\t\t\t<input \n\t\t\t\t\tv-if=\"isEditMode\"\n\t\t\t\t\tclass=\"item-input\"\n\t\t\t\t\ttype=\"number\"\n\t\t\t\t\tv-model=\"drugData.safeStock\"\n\t\t\t\t\tplaceholder=\"è¯·è¾“å…¥å®‰å…¨åº“å­˜\"\n\t\t\t\t/>\n\t\t\t\t<text v-else class=\"item-value\">{{ drugData.safeStock || '-' }}</text>\n\t\t\t</view>\n\n\t\t\t<view class=\"info-item\">\n\t\t\t\t<text class=\"item-label\">æœ€ä½åº“å­˜</text>\n\t\t\t\t<input \n\t\t\t\t\tv-if=\"isEditMode\"\n\t\t\t\t\tclass=\"item-input\"\n\t\t\t\t\ttype=\"number\"\n\t\t\t\t\tv-model=\"drugData.minStock\"\n\t\t\t\t\tplaceholder=\"è¯·è¾“å…¥æœ€ä½åº“å­˜\"\n\t\t\t\t/>\n\t\t\t\t<text v-else class=\"item-value\">{{ drugData.minStock || '-' }}</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- ç‰¹æ®Šæ ‡è®° -->\n\t\t<view class=\"info-section\">\n\t\t\t<view class=\"section-title\">ğŸ·ï¸ ç‰¹æ®Šæ ‡è®°</view>\n\t\t\t\n\t\t\t<view class=\"switch-item\">\n\t\t\t\t<view class=\"switch-label\">\n\t\t\t\t\t<text class=\"label-text\">é«˜å€¼è¯å“</text>\n\t\t\t\t\t<text class=\"label-desc\">æ ‡è®°ä¸ºé«˜å€¼è¯å“ï¼Œéœ€ç‰¹æ®Šç®¡ç†</text>\n\t\t\t\t</view>\n\t\t\t\t<switch \n\t\t\t\t\t:checked=\"drugData.isHighValue\" \n\t\t\t\t\t:disabled=\"!isEditMode\"\n\t\t\t\t\t@change=\"drugData.isHighValue = $event.detail.value\"\n\t\t\t\t\tcolor=\"#FF9800\"\n\t\t\t\t/>\n\t\t\t</view>\n\n\t\t\t<view class=\"switch-item\">\n\t\t\t\t<view class=\"switch-label\">\n\t\t\t\t\t<text class=\"label-text\">æ€¥æ•‘è¯å“</text>\n\t\t\t\t\t<text class=\"label-desc\">æ ‡è®°ä¸ºæ€¥æ•‘è¯å“ï¼Œä¼˜å…ˆç®¡ç†</text>\n\t\t\t\t</view>\n\t\t\t\t<switch \n\t\t\t\t\t:checked=\"drugData.isEmergency\" \n\t\t\t\t\t:disabled=\"!isEditMode\"\n\t\t\t\t\t@change=\"drugData.isEmergency = $event.detail.value\"\n\t\t\t\t\tcolor=\"#F44336\"\n\t\t\t\t/>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- å…¶ä»–ä¿¡æ¯ -->\n\t\t<view class=\"info-section\">\n\t\t\t<view class=\"section-title\">â„¹ï¸ å…¶ä»–ä¿¡æ¯</view>\n\t\t\t\n\t\t\t<view class=\"info-item\">\n\t\t\t\t<text class=\"item-label\">åˆ›å»ºæ—¶é—´</text>\n\t\t\t\t<text class=\"item-value\">{{ formatDate(drugData.createTime) }}</text>\n\t\t\t</view>\n\n\t\t\t<view class=\"info-item\" v-if=\"drugData.updateTime\">\n\t\t\t\t<text class=\"item-label\">æ›´æ–°æ—¶é—´</text>\n\t\t\t\t<text class=\"item-value\">{{ formatDate(drugData.updateTime) }}</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- åº•éƒ¨æ“ä½œæŒ‰é’®ï¼ˆéç¼–è¾‘æ¨¡å¼ï¼‰ -->\n\t\t<view v-if=\"!isEditMode\" class=\"bottom-actions\">\n\t\t\t<view class=\"action-btn-large delete-btn\" @tap=\"deleteDrug\">\n\t\t\t\t<text>åˆ é™¤æ¡£æ¡ˆ</text>\n\t\t\t</view>\n\t\t\t<view class=\"action-btn-large primary-btn\" @tap=\"toggleEditMode\">\n\t\t\t\t<text>ç¼–è¾‘æ¡£æ¡ˆ</text>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tdrugId: '',\n\t\t\tisEditMode: false,\n\t\t\tdrugData: {\n\t\t\t\tname: '',\n\t\t\t\tspecification: '',\n\t\t\t\tunit: '',\n\t\t\t\tmanufacturer: '',\n\t\t\t\tbarcode: '',\n\t\t\t\tapprovalNumber: '',\n\t\t\t\tcategory: '',\n\t\t\t\tsafeStock: 50,\n\t\t\t\tminStock: 20,\n\t\t\t\tisHighValue: false,\n\t\t\t\tisEmergency: false,\n\t\t\t\tcreateTime: null,\n\t\t\t\tupdateTime: null\n\t\t\t},\n\t\t\toriginalData: {}, // ä¿å­˜åŸå§‹æ•°æ®ï¼Œç”¨äºå–æ¶ˆç¼–è¾‘\n\t\t\tunitOptions: ['ç›’', 'ç“¶', 'è¢‹', 'æ”¯', 'æ¿', 'ç‰‡', 'ç²’', 'ä¸¸', 'g', 'kg', 'ml', 'L'],\n\t\t\tunitIndex: 0,\n\t\t\tcategoryOptions: [\n\t\t\t\t'æŠ—ç”Ÿç´ ç±»',\n\t\t\t\t'å¿ƒè¡€ç®¡ç±»',\n\t\t\t\t'æ¶ˆåŒ–ç³»ç»Ÿç±»',\n\t\t\t\t'å‘¼å¸ç³»ç»Ÿç±»',\n\t\t\t\t'è§£çƒ­é•‡ç—›ç±»',\n\t\t\t\t'ç»´ç”Ÿç´ ç±»',\n\t\t\t\t'å¤–ç”¨è¯ç±»',\n\t\t\t\t'æ€¥æ•‘è¯å“',\n\t\t\t\t'å…¶ä»–'\n\t\t\t],\n\t\t\tcategoryIndex: -1\n\t\t}\n\t},\n\n\tcomputed: {\n\t\tcompleteness() {\n\t\t\tconst fields = [\n\t\t\t\tthis.drugData.name,\n\t\t\t\tthis.drugData.specification,\n\t\t\t\tthis.drugData.unit,\n\t\t\t\tthis.drugData.manufacturer,\n\t\t\t\tthis.drugData.barcode,\n\t\t\t\tthis.drugData.approvalNumber,\n\t\t\t\tthis.drugData.category,\n\t\t\t\tthis.drugData.image\n\t\t\t]\n\t\t\t\n\t\t\tconst filledCount = fields.filter(field => field && String(field).trim()).length\n\t\t\tconst percentage = Math.round((filledCount / fields.length) * 100)\n\t\t\t\n\t\t\tconst fieldMap = {\n\t\t\t\tname: 'åç§°',\n\t\t\t\tspecification: 'è§„æ ¼',\n\t\t\t\tunit: 'å•ä½',\n\t\t\t\tmanufacturer: 'ç”Ÿäº§å‚å®¶',\n\t\t\t\tbarcode: 'æ¡å½¢ç ',\n\t\t\t\tapprovalNumber: 'æ‰¹å‡†æ–‡å·',\n\t\t\t\tcategory: 'åˆ†ç±»',\n\t\t\t\timage: 'å›¾ç‰‡'\n\t\t\t}\n\t\t\t\n\t\t\tconst missingFields = []\n\t\t\tfor (const [key, label] of Object.entries(fieldMap)) {\n\t\t\t\tconst value = this.drugData[key]\n\t\t\t\tif (!value || !String(value).trim()) {\n\t\t\t\t\tmissingFields.push(label)\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn {\n\t\t\t\tpercentage,\n\t\t\t\tfilledCount,\n\t\t\t\ttotalCount: fields.length,\n\t\t\t\tisComplete: percentage === 100,\n\t\t\t\tmissingFields\n\t\t\t}\n\t\t}\n\t},\n\n\tonLoad(options) {\n\t\tif (options.id) {\n\t\t\tthis.drugId = options.id\n\t\t\tthis.loadDrugDetail()\n\t\t}\n\t\t\n\t\t// å¦‚æœä»å…¥åº“é¡µé¢è·³è½¬è¿‡æ¥ï¼Œè‡ªåŠ¨è¿›å…¥ç¼–è¾‘æ¨¡å¼\n\t\tif (options.from === 'inbound') {\n\t\t\tthis.isEditMode = true\n\t\t}\n\t},\n\n\tmethods: {\n\t\tasync loadDrugDetail() {\n\t\t\tuni.showLoading({ title: 'åŠ è½½ä¸­...' })\n\t\t\t\n\t\t\ttry {\n\t\t\t\tconsole.log('ğŸ“– åŠ è½½è¯å“è¯¦æƒ…ï¼ŒID:', this.drugId)\n\t\t\t\t\n\t\t\t\tconst db = wx.cloud.database()\n\t\t\t\tconst result = await db.collection('drugs')\n\t\t\t\t\t.doc(this.drugId)\n\t\t\t\t\t.get()\n\t\t\t\t\n\t\t\t\tconsole.log('ğŸ“– æ•°æ®åº“è¿”å›:', result.data)\n\t\t\t\t\n\t\t\t\tif (result.data) {\n\t\t\t\t\t// â­ å…¼å®¹ barcode å’Œ barCode ä¸¤ç§å­—æ®µå\n\t\t\t\t\tconst barcodeValue = result.data.barcode || result.data.barCode || ''\n\t\t\t\t\t\n\t\t\t\t\tthis.drugData = {\n\t\t\t\t\t\tname: result.data.name || result.data.drugName || '',\n\t\t\t\t\t\tspecification: result.data.specification || result.data.spec || '',\n\t\t\t\t\t\tunit: result.data.unit || result.data.packUnit || '',\n\t\t\t\t\t\tmanufacturer: result.data.manufacturer || '',\n\t\t\t\t\t\tbarcode: barcodeValue, // ç»Ÿä¸€ä½¿ç”¨å°å†™å­—æ®µ\n\t\t\t\t\t\tapprovalNumber: result.data.approvalNumber || '',\n\t\t\t\t\t\tcategory: result.data.category || '',\n\t\t\t\t\t\tsafeStock: result.data.safeStock || 50,\n\t\t\t\t\t\tminStock: result.data.minStock || 20,\n\t\t\t\t\t\tisHighValue: result.data.isHighValue || false,\n\t\t\t\t\t\tisEmergency: result.data.isEmergency || false,\n\t\t\t\t\t\tcreateTime: result.data.createTime,\n\t\t\t\t\t\tupdateTime: result.data.updateTime,\n\t\t\t\t\t\timage: result.data.image || ''\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tconsole.log('ğŸ“– è§£æåçš„æ•°æ®:', this.drugData)\n\t\t\t\t\t\n\t\t\t\t\t// è®¾ç½®å•ä½ç´¢å¼•\n\t\t\t\t\tconst unitIdx = this.unitOptions.indexOf(this.drugData.unit)\n\t\t\t\t\tthis.unitIndex = unitIdx >= 0 ? unitIdx : 0\n\t\t\t\t\t\n\t\t\t\t\t// è®¾ç½®åˆ†ç±»ç´¢å¼•\n\t\t\t\t\tconst catIdx = this.categoryOptions.indexOf(this.drugData.category)\n\t\t\t\t\tthis.categoryIndex = catIdx >= 0 ? catIdx : -1\n\t\t\t\t\t\n\t\t\t\t\t// ä¿å­˜åŸå§‹æ•°æ®\n\t\t\t\t\tthis.originalData = JSON.parse(JSON.stringify(this.drugData))\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error('âŒ åŠ è½½è¯å“è¯¦æƒ…å¤±è´¥:', err)\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'åŠ è½½å¤±è´¥',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t} finally {\n\t\t\t\tuni.hideLoading()\n\t\t\t}\n\t\t},\n\n\t\ttoggleEditMode() {\n\t\t\tthis.isEditMode = !this.isEditMode\n\t\t\tif (this.isEditMode) {\n\t\t\t\t// è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œä¿å­˜å½“å‰æ•°æ®\n\t\t\t\tthis.originalData = JSON.parse(JSON.stringify(this.drugData))\n\t\t\t}\n\t\t},\n\n\t\tcancelEdit() {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: 'ç¡®è®¤å–æ¶ˆ',\n\t\t\t\tcontent: 'å–æ¶ˆåå°†ä¸¢å¤±æœªä¿å­˜çš„ä¿®æ”¹ï¼Œç¡®å®šè¦å–æ¶ˆå—ï¼Ÿ',\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t// æ¢å¤åŸå§‹æ•°æ®\n\t\t\t\t\t\tthis.drugData = JSON.parse(JSON.stringify(this.originalData))\n\t\t\t\t\t\tthis.isEditMode = false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\tasync saveDrug() {\n\t\t\t// éªŒè¯å¿…å¡«é¡¹\n\t\t\tif (!this.drugData.name || !this.drugData.specification || !this.drugData.unit || !this.drugData.manufacturer) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'è¯·å¡«å†™å¿…å¡«é¡¹',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tuni.showLoading({ title: 'ä¿å­˜ä¸­...' })\n\n\t\t\ttry {\n\t\t\t\tconsole.log('ğŸ’¾ å¼€å§‹ä¿å­˜è¯å“æ¡£æ¡ˆ...')\n\t\t\t\tconsole.log('è¯å“ID:', this.drugId)\n\t\t\t\tconsole.log('ä¿å­˜æ•°æ®:', this.drugData)\n\t\t\t\t\n\t\t\t\tconst updateData = {\n\t\t\t\t\tname: this.drugData.name,\n\t\t\t\t\tdrugName: this.drugData.name, // å…¼å®¹å­—æ®µ\n\t\t\t\t\tspecification: this.drugData.specification,\n\t\t\t\t\tspec: this.drugData.specification, // å…¼å®¹å­—æ®µ\n\t\t\t\t\tunit: this.drugData.unit,\n\t\t\t\t\tpackUnit: this.drugData.unit, // å…¼å®¹å­—æ®µ\n\t\t\t\t\tmanufacturer: this.drugData.manufacturer,\n\t\t\t\t\tbarcode: this.drugData.barcode, // å°å†™å­—æ®µ\n\t\t\t\t\tbarCode: this.drugData.barcode, // é©¼å³°å­—æ®µï¼ˆå…¼å®¹ï¼‰\n\t\t\t\t\tapprovalNumber: this.drugData.approvalNumber,\n\t\t\t\t\tcategory: this.drugData.category,\n\t\t\t\t\tsafeStock: Number(this.drugData.safeStock) || 50,\n\t\t\t\t\tminStock: Number(this.drugData.minStock) || 20,\n\t\t\t\t\tisHighValue: this.drugData.isHighValue,\n\t\t\t\t\tisEmergency: this.drugData.isEmergency\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconsole.log('æ›´æ–°æ•°æ®:', updateData)\n\t\t\t\t\n\t\t\t\t// â­ ä½¿ç”¨äº‘å‡½æ•°ä¿å­˜ï¼ˆç»•è¿‡æƒé™é™åˆ¶ï¼‰\n\t\t\t\tconst result = await wx.cloud.callFunction({\n\t\t\t\t\tname: 'drugManage',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\taction: 'update',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t_id: this.drugId,\n\t\t\t\t\t\t\tupdateData: updateData\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tconsole.log('âœ… äº‘å‡½æ•°è¿”å›ç»“æœ:', result)\n\t\t\t\t\n\t\t\t\tif (result.result && result.result.success) {\n\t\t\t\t\tconsole.log('âœ… ä¿å­˜æˆåŠŸ')\n\t\t\t\t\t\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: 'ä¿å­˜æˆåŠŸ',\n\t\t\t\t\t\ticon: 'success',\n\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t})\n\n\t\t\t\t\tthis.isEditMode = false\n\t\t\t\t\t\n\t\t\t\t\t// é‡æ–°åŠ è½½æ•°æ®ä»¥ç¡®è®¤ä¿å­˜æˆåŠŸ\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.loadDrugDetail()\n\t\t\t\t\t}, 1500)\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(result.result?.message || 'ä¿å­˜å¤±è´¥')\n\t\t\t\t}\n\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error('âŒ ä¿å­˜å¤±è´¥:', err)\n\t\t\t\tconsole.error('é”™è¯¯è¯¦æƒ…:', err.errMsg || err.message)\n\t\t\t\t\n\t\t\t\tlet errorMsg = 'ä¿å­˜å¤±è´¥'\n\t\t\t\tif (err.errMsg) {\n\t\t\t\t\tif (err.errMsg.includes('cloud function not found')) {\n\t\t\t\t\t\terrorMsg = 'äº‘å‡½æ•°æœªéƒ¨ç½²\\n\\nè¯·å…ˆéƒ¨ç½² drugManage äº‘å‡½æ•°ï¼š\\n1. å³é”®ç‚¹å‡»äº‘å‡½æ•°æ–‡ä»¶å¤¹\\n2. é€‰æ‹©\"ä¸Šä¼ å¹¶éƒ¨ç½²\"\\n3. ç­‰å¾…éƒ¨ç½²å®Œæˆ'\n\t\t\t\t\t} else if (err.errMsg.includes('permission')) {\n\t\t\t\t\t\terrorMsg = 'æƒé™ä¸è¶³ï¼Œæ— æ³•ä¿å­˜'\n\t\t\t\t\t} else if (err.errMsg.includes('timeout')) {\n\t\t\t\t\t\terrorMsg = 'ç½‘ç»œè¶…æ—¶ï¼Œè¯·é‡è¯•'\n\t\t\t\t\t} else {\n\t\t\t\t\t\terrorMsg = err.errMsg\n\t\t\t\t\t}\n\t\t\t\t} else if (err.message) {\n\t\t\t\t\terrorMsg = err.message\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: 'ä¿å­˜å¤±è´¥',\n\t\t\t\t\tcontent: errorMsg,\n\t\t\t\t\tshowCancel: false\n\t\t\t\t})\n\t\t\t} finally {\n\t\t\t\tuni.hideLoading()\n\t\t\t}\n\t\t},\n\n\t\tdeleteDrug() {\n\t\t\t// æ£€æŸ¥æ˜¯å¦æœ‰drugId\n\t\t\tif (!this.drugId) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'è¯å“IDä¸å­˜åœ¨ï¼Œæ— æ³•åˆ é™¤',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\n\t\t\tuni.showModal({\n\t\t\t\ttitle: 'ç¡®è®¤åˆ é™¤',\n\t\t\t\tcontent: 'åˆ é™¤åå°†æ— æ³•æ¢å¤ï¼Œç¡®å®šè¦åˆ é™¤è¿™ä¸ªè¯å“æ¡£æ¡ˆå—ï¼Ÿ',\n\t\t\t\tconfirmText: 'ç¡®è®¤åˆ é™¤',\n\t\t\t\tconfirmColor: '#ee0a24',\n\t\t\t\tsuccess: async (res) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tuni.showLoading({ title: 'åˆ é™¤ä¸­...' })\n\t\t\t\t\t\t\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t// ä½¿ç”¨äº‘å‡½æ•°åˆ é™¤ï¼ˆç»•è¿‡æƒé™é™åˆ¶ï¼‰\n\t\t\t\t\t\t\tconst result = await wx.cloud.callFunction({\n\t\t\t\t\t\t\t\tname: 'drugManage',\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\taction: 'delete',\n\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t_id: this.drugId\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tconsole.log('åˆ é™¤ç»“æœ:', result)\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (result.result && result.result.success) {\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: 'åˆ é™¤æˆåŠŸ',\n\t\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\tuni.navigateBack()\n\t\t\t\t\t\t\t\t}, 1500)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\ttitle: 'åˆ é™¤å¤±è´¥',\n\t\t\t\t\t\t\t\t\tcontent: result.result?.message || 'åˆ é™¤å¤±è´¥ï¼Œè¯·é‡è¯•',\n\t\t\t\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\tconsole.error('åˆ é™¤å¤±è´¥:', err)\n\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// æ˜¾ç¤ºè¯¦ç»†é”™è¯¯ä¿¡æ¯\n\t\t\t\t\t\t\tlet errorMsg = 'åˆ é™¤å¤±è´¥'\n\t\t\t\t\t\t\tif (err.errMsg) {\n\t\t\t\t\t\t\t\terrorMsg = err.errMsg\n\t\t\t\t\t\t\t} else if (err.message) {\n\t\t\t\t\t\t\t\terrorMsg = err.message\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\ttitle: 'åˆ é™¤å¤±è´¥',\n\t\t\t\t\t\t\t\tcontent: errorMsg + '\\n\\nå¯èƒ½åŸå› ï¼š\\n1. äº‘å‡½æ•°æœªéƒ¨ç½²\\n2. è¯¥è¯å“å·²è¢«ä½¿ç”¨\\n3. ç½‘ç»œè¿æ¥é—®é¢˜',\n\t\t\t\t\t\t\t\tshowCancel: false\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\tonUnitChange(e) {\n\t\t\tthis.unitIndex = e.detail.value\n\t\t\tthis.drugData.unit = this.unitOptions[e.detail.value]\n\t\t},\n\n\t\tonCategoryChange(e) {\n\t\t\tthis.categoryIndex = e.detail.value\n\t\t\tthis.drugData.category = this.categoryOptions[e.detail.value]\n\t\t},\n\n\t\tformatDate(date) {\n\t\t\tif (!date) return '-'\n\t\t\t\n\t\t\tconst d = date instanceof Date ? date : new Date(date)\n\t\t\tconst year = d.getFullYear()\n\t\t\tconst month = String(d.getMonth() + 1).padStart(2, '0')\n\t\t\tconst day = String(d.getDate()).padStart(2, '0')\n\t\t\tconst hour = String(d.getHours()).padStart(2, '0')\n\t\t\tconst minute = String(d.getMinutes()).padStart(2, '0')\n\t\t\t\n\t\t\treturn `${year}-${month}-${day} ${hour}:${minute}`\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.page-container {\n\tmin-height: 100vh;\n\tbackground: linear-gradient(180deg, #00c9ff 0%, #00a0ff 35%, #e5e7eb 100%);\n\tpadding: 24rpx 24rpx 150rpx;\n}\n\n.page-header {\n\tmax-width: 702rpx;\n\tmargin: 10rpx auto 8rpx;\n\tpadding: 26rpx 26rpx 20rpx;\n\tbackground: #FFFFF0;\n\tborder-radius: 22rpx;\n\tbox-shadow: 0 8rpx 20rpx rgba(15, 23, 42, 0.12);\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\t\n\t.header-title {\n\t\tfont-size: 36rpx;\n\t\tfont-weight: bold;\n\t\tcolor: #111827;\n\t}\n\t\n\t.header-actions {\n\t\tdisplay: flex;\n\t\tgap: 12rpx;\n\t}\n\t\n\t.action-btn {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 6rpx;\n\t\tpadding: 12rpx 20rpx;\n\t\tborder-radius: 20rpx;\n\t\tfont-size: 24rpx;\n\t\ttransition: all 0.3s;\n\t\t\n\t\t&:active {\n\t\t\ttransform: scale(0.95);\n\t\t}\n\t\t\n\t\t&.edit-btn {\n\t\t\tbackground: linear-gradient(135deg, #00c9ff 0%, #00a0ff 100%);\n\t\t\tcolor: white;\n\t\t}\n\t\t\n\t\t&.save-btn {\n\t\t\tbackground: linear-gradient(135deg, #07C160 0%, #05a550 100%);\n\t\t\tcolor: white;\n\t\t}\n\t\t\n\t\t&.cancel-btn {\n\t\t\tbackground: #f7f8fa;\n\t\t\tcolor: #646566;\n\t\t}\n\t\t\n\t\t.btn-icon {\n\t\t\tfont-size: 28rpx;\n\t\t}\n\t}\n}\n\n.completeness-card {\n\tmax-width: 702rpx;\n\tmargin: 0 auto 8rpx;\n\tpadding: 26rpx;\n\tbackground: #FFFFF0;\n\tborder-radius: 22rpx;\n\tbox-shadow: 0 8rpx 20rpx rgba(15, 23, 42, 0.12);\n\t\n\t.completeness-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-bottom: 20rpx;\n\t\t\n\t\t.card-title {\n\t\t\tfont-size: 30rpx;\n\t\t\tfont-weight: bold;\n\t\t\tcolor: #111827;\n\t\t}\n\t\t\n\t\t.completeness-badge {\n\t\t\tpadding: 8rpx 20rpx;\n\t\t\tborder-radius: 20rpx;\n\t\t\tfont-size: 24rpx;\n\t\t\tfont-weight: 600;\n\t\t\t\n\t\t\t&.complete {\n\t\t\t\tbackground: linear-gradient(135deg, #10b981 0%, #059669 100%);\n\t\t\t\tcolor: white;\n\t\t\t}\n\t\t\t\n\t\t\t&.good {\n\t\t\t\tbackground: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\n\t\t\t\tcolor: white;\n\t\t\t}\n\t\t\t\n\t\t\t&.medium {\n\t\t\t\tbackground: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);\n\t\t\t\tcolor: white;\n\t\t\t}\n\t\t\t\n\t\t\t&.low {\n\t\t\t\tbackground: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);\n\t\t\t\tcolor: white;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t.completeness-progress {\n\t\tmargin-bottom: 16rpx;\n\t\t\n\t\t.progress-bar {\n\t\t\theight: 12rpx;\n\t\t\tbackground: #e5e7eb;\n\t\t\tborder-radius: 6rpx;\n\t\t\toverflow: hidden;\n\t\t\tmargin-bottom: 12rpx;\n\t\t\t\n\t\t\t.progress-fill {\n\t\t\t\theight: 100%;\n\t\t\t\tborder-radius: 6rpx;\n\t\t\t\ttransition: width 0.3s;\n\t\t\t\t\n\t\t\t\t&.complete {\n\t\t\t\t\tbackground: linear-gradient(90deg, #10b981 0%, #059669 100%);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t&.good {\n\t\t\t\t\tbackground: linear-gradient(90deg, #3b82f6 0%, #2563eb 100%);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t&.medium {\n\t\t\t\t\tbackground: linear-gradient(90deg, #f59e0b 0%, #d97706 100%);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t&.low {\n\t\t\t\t\tbackground: linear-gradient(90deg, #ef4444 0%, #dc2626 100%);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\t.progress-text {\n\t\t\tfont-size: 24rpx;\n\t\t\tcolor: #6b7280;\n\t\t}\n\t}\n\t\n\t.missing-fields {\n\t\tpadding: 16rpx;\n\t\tbackground: #fff7ed;\n\t\tborder-radius: 12rpx;\n\t\tborder-left: 4rpx solid #f59e0b;\n\t\t\n\t\t.missing-label {\n\t\t\tfont-size: 24rpx;\n\t\t\tcolor: #92400e;\n\t\t\tfont-weight: 500;\n\t\t}\n\t\t\n\t\t.missing-text {\n\t\t\tfont-size: 24rpx;\n\t\t\tcolor: #d97706;\n\t\t}\n\t}\n}\n\n.info-section {\n\tmax-width: 702rpx;\n\tmargin: 0 auto 8rpx;\n\tpadding: 26rpx;\n\tbackground: #FFFFF0;\n\tborder-radius: 22rpx;\n\tbox-shadow: 0 8rpx 20rpx rgba(15, 23, 42, 0.12);\n\t\n\t.section-title {\n\t\tfont-size: 30rpx;\n\t\tfont-weight: bold;\n\t\tcolor: #111827;\n\t\tmargin-bottom: 24rpx;\n\t\tpadding-bottom: 16rpx;\n\t\tborder-bottom: 2rpx solid #e5e7eb;\n\t}\n\t\n\t.info-item {\n\t\tmargin-bottom: 24rpx;\n\t\t\n\t\t&:last-child {\n\t\t\tmargin-bottom: 0;\n\t\t}\n\t\t\n\t\t.item-label {\n\t\t\tdisplay: block;\n\t\t\tfont-size: 26rpx;\n\t\t\tcolor: #6b7280;\n\t\t\tmargin-bottom: 12rpx;\n\t\t\t\n\t\t\t.required {\n\t\t\t\tcolor: #ee0a24;\n\t\t\t\tmargin-left: 4rpx;\n\t\t\t}\n\t\t}\n\t\t\n\t\t.item-value {\n\t\t\tdisplay: block;\n\t\t\tfont-size: 28rpx;\n\t\t\tcolor: #111827;\n\t\t\tpadding: 16rpx 0;\n\t\t}\n\t\t\n\t\t.item-input {\n\t\t\twidth: 100%;\n\t\t\theight: 80rpx;\n\t\t\tpadding: 0 20rpx;\n\t\t\tbackground: #f7f8fa;\n\t\t\tborder-radius: 12rpx;\n\t\t\tfont-size: 28rpx;\n\t\t\tcolor: #111827;\n\t\t\tborder: 2rpx solid transparent;\n\t\t\ttransition: all 0.3s;\n\t\t\t\n\t\t\t&:focus {\n\t\t\t\tbackground: white;\n\t\t\t\tborder-color: #00c9ff;\n\t\t\t}\n\t\t}\n\t\t\n\t\t.picker-input {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: space-between;\n\t\t\theight: 80rpx;\n\t\t\tpadding: 0 20rpx;\n\t\t\tbackground: #f7f8fa;\n\t\t\tborder-radius: 12rpx;\n\t\t\tfont-size: 28rpx;\n\t\t\tcolor: #111827;\n\t\t\t\n\t\t\t.picker-arrow {\n\t\t\t\tfont-size: 20rpx;\n\t\t\t\tcolor: #9ca3af;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t.switch-item {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tpadding: 24rpx 0;\n\t\tborder-bottom: 1rpx solid #e5e7eb;\n\t\t\n\t\t&:last-child {\n\t\t\tborder-bottom: none;\n\t\t}\n\t\t\n\t\t.switch-label {\n\t\t\tflex: 1;\n\t\t\t\n\t\t\t.label-text {\n\t\t\t\tdisplay: block;\n\t\t\t\tfont-size: 28rpx;\n\t\t\t\tcolor: #111827;\n\t\t\t\tfont-weight: 500;\n\t\t\t\tmargin-bottom: 8rpx;\n\t\t\t}\n\t\t\t\n\t\t\t.label-desc {\n\t\t\t\tdisplay: block;\n\t\t\t\tfont-size: 24rpx;\n\t\t\t\tcolor: #6b7280;\n\t\t\t}\n\t\t}\n\t}\n}\n\n.bottom-actions {\n\tposition: fixed;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tpadding: 20rpx 24rpx 30rpx;\n\tbackground: white;\n\tbox-shadow: 0 -4rpx 20rpx rgba(0, 0, 0, 0.08);\n\tdisplay: flex;\n\tgap: 20rpx;\n\t\n\t.action-btn-large {\n\t\tflex: 1;\n\t\theight: 88rpx;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tborder-radius: 44rpx;\n\t\tfont-size: 30rpx;\n\t\tfont-weight: 500;\n\t\ttransition: all 0.3s;\n\t\t\n\t\t&:active {\n\t\t\ttransform: scale(0.98);\n\t\t}\n\t\t\n\t\t&.delete-btn {\n\t\t\tbackground: #f7f8fa;\n\t\t\tcolor: #ee0a24;\n\t\t\tborder: 2rpx solid #fee2e2;\n\t\t}\n\t\t\n\t\t&.primary-btn {\n\t\t\tbackground: linear-gradient(135deg, #00c9ff 0%, #00a0ff 100%);\n\t\t\tcolor: white;\n\t\t\tbox-shadow: 0 4rpx 16rpx rgba(0, 160, 255, 0.3);\n\t\t}\n\t}\n}\n</style>\n","import mod from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=style&index=0&id=56ab9baa&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./detail.vue?vue&type=style&index=0&id=56ab9baa&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1767415964745\n      var cssReload = require(\"D:/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}