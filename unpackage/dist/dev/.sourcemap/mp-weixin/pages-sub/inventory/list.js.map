{"version":3,"sources":["uni-app:///main.js","webpack:///D:/AK-PMS/pages-sub/inventory/list.vue?ec65","webpack:///D:/AK-PMS/pages-sub/inventory/list.vue?f0c1","webpack:///D:/AK-PMS/pages-sub/inventory/list.vue?8dd9","webpack:///D:/AK-PMS/pages-sub/inventory/list.vue?ae75","uni-app:///pages-sub/inventory/list.vue","webpack:///D:/AK-PMS/pages-sub/inventory/list.vue?2d67","webpack:///D:/AK-PMS/pages-sub/inventory/list.vue?90bf"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","name","data","statusTabs","label","value","locationTabs","activeStatus","activeLocation","inventoryList","computed","filteredList","matchLocation","onLoad","onShow","methods","onQuery","loadInventoryList","db","collection","orderBy","get","res","id","recordNo","status","operator","createTime","location","drugCount","console","uni","title","icon","exportInventorySummary","itemList","success","tapIndex","exportType","mask","payload","export","action","resFn","fileID","fileList","urlRes","fileUrl","filename","parts","downloadAndSaveLocal","fs","url","tempFilePath","filePath","fileType","showMenu","fail","content","showCancel","confirmText","selectStatus","selectLocation","onRefresh","onCreate","goDetail","renderStatus","all","draft","in_progress","completed","formatDateTime"],"mappings":"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","file":"pages-sub/inventory/list.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages-sub/inventory/list.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./list.vue?vue&type=template&id=6b43ba52&scoped=true&\"\nvar renderjs\nimport script from \"./list.vue?vue&type=script&lang=js&\"\nexport * from \"./list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./list.vue?vue&type=style&index=0&id=6b43ba52&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6b43ba52\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages-sub/inventory/list.vue\"\nexport default component.exports","export * from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./list.vue?vue&type=template&id=6b43ba52&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.filteredList, function (item, __i2__) {\n    var $orig = _vm.__get_orig(item)\n    var m0 = _vm.renderStatus(item.status)\n    var m1 = _vm.formatDateTime(item.createTime)\n    return {\n      $orig: $orig,\n      m0: m0,\n      m1: m1,\n    }\n  })\n  var g0 = _vm.filteredList.length\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./list.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container\">\r\n\t\t<!-- È°∂ÈÉ®Ê†áÈ¢òÂç°Áâá -->\r\n\t\t<view class=\"page-header\">\r\n\t\t\t<view class=\"header-left\">\r\n\t\t\t\t<text class=\"page-title\">Â∫ìÂ≠òÁõòÁÇπ</text>\r\n\t\t\t\t<text class=\"page-subtitle\">ÂÆöÊúüÁõòÁÇπÔºåÁ°Æ‰øùË¥¶ÂÆû‰∏ÄËá¥</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"page-actions\">\r\n\t\t\t\t<view class=\"header-btn ghost\" @tap=\"onQuery\">\r\n\t\t\t\t\t<text class=\"btn-text\">Êü•ËØ¢</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"header-btn ghost\" @tap=\"exportInventorySummary\">\r\n\t\t\t\t\t<text class=\"btn-text\">ÂØºÂá∫</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"header-btn primary\" @tap=\"onCreate\">\r\n\t\t\t\t\t<text class=\"btn-text\">Êñ∞Âª∫ÁõòÁÇπÂçï</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- Á≠õÈÄâÂå∫ÂüüÔºöÁä∂ÊÄÅ + Âõ≠Âå∫ -->\r\n\t\t<view class=\"filter-section\">\r\n\t\t\t<view class=\"filter-row\">\r\n\t\t\t\t<view\r\n\t\t\t\t\tv-for=\"tab in statusTabs\"\r\n\t\t\t\t\t:key=\"tab.value\"\r\n\t\t\t\t\t:class=\"['filter-chip', { active: activeStatus === tab.value }]\"\r\n\t\t\t\t\t@tap=\"selectStatus(tab.value)\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{{ tab.label }}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"filter-row\">\r\n\t\t\t\t<view\r\n\t\t\t\t\tv-for=\"tab in locationTabs\"\r\n\t\t\t\t\t:key=\"tab.value\"\r\n\t\t\t\t\t:class=\"['filter-chip', { active: activeLocation === tab.value }]\"\r\n\t\t\t\t\t@tap=\"selectLocation(tab.value)\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{{ tab.label }}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- ÁõòÁÇπÂçïÂàóË°® -->\r\n\t\t<view class=\"list-section\">\r\n\t\t\t<view\r\n\t\t\t\tv-for=\"item in filteredList\"\r\n\t\t\t\t:key=\"item.id\"\r\n\t\t\t\tclass=\"inventory-card\"\r\n\t\t\t\t@tap=\"goDetail(item.id)\"\r\n\t\t\t>\r\n\t\t\t\t<view class=\"card-header\">\r\n\t\t\t\t\t<text class=\"record-no\">{{ item.recordNo }}</text>\r\n\t\t\t\t\t<text :class=\"['status-tag', 'status-' + item.status]\">{{ renderStatus(item.status) }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"card-body\">\r\n\t\t\t\t\t<view class=\"info-row\">\r\n\t\t\t\t\t\t<text class=\"label\">ÁõòÁÇπ‰∫∫Ôºö</text>\r\n\t\t\t\t\t\t<text class=\"value\">{{ item.operator || '-' }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"info-row\">\r\n\t\t\t\t\t\t<text class=\"label\">ÁõòÁÇπÊó∂Èó¥Ôºö</text>\r\n\t\t\t\t\t\t<text class=\"value\">{{ formatDateTime(item.createTime) }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"info-row\">\r\n\t\t\t\t\t\t<text class=\"label\">Ê∂âÂèäËçØÊùêÔºö</text>\r\n\t\t\t\t\t\t<text class=\"value\">{{ item.drugCount }} Áßç</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- Á©∫Áä∂ÊÄÅ -->\r\n\t\t\t<view v-if=\"filteredList.length === 0\" class=\"empty-state\">\r\n\t\t\t\t<text class=\"empty-icon\">üìã</text>\r\n\t\t\t\t<text class=\"empty-text\">ÊöÇÊó†ÁõòÁÇπËÆ∞ÂΩï</text>\r\n\t\t\t\t<text class=\"empty-hint\">ÂèØÁÇπÂáª‰∏äÊñπ‚ÄúÊñ∞Âª∫ÁõòÁÇπÂçï‚ÄùÂºÄÂßãÈ¶ñÊ¨°ÁõòÁÇπ</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: 'InventoryList',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tstatusTabs: [\r\n\t\t\t\t{ label: 'ÂÖ®ÈÉ®', value: 'all' },\r\n\t\t\t\t{ label: 'ËçâÁ®ø', value: 'draft' },\r\n\t\t\t\t{ label: 'ËøõË°å‰∏≠', value: 'in_progress' },\r\n\t\t\t\t{ label: 'Â∑≤ÂÆåÊàê', value: 'completed' }\r\n\t\t\t],\r\n\t\t\tlocationTabs: [\r\n\t\t\t\t{ label: 'Â∫ìÂ≠ò', value: 'all' },\r\n\t\t\t\t{ label: 'ÈôÜÂõ≠', value: 'land_park' },\r\n\t\t\t\t{ label: 'Ê∞¥Âõ≠', value: 'water_park' }\r\n\t\t\t],\r\n\t\t\tactiveStatus: 'all',\r\n\t\t\tactiveLocation: 'all',\r\n\t\t\tinventoryList: []\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tfilteredList() {\r\n\t\t\treturn this.inventoryList.filter(item => {\r\n\t\t\t\tconst matchStatus = this.activeStatus === 'all' || item.status === this.activeStatus\r\n\t\t\t\t// Â∫ìÂ≠òÔºöÂè™ÁúãÊÄªÂ∫ìÂ≠òÁõòÁÇπÂçïÔºàlocation ‰∏∫Á©∫Êàñ‰∏∫ 'all'Ôºâ\r\n\t\t\t\tlet matchLocation = true\r\n\t\t\t\tif (this.activeLocation === 'all') {\r\n\t\t\t\t\tmatchLocation = !item.location || item.location === 'all'\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmatchLocation = item.location === this.activeLocation\r\n\t\t\t\t}\r\n\t\t\t\treturn matchStatus && matchLocation\r\n\t\t\t})\r\n\t\t}\r\n\t},\r\n\tonLoad() {\r\n\t\tthis.loadInventoryList()\r\n\t},\r\n\tonShow() {\r\n\t\t// ÊØèÊ¨°ËøîÂõûÂàóË°®Êó∂Âà∑Êñ∞‰∏ÄÊ¨°Ôºå‰øùËØÅÁúãÂà∞ÊúÄÊñ∞ÁõòÁÇπËÆ∞ÂΩï\r\n\t\tthis.loadInventoryList()\r\n\t},\r\n\tmethods: {\r\n\t\tonQuery() {\r\n\t\t\t// ÊåâÂΩìÂâçÁ≠õÈÄâÊù°‰ª∂ÈáçÊñ∞Âä†ËΩΩÁõòÁÇπÂàóË°®\r\n\t\t\tthis.loadInventoryList()\r\n\t\t},\r\n\t\tasync loadInventoryList() {\r\n\t\t\ttry {\r\n\t\t\t\tconst db = wx.cloud.database()\r\n\t\t\t\tconst res = await db\r\n\t\t\t\t\t.collection('inventory')\r\n\t\t\t\t\t.orderBy('createTime', 'desc')\r\n\t\t\t\t\t.get()\r\n\t\t\t\t// Â∞Ü _id Êò†Â∞ÑÂà∞Êú¨Âú∞‰ΩøÁî®ÁöÑ id Â≠óÊÆµ\r\n\t\t\t\tthis.inventoryList = (res.data || []).map(item => ({\r\n\t\t\t\t\tid: item._id,\r\n\t\t\t\t\trecordNo: item.recordNo,\r\n\t\t\t\t\tstatus: item.status,\r\n\t\t\t\t\toperator: item.operator,\r\n\t\t\t\t\tcreateTime: item.createTime,\r\n\t\t\t\t\tlocation: item.location || 'all',\r\n\t\t\t\t\tdrugCount: Array.isArray(item.details) ? item.details.length : 0\r\n\t\t\t\t}))\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error('Âä†ËΩΩÁõòÁÇπÂàóË°®Â§±Ë¥•', e)\r\n\t\t\t\tuni.showToast({ title: 'Âä†ËΩΩÁõòÁÇπÂàóË°®Â§±Ë¥•', icon: 'none' })\r\n\t\t\t}\r\n\t\t},\r\n\t\texportInventorySummary() {\r\n\t\t\tif (!this.filteredList.length) {\r\n\t\t\t\tuni.showToast({ title: 'ÊöÇÊó†Êï∞ÊçÆÂèØÂØºÂá∫', icon: 'none' })\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tuni.showActionSheet({\r\n\t\t\t\titemList: ['ÂØºÂá∫ Excel', 'ÂØºÂá∫ PDF'],\r\n\t\t\t\tsuccess: async (res) => {\r\n\t\t\t\t\tconst tapIndex = res.tapIndex\r\n\t\t\t\t\tconst exportType = tapIndex === 1 ? 'pdf' : 'excel'\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tuni.showLoading({ title: 'ÁîüÊàêÊä•Ë°®...', mask: true })\r\n\t\t\t\t\t\tconst payload = {\r\n\t\t\t\t\t\t\tstatus: this.activeStatus,\r\n\t\t\t\t\t\t\tlocation: this.activeLocation,\r\n\t\t\t\t\t\t\texport: exportType\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst resFn = await this.$api.callFunction('reports', {\r\n\t\t\t\t\t\t\taction: 'inventorySummaryReport',\r\n\t\t\t\t\t\t\tdata: payload\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\tif (resFn && resFn.success) {\r\n\t\t\t\t\t\t\t// Â§ÑÁêÜÊñá‰ª∂‰∏ãËΩΩÂπ∂ÊâìÂºÄ\r\n\t\t\t\t\t\t\tconst fileID = resFn.fileID\r\n\t\t\t\t\t\t\tif (!fileID) {\r\n\t\t\t\t\t\t\t\tuni.showToast({ title: 'Êú™ËøîÂõûÊñá‰ª∂ID', icon: 'none' })\r\n\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tconst urlRes = await wx.cloud.getTempFileURL({ fileList: [fileID] })\r\n\t\t\t\t\t\t\t\tconst fileUrl = urlRes && urlRes.fileList && urlRes.fileList[0] && urlRes.fileList[0].tempFileURL\r\n\t\t\t\t\t\t\t\tlet filename = ''\r\n\t\t\t\t\t\t\t\tif (exportType === 'excel' && resFn.filename) {\r\n\t\t\t\t\t\t\t\t\tfilename = resFn.filename\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tconst parts = String(fileID).split('/')\r\n\t\t\t\t\t\t\t\t\tfilename = parts[parts.length - 1] || `inventory_summary_${Date.now()}.${exportType === 'pdf' ? 'pdf' : 'xlsx'}`\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (fileUrl) {\r\n\t\t\t\t\t\t\t\t\tthis.downloadAndSaveLocal(fileUrl, filename, exportType === 'pdf' ? 'PDF' : 'Excel')\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({ title: 'Ëé∑Âèñ‰∏ãËΩΩÈìæÊé•Â§±Ë¥•', icon: 'none' })\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\tconsole.error('Ëé∑ÂèñÁõòÁÇπÊ±áÊÄª‰∏ãËΩΩÈìæÊé•Â§±Ë¥•', e)\r\n\t\t\t\t\t\t\t\tuni.showToast({ title: 'Ëé∑Âèñ‰∏ãËΩΩÈìæÊé•Â§±Ë¥•', icon: 'none' })\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: (resFn && resFn.message) || 'ÂØºÂá∫Â§±Ë¥•',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\tconsole.error('ÂØºÂá∫ÁõòÁÇπÊ±áÊÄªÂ§±Ë¥•', e)\r\n\t\t\t\t\t\tuni.showToast({ title: 'ÂØºÂá∫Â§±Ë¥•', icon: 'none' })\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t// Â§çÁî®Âá∫Â∫ìÊä•Ë°®ÁöÑÊú¨Âú∞‰øùÂ≠ò‰∏éÊâìÂºÄÈÄªËæë\r\n\t\tdownloadAndSaveLocal(fileUrl, filename, fileTypeLabel) {\r\n\t\t\tconst fs = wx.getFileSystemManager()\r\n\t\t\tconst folder = `${wx.env.USER_DATA_PATH}`\r\n\t\t\tconst savePath = `${folder}/${filename}`\r\n\t\t\ttry {\r\n\t\t\t\tfs.mkdirSync(folder, true)\r\n\t\t\t} catch (e) {}\r\n\t\t\tuni.downloadFile({\r\n\t\t\t\turl: fileUrl,\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\tfs.saveFile({\r\n\t\t\t\t\t\t\ttempFilePath: res.tempFilePath,\r\n\t\t\t\t\t\t\tfilePath: savePath,\r\n\t\t\t\t\t\t\tsuccess: () => {\r\n\t\t\t\t\t\t\t\tconst lower = (filename || '').toLowerCase()\r\n\t\t\t\t\t\t\t\tlet fileTypeExt = 'xlsx'\r\n\t\t\t\t\t\t\t\tif (lower.endsWith('.pdf')) fileTypeExt = 'pdf'\r\n\t\t\t\t\t\t\t\twx.openDocument({\r\n\t\t\t\t\t\t\t\t\tfilePath: savePath,\r\n\t\t\t\t\t\t\t\t\tfileType: fileTypeExt,\r\n\t\t\t\t\t\t\t\t\tshowMenu: true,\r\n\t\t\t\t\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: `${fileTypeLabel}Êñá‰ª∂Â∑≤‰øùÂ≠ò`,\r\n\t\t\t\t\t\t\t\t\t\t\tcontent: `Êñá‰ª∂Â∑≤‰øùÂ≠òÂà∞ÔºöÂæÆ‰ø°-Êàë-ÊúçÂä°-Â∞èÁ®ãÂ∫è-ÊàëÁöÑÊñá‰ª∂/${filename}\\n\\nËØ∑ÂâçÂæÄÂæÆ‰ø°-Êàë-ÊúçÂä°-Â∞èÁ®ãÂ∫è-ÊàëÁöÑÊñá‰ª∂ Êü•Áúã„ÄÅÂàÜ‰∫´ÊàñÂØºÂá∫„ÄÇ`,\r\n\t\t\t\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t\t\t\t\tconfirmText: 'Áü•ÈÅì‰∫Ü'\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\t\t\tuni.showToast({ title: '‰øùÂ≠òÂ§±Ë¥•', icon: 'none' })\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({ title: '‰∏ãËΩΩÂ§±Ë¥•', icon: 'none' })\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: () => {\r\n\t\t\t\t\tuni.showToast({ title: 'Êñá‰ª∂‰∏ãËΩΩÂ§±Ë¥•', icon: 'none' })\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tselectStatus(value) {\r\n\t\t\tthis.activeStatus = value\r\n\t\t},\r\n\t\tselectLocation(value) {\r\n\t\t\tthis.activeLocation = value\r\n\t\t},\r\n\t\tonRefresh() {\r\n\t\t\t// È¢ÑÁïôÔºöÂêéÁª≠ÂèØË∞ÉÁî®‰∫ëÂáΩÊï∞Âà∑Êñ∞ÂàóË°®\r\n\t\t\tuni.showToast({ title: 'Âà∑Êñ∞ÊàêÂäü', icon: 'none' })\r\n\t\t},\r\n\t\tonCreate() {\r\n\t\t\t// Ë∑≥ËΩ¨Âà∞Êñ∞Âª∫ÁõòÁÇπÂçïËØ¶ÊÉÖÈ°µÔºàÊöÇ‰∏çÂ∏¶ idÔºåËßÜ‰∏∫Êñ∞Âª∫Ôºâ\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: '/pages-sub/inventory/detail'\r\n\t\t\t})\r\n\t\t},\r\n\t\tgoDetail(id) {\r\n\t\t\t// Ë∑≥ËΩ¨Âà∞ÊåáÂÆöÁõòÁÇπÂçïËØ¶ÊÉÖÈ°µÔºåÂêéÁª≠ÂèØÊ†πÊçÆ id Âä†ËΩΩÁúüÂÆûÊï∞ÊçÆ\r\n\t\t\tif (!id) {\r\n\t\t\t\tuni.navigateTo({ url: '/pages-sub/inventory/detail' })\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: `/pages-sub/inventory/detail?id=${id}`\r\n\t\t\t})\r\n\t\t},\r\n\t\trenderStatus(status) {\r\n\t\t\tconst map = {\r\n\t\t\t\tall: 'ÂÖ®ÈÉ®',\r\n\t\t\t\tdraft: 'ËçâÁ®ø',\r\n\t\t\t\tin_progress: 'ËøõË°å‰∏≠',\r\n\t\t\t\tcompleted: 'Â∑≤ÂÆåÊàê'\r\n\t\t\t}\r\n\t\t\treturn map[status] || status\r\n\t\t},\r\n\t\tformatDateTime(dateStr) {\r\n\t\t\tif (!dateStr) return ''\r\n\t\t\tconst d = new Date(dateStr)\r\n\t\t\tif (Number.isNaN(d.getTime())) return ''\r\n\t\t\tconst y = d.getFullYear()\r\n\t\t\tconst m = String(d.getMonth() + 1).padStart(2, '0')\r\n\t\t\tconst day = String(d.getDate()).padStart(2, '0')\r\n\t\t\tconst hh = String(d.getHours()).padStart(2, '0')\r\n\t\t\tconst mm = String(d.getMinutes()).padStart(2, '0')\r\n\t\t\treturn `${y}-${m}-${day} ${hh}:${mm}`\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n\tmin-height: 100vh;\r\n\t/* ‰ΩøÁî®‰∏éÈ¶ñÈ°µ/Èó®ËØä/ËçØÊùêÂ∑•‰ΩúÂè∞‰∏ÄËá¥ÁöÑËìùËâ≤Ê∏êÂèòËÉåÊôØ */\r\n\tbackground: linear-gradient(180deg, #00c9ff 0%, #00a0ff 35%, #e5e7eb 100%);\r\n\tpadding: 24rpx 24rpx 40rpx;\r\n}\r\n\r\n.page-header {\r\n\t/* È°∂ÈÉ®Ê†áÈ¢òÂç°ÁâáÔºöË±°ÁâôÁôΩÂúÜËßíÂç°ÁâáÔºåÂÆΩÂ∫¶‰∏éÂÖ∂ÂÆÉÂ∑•‰ΩúÂè∞ header-card ÂØπÈΩê */\r\n\tmax-width: 702rpx;\r\n\tmargin: 10rpx auto 8rpx;\r\n\tpadding: 20rpx 22rpx 18rpx;\r\n\tbackground: #FFFFF0;\r\n\tborder-radius: 22rpx;\r\n\tbox-shadow:\r\n\t\t0 1rpx 0 rgba(255, 255, 255, 0.9) inset,\r\n\t\t0 -1rpx 0 rgba(15, 23, 42, 0.06) inset,\r\n\t\t0 18rpx 40rpx rgba(15, 23, 42, 0.14);\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n}\r\n\r\n.header-left {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tgap: 6rpx;\r\n}\r\n\r\n.page-title {\r\n\tfont-size: 32rpx;\r\n\tfont-weight: 650;\r\n\tcolor: #111827;\r\n}\r\n\r\n.page-subtitle {\r\n\tfont-size: 24rpx;\r\n\tcolor: #6b7280;\r\n}\r\n\r\n.page-actions {\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\talign-items: center;\r\n\tgap: 12rpx;\r\n}\r\n\r\n.header-btn {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tpadding: 10rpx 22rpx;\r\n\tborder-radius: 999rpx;\r\n\tfont-size: 24rpx;\r\n\tfont-weight: 500;\r\n\tborder-width: 1rpx;\r\n\tborder-style: solid;\r\n\r\n\t&.primary {\r\n\t\tbackground: linear-gradient(135deg, #00c9ff 0%, #00a0ff 100%);\r\n\t\tborder-color: transparent;\r\n\t\tcolor: #ffffff;\r\n\t\tbox-shadow: 0 6rpx 16rpx rgba(0, 160, 255, 0.25);\r\n\t}\r\n\r\n\t&.ghost {\r\n\t\tbackground: linear-gradient(135deg, #00c9ff 0%, #00a0ff 100%);\r\n\t\tborder-color: transparent;\r\n\t\tcolor: #ffffff;\r\n\t\tbox-shadow: 0 6rpx 16rpx rgba(0, 160, 255, 0.25);\r\n\t}\r\n}\r\n\r\n.btn-text {\r\n\tfont-size: 24rpx;\r\n}\r\n\r\n.filter-section {\r\n\tmax-width: 702rpx;\r\n\tmargin: 0 auto 8rpx;\r\n\tpadding: 16rpx 18rpx 10rpx;\r\n\tbackground: #FFFFF0;\r\n\tborder-radius: 22rpx;\r\n\tbox-shadow: 0 8rpx 20rpx rgba(15, 23, 42, 0.12);\r\n}\r\n\r\n.filter-row {\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tflex-wrap: wrap;\r\n\tgap: 10rpx;\r\n\tmargin-bottom: 8rpx;\r\n}\r\n\r\n.filter-chip {\r\n\tpadding: 10rpx 22rpx;\r\n\tborder-radius: 999rpx;\r\n\tbackground: #f3f4f6;\r\n\tfont-size: 24rpx;\r\n\tcolor: #4b5563;\r\n\r\n\t&.active {\r\n\t\tbackground: linear-gradient(135deg, #00c9ff 0%, #00a0ff 100%);\r\n\t\tcolor: #ffffff;\r\n\t\tbox-shadow: 0 6rpx 16rpx rgba(0, 160, 255, 0.3);\r\n\t}\r\n}\r\n\r\n.list-section {\r\n\tmax-width: 702rpx;\r\n\tmargin: 0 auto 8rpx;\r\n}\r\n\r\n.inventory-card {\r\n\tbackground: #FFFFF0;\r\n\tborder-radius: 20rpx;\r\n\tpadding: 22rpx 22rpx 18rpx;\r\n\tmargin-bottom: 8rpx;\r\n\tbox-shadow: 0 8rpx 20rpx rgba(15, 23, 42, 0.12);\r\n}\r\n\r\n.card-header {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\tmargin-bottom: 10rpx;\r\n}\r\n\r\n.record-no {\r\n\tfont-size: 28rpx;\r\n\tfont-weight: 600;\r\n\tcolor: #111827;\r\n}\r\n\r\n.status-tag {\r\n\tpadding: 6rpx 16rpx;\r\n\tborder-radius: 999rpx;\r\n\tfont-size: 22rpx;\r\n\tcolor: #ffffff;\r\n\r\n\t&.status-draft {\r\n\t\tbackground: #9ca3af;\r\n\t}\r\n\t&.status-in_progress {\r\n\t\tbackground: #f59e0b;\r\n\t}\r\n\t&.status-completed {\r\n\t\tbackground: #22c55e;\r\n\t}\r\n}\r\n\r\n.card-body {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tgap: 6rpx;\r\n}\r\n\r\n.info-row {\r\n\tfont-size: 24rpx;\r\n\tcolor: #4b5563;\r\n}\r\n\r\n.label {\r\n\tcolor: #9ca3af;\r\n}\r\n\r\n.value {\r\n\tcolor: #111827;\r\n}\r\n\r\n.empty-state {\r\n\tpadding: 120rpx 0 40rpx;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\tcolor: #9ca3af;\r\n}\r\n\r\n.empty-icon {\r\n\tfont-size: 80rpx;\r\n\tmargin-bottom: 12rpx;\r\n}\r\n\r\n.empty-text {\r\n\tfont-size: 30rpx;\r\n\tmargin-bottom: 8rpx;\r\n}\r\n\r\n.empty-hint {\r\n\tfont-size: 24rpx;\r\n\tcolor: #cbd5e1;\r\n}\r\n\r\n// ÂØºÂá∫ÁõòÁÇπÊ±áÊÄªÊåâÈíÆÂå∫Âüü\r\n.export-section {\r\n\tmax-width: 702rpx;\r\n\tmargin: 0 auto 24rpx;\r\n}\r\n\r\n.export-btn {\r\n\tbackground: #FFFFF0;\r\n\tborder-radius: 20rpx;\r\n\tpadding: 18rpx 22rpx;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\tgap: 10rpx;\r\n\tbox-shadow: 0 8rpx 20rpx rgba(15, 23, 42, 0.12);\r\n}\r\n\r\n.export-icon {\r\n\tfont-size: 28rpx;\r\n\tcolor: #4b5563;\r\n}\r\n\r\n.export-text {\r\n\tfont-size: 26rpx;\r\n\tcolor: #111827;\r\n}\r\n</style>\r\n","import mod from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./list.vue?vue&type=style&index=0&id=6b43ba52&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./list.vue?vue&type=style&index=0&id=6b43ba52&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1767406263619\n      var cssReload = require(\"D:/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}