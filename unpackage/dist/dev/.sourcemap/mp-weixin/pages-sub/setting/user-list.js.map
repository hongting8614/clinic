{"version":3,"sources":["uni-app:///main.js","webpack:///D:/AK-PMS/pages-sub/setting/user-list.vue?654d","webpack:///D:/AK-PMS/pages-sub/setting/user-list.vue?98a6","webpack:///D:/AK-PMS/pages-sub/setting/user-list.vue?730f","webpack:///D:/AK-PMS/pages-sub/setting/user-list.vue?c0d3","uni-app:///pages-sub/setting/user-list.vue","webpack:///D:/AK-PMS/pages-sub/setting/user-list.vue?98c9","webpack:///D:/AK-PMS/pages-sub/setting/user-list.vue?ea9f"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","mixins","data","userList","totalUsers","activeUsers","adminCount","currentUserOpenid","roleFilter","value","text","selectedRole","selectedRoleText","statusFilter","selectedStatus","selectedStatusText","showDialog","isEdit","editingUserId","isChecking","isAuthorized","unauthorizedMessage","noPermission","form","_id","openid","wechatId","name","realName","nickname","phone","role","roleText","roleOptions","desc","computed","filteredUserList","roleIndex","currentRoleText","onLoad","methods","checkAuth","userInfo","result","console","handleGoBack","uni","loadUserList","title","res","icon","updateStats","onRoleFilterChange","onStatusFilterChange","showAddDialog","editUser","cancelEdit","toggleUserStatus","content","success","updateUserStatus","userId","status","deleteUser","confirmColor","confirmDeleteUser","onRoleChange","getRoleDescription","getRoleIcon","getRoleDescriptionShort","closeDialog","submitForm","duration","addUser","updateUser","formatTime"],"mappings":"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A;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACAG;MACAC;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAD;kBAAAE;gBAAA;gBAAA;gBAAA;gBAAA,OAGApD;kBACA+B;kBACAzB;gBACA;cAAA;gBAHA+C;gBAKAH;gBACAH;gBAAA,MAEAA;kBAAA;kBAAA;gBAAA;gBACA;gBACA;kBACA;kBACA;gBACA;gBACAG;kBACAE;kBACAE;gBACA;gBAAA;cAAA;gBAIA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAJ;gBACAF;gBACAE;kBACAE;kBACAE;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAC;MACA;MACA;QAAA;MAAA;MACA;QAAA;MAAA;IACA;IAEA;IACAC;MACA;MACA;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;IACA;IAEA;IACAC;MACA;MACA;QACA9B;QACAC;QACAE;QACAE;QACAC;QACAC;QACAC;MACA;MACA;IACA;IAEA;IACAuB;MACA;QACAT;UACAE;UACAE;QACA;QACA;MACA;;MAEA;MACA;QACA;QACA;MACA;;MAEA;MACA;MACA;MACA;QACA1B;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;IACA;IAEA;IACAwB;MACA;MACA;QACAhC;QACAE;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;IACA;IAEA;IACAyB;MAAA;MACA;MACA;QACAX;UACAE;UACAE;QACA;QACA;MACA;MAEA;MACA;MAEAJ;QACAE;QACAU;QACAC;UAAA;YAAA;cAAA;gBAAA;kBAAA;oBAAA,KACAV;sBAAA;sBAAA;oBAAA;oBAAA;oBAAA,OACA;kBAAA;kBAAA;oBAAA;gBAAA;cAAA;YAAA;UAAA,CAEA;UAAA;YAAA;UAAA;UAAA;QAAA;MACA;IACA;IAEA;IACAW;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAd;kBAAAE;gBAAA;gBAAA;gBAAA;gBAAA,OAGApD;kBACA+B;kBA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","file":"pages-sub/setting/user-list.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages-sub/setting/user-list.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./user-list.vue?vue&type=template&id=72193c6b&scoped=true&\"\nvar renderjs\nimport script from \"./user-list.vue?vue&type=script&lang=js&\"\nexport * from \"./user-list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./user-list.vue?vue&type=style&index=0&id=72193c6b&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"72193c6b\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages-sub/setting/user-list.vue\"\nexport default component.exports","export * from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user-list.vue?vue&type=template&id=72193c6b&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 =\n    !_vm.isChecking && _vm.isAuthorized\n      ? _vm.__map(_vm.filteredUserList, function (user, __i0__) {\n          var $orig = _vm.__get_orig(user)\n          var g0 = user.name.substr(0, 1)\n          var m0 = user.lastLogin ? _vm.formatTime(user.lastLogin) : null\n          var m1 =\n            _vm.editingUserId === user._id\n              ? _vm.getRoleDescription(_vm.form.role)\n              : null\n          return {\n            $orig: $orig,\n            g0: g0,\n            m0: m0,\n            m1: m1,\n          }\n        })\n      : null\n  var g1 =\n    !_vm.isChecking && _vm.isAuthorized && !(_vm.totalUsers === 0)\n      ? _vm.filteredUserList.length\n      : null\n  var m2 =\n    !_vm.isChecking && _vm.isAuthorized && _vm.showDialog\n      ? _vm.getRoleIcon(_vm.form.role)\n      : null\n  var m3 =\n    !_vm.isChecking && _vm.isAuthorized && _vm.showDialog\n      ? _vm.getRoleDescriptionShort(_vm.form.role)\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        g1: g1,\n        m2: m2,\n        m3: m3,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user-list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user-list.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"user-management\">\r\n    <!-- ÁôªÂΩïÊ£ÄÊü•‰∏≠ -->\r\n    <view v-if=\"isChecking\" class=\"checking-container\">\r\n      <view class=\"checking-content\">\r\n        <text class=\"checking-text\">Ê£ÄÊü•ÁôªÂΩïÁä∂ÊÄÅ...</text>\r\n      </view>\r\n    </view>\r\n    \r\n    <!-- È°µÈù¢ÂÜÖÂÆπ -->\r\n    <view v-else-if=\"isAuthorized\" class=\"page-content\">\r\n    <!-- È°∂ÈÉ®Â∑•ÂÖ∑Ê†èÔºöÂΩìÂâçËßíËâ≤ + Ê∑ªÂä†ÊåâÈíÆ -->\r\n    <view class=\"page-toolbar toolbar-light\">\r\n      <text class=\"toolbar-role\">ÂΩìÂâçËßíËâ≤Ôºö{{ currentRoleText }}</text>\r\n      <button class=\"btn-add btn-primary\" @click=\"showAddDialog\">\r\n        <text class=\"btn-add-text\">Ê∑ªÂä†Áî®Êà∑</text>\r\n      </button>\r\n    </view>\r\n    \r\n    <!-- ÁªüËÆ°Âç°ÁâáÔºö‰ªÖÂú®ÊúâÁî®Êà∑Êó∂ÊòæÁ§∫ -->\r\n    <view class=\"stats-card\" v-if=\"totalUsers > 0\" style=\"background-color: #f9f9f9; padding: 16px; border-bottom: 1px solid #ddd;\">\r\n      <view class=\"stat-item\">\r\n        <text class=\"stat-value\">{{ totalUsers }}</text>\r\n        <text class=\"stat-label\">ÊÄªÁî®Êà∑Êï∞</text>\r\n      </view>\r\n      <view class=\"stat-item\">\r\n        <text class=\"stat-value\">{{ activeUsers }}</text>\r\n        <text class=\"stat-label\">Ê¥ªË∑ÉÁî®Êà∑</text>\r\n      </view>\r\n      <view class=\"stat-item\">\r\n        <text class=\"stat-value\">{{ adminCount }}</text>\r\n        <text class=\"stat-label\">ÁÆ°ÁêÜÂëò</text>\r\n      </view>\r\n    </view>\r\n    \r\n    <!-- Á≠õÈÄâÊ†èÔºö‰ªÖÂú®ÊúâÁî®Êà∑Êó∂ÊòæÁ§∫ -->\r\n    <view class=\"filter-bar\" v-if=\"totalUsers > 0\" style=\"display: flex; justify-content: space-between; align-items: center; padding: 16px; background-color: #f9f9f9; border-bottom: 1px solid #ddd;\">\r\n      <picker \r\n        :range=\"roleFilter\" \r\n        :range-key=\"'text'\"\r\n        @change=\"onRoleFilterChange\"\r\n      >\r\n        <view class=\"filter-item\">\r\n          <text>ËßíËâ≤Ôºö{{ selectedRoleText }}</text>\r\n          <text class=\"arrow\">‚ñº</text>\r\n        </view>\r\n      </picker>\r\n      \r\n      <picker \r\n        :range=\"statusFilter\" \r\n        :range-key=\"'text'\"\r\n        @change=\"onStatusFilterChange\"\r\n      >\r\n        <view class=\"filter-item\">\r\n          <text>Áä∂ÊÄÅÔºö{{ selectedStatusText }}</text>\r\n          <text class=\"arrow\">‚ñº</text>\r\n        </view>\r\n      </picker>\r\n    </view>\r\n    \r\n    <!-- Áî®Êà∑ÂàóË°® -->\r\n    <view class=\"user-list\">\r\n      <view \r\n        v-for=\"user in filteredUserList\" \r\n        :key=\"user._id\"\r\n        class=\"user-item\"\r\n        :class=\"{ 'inactive': user.status !== 'active', 'editing': editingUserId === user._id }\"\r\n      >\r\n        <!-- Áî®Êà∑‰ø°ÊÅØ -->\r\n        <view class=\"user-info\">\r\n          <view class=\"user-avatar\">\r\n            {{ user.name.substr(0, 1) }}\r\n          </view>\r\n          <view class=\"user-details\">\r\n            <view class=\"user-name\">\r\n              <text>{{ user.name }}</text>\r\n              <text \r\n                class=\"role-tag\" \r\n                :class=\"'role-' + user.role\"\r\n              >\r\n                {{ user.roleText }}\r\n              </text>\r\n            </view>\r\n            <view class=\"user-meta\">\r\n              <text class=\"meta-item\">ÂÆûÂêçÔºö{{ user.realName || 'Êú™ËÆæÁΩÆ' }}</text>\r\n            </view>\r\n            <view class=\"user-meta\">\r\n              <text class=\"meta-item\">{{ user.phone }}</text>\r\n            </view>\r\n            <view class=\"user-meta\" v-if=\"user.lastLogin\">\r\n              <text class=\"meta-item\">\r\n                ÊúÄËøëÁôªÂΩï: {{ formatTime(user.lastLogin) }}\r\n              </text>\r\n            </view>\r\n          </view>\r\n        </view>\r\n        \r\n        <!-- Êìç‰ΩúÊåâÈíÆ -->\r\n        <view class=\"user-actions\">\r\n          <button \r\n            class=\"btn-action btn-edit\" \r\n            @click=\"editUser(user)\"\r\n            :disabled=\"user.openid === currentUserOpenid\"\r\n          >\r\n            {{ editingUserId === user._id ? 'Êî∂Ëµ∑' : 'ÁºñËæë' }}\r\n          </button>\r\n          <button \r\n            class=\"btn-action btn-toggle\" \r\n            @click=\"toggleUserStatus(user)\"\r\n            :disabled=\"user.openid === currentUserOpenid\"\r\n          >\r\n            {{ user.status === 'active' ? 'Á¶ÅÁî®' : 'ÂêØÁî®' }}\r\n          </button>\r\n          <button \r\n            class=\"btn-action btn-delete\" \r\n            @click=\"deleteUser(user)\"\r\n            :disabled=\"user.openid === currentUserOpenid\"\r\n          >\r\n            Âà†Èô§\r\n          </button>\r\n        </view>\r\n        \r\n        <!-- ÂéüÂú∞ÁºñËæëË°®Âçï -->\r\n        <view v-if=\"editingUserId === user._id\" class=\"inline-edit-form\">\r\n          <view class=\"edit-form-header\">\r\n            <text class=\"edit-form-title\">ÁºñËæëÁî®Êà∑‰ø°ÊÅØ</text>\r\n          </view>\r\n          \r\n          <view class=\"edit-form-body\">\r\n            <!-- Êîπ‰∏∫Â±ïÁ§∫ÂæÆ‰ø°Âè∑ÔºåÊñπ‰æøÁÆ°ÁêÜÂëòÊåâÂæÆ‰ø°Âè∑ÁÆ°ÁêÜÁî®Êà∑ -->\r\n          <view class=\"inline-form-item\">\r\n            <text class=\"inline-label\">ÂæÆ‰ø°Âè∑</text>\r\n            <input \r\n              v-model=\"form.wechatId\" \r\n              class=\"inline-input\"\r\n              placeholder=\"ËØ∑ËæìÂÖ•ÂæÆ‰ø°Âè∑ÔºàÊàñÂîØ‰∏ÄÂ§áÊ≥®ÂêçÔºâ\"\r\n            />\r\n          </view>\r\n            \r\n            <view class=\"inline-form-item\">\r\n              <text class=\"inline-label\">ÂßìÂêç *</text>\r\n              <input \r\n                v-model=\"form.name\" \r\n                class=\"inline-input\"\r\n                placeholder=\"ËØ∑ËæìÂÖ•ÂßìÂêç\"\r\n              />\r\n            </view>\r\n            \r\n            <view class=\"inline-form-item\">\r\n              <text class=\"inline-label\">ÂÆûÂêç *</text>\r\n              <input \r\n                v-model=\"form.realName\" \r\n                class=\"inline-input\"\r\n                placeholder=\"ËØ∑ËæìÂÖ•ÁúüÂÆûÂßìÂêçÔºà2-10‰∏™‰∏≠ÊñáÂ≠óÁ¨¶Ôºâ\"\r\n                maxlength=\"10\"\r\n              />\r\n            </view>\r\n            \r\n            <view class=\"inline-form-item\">\r\n              <text class=\"inline-label\">ÊòµÁß∞</text>\r\n              <input \r\n                v-model=\"form.nickname\" \r\n                class=\"inline-input\"\r\n                placeholder=\"ËØ∑ËæìÂÖ•ÊòµÁß∞ÔºàÂèØÈÄâÔºâ\"\r\n              />\r\n            </view>\r\n            \r\n            <view class=\"inline-form-item\">\r\n              <text class=\"inline-label\">ÊâãÊú∫Âè∑ *</text>\r\n              <input \r\n                v-model=\"form.phone\" \r\n                class=\"inline-input\"\r\n                type=\"number\"\r\n                placeholder=\"ËØ∑ËæìÂÖ•ÊâãÊú∫Âè∑\"\r\n              />\r\n            </view>\r\n            \r\n            <view class=\"inline-form-item\">\r\n              <text class=\"inline-label\">ËßíËâ≤ *</text>\r\n              <picker \r\n                :range=\"roleOptions\" \r\n                :range-key=\"'text'\"\r\n                :value=\"roleIndex\"\r\n                @change=\"onRoleChange\"\r\n              >\r\n                <view class=\"inline-picker\">\r\n                  <text>{{ form.roleText }}</text>\r\n                  <text class=\"picker-arrow\">‚ñº</text>\r\n                </view>\r\n              </picker>\r\n            </view>\r\n            \r\n            <view class=\"role-desc-inline\">\r\n              <text class=\"desc-icon\">üí°</text>\r\n              <text class=\"desc-text\">{{ getRoleDescription(form.role) }}</text>\r\n            </view>\r\n          </view>\r\n          \r\n          <view class=\"edit-form-footer\">\r\n            <button class=\"inline-btn btn-cancel\" @click=\"cancelEdit\">ÂèñÊ∂à</button>\r\n            <button class=\"inline-btn btn-save\" @click=\"submitForm\">‰øùÂ≠ò‰øÆÊîπ</button>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    \r\n    <!-- Á©∫Áä∂ÊÄÅÔºöÁ≥ªÁªüÂ∞öÊó†‰ªª‰ΩïÁî®Êà∑ -->\r\n    <view v-if=\"totalUsers === 0\" class=\"empty-state\">\r\n      <text class=\"empty-icon\">üë§</text>\r\n      <text class=\"empty-text\">ÂΩìÂâçËøòÊ≤°ÊúâÁî®Êà∑ÔºåËØ∑ÁÇπÂáªÂè≥‰∏äËßí‚ÄúÊ∑ªÂä†Áî®Êà∑‚Äù</text>\r\n    </view>\r\n    \r\n    <!-- Á©∫Áä∂ÊÄÅÔºöÊúâÁî®Êà∑Ôºå‰ΩÜÂΩìÂâçÁ≠õÈÄâÊó†ÁªìÊûú -->\r\n    <view v-else-if=\"filteredUserList.length === 0\" class=\"empty-state tip\">\r\n      <text class=\"empty-text\">ÂΩìÂâçÁ≠õÈÄâÊù°‰ª∂‰∏ãÊöÇÊó†Áî®Êà∑ÔºåËØ∑Ë∞ÉÊï¥Á≠õÈÄâÊù°‰ª∂</text>\r\n    </view>\r\n    \r\n    <!-- Ê∑ªÂä†/ÁºñËæëÁî®Êà∑ÂºπÂ±ÇÔºö‰ªÖÂú® showDialog ‰∏∫ true Êó∂ÊòæÁ§∫ -->\r\n    <view v-if=\"showDialog\" class=\"dialog-mask\" @tap=\"closeDialog\">\r\n      <view class=\"dialog-new\" @tap.stop>\r\n        <!-- Â§¥ÈÉ® -->\r\n        <view class=\"dialog-header-new\">\r\n          <view class=\"header-icon\">\r\n            <text class=\"icon-text\">{{ isEdit ? '‚úèÔ∏è' : 'üë§' }}</text>\r\n          </view>\r\n          <text class=\"dialog-title-new\">{{ isEdit ? 'ÁºñËæëÁî®Êà∑‰ø°ÊÅØ' : 'Áî®Êà∑‰ø°ÊÅØ' }}</text>\r\n          <text class=\"dialog-subtitle\">{{ isEdit ? '‰øÆÊîπÁî®Êà∑ÁöÑÂü∫Êú¨‰ø°ÊÅØ' : 'Â°´ÂÜôÁî®Êà∑ÁöÑÂü∫Êú¨‰ø°ÊÅØ' }}</text>\r\n        </view>\r\n        \r\n        <!-- Ë°®ÂçïÂå∫Âüü -->\r\n        <view class=\"dialog-body-new\">\r\n          <!-- ÂæÆ‰ø°Âè∑Ôºà‰æõÁÆ°ÁêÜÂëòÊåâÂæÆ‰ø°Âè∑ÁÆ°ÁêÜÊùÉÈôêÔºâ -->\r\n          <view class=\"form-group\">\r\n            <view class=\"form-label-new\">\r\n              <text class=\"label-text\">ÂæÆ‰ø°Âè∑</text>\r\n              <text class=\"required\">*</text>\r\n            </view>\r\n            <input \r\n              v-model=\"form.wechatId\" \r\n              class=\"form-input-new\"\r\n              placeholder=\"ËØ∑ËæìÂÖ•ÂæÆ‰ø°Âè∑ÔºàÊàñÁÆ°ÁêÜÂëòÂΩïÂÖ•ÁöÑÂ§áÊ≥®ÂêçÔºâ\"\r\n            />\r\n            <text class=\"form-hint\" v-if=\"!isEdit\">ËØ∑Â°´ÂÜôÁÆ°ÁêÜÂëòÂú®ÂêéÂè∞È¢ÑÁïôÁöÑÂæÆ‰ø°Âè∑ÔºåÁî®‰∫éÁªëÂÆöÊùÉÈôê</text>\r\n          </view>\r\n          \r\n          <!-- ÂßìÂêçÂíåÂÆûÂêç -->\r\n          <view class=\"form-row\">\r\n            <view class=\"form-group half\">\r\n              <view class=\"form-label-new\">\r\n                <text class=\"label-text\">ÂßìÂêç</text>\r\n                <text class=\"required\">*</text>\r\n              </view>\r\n              <input \r\n                v-model=\"form.name\" \r\n                class=\"form-input-new\"\r\n                placeholder=\"ËæìÂÖ•ÂßìÂêç\"\r\n              />\r\n            </view>\r\n            \r\n            <view class=\"form-group half\">\r\n              <view class=\"form-label-new\">\r\n                <text class=\"label-text\">ÂÆûÂêç</text>\r\n                <text class=\"required\">*</text>\r\n              </view>\r\n              <input \r\n                v-model=\"form.realName\" \r\n                class=\"form-input-new\"\r\n                placeholder=\"2-10‰∏™Â≠ó\"\r\n                maxlength=\"10\"\r\n              />\r\n            </view>\r\n          </view>\r\n          \r\n          <!-- ÊâãÊú∫Âè∑ -->\r\n          <view class=\"form-group\">\r\n            <view class=\"form-label-new\">\r\n              <text class=\"label-text\">ÊâãÊú∫Âè∑</text>\r\n              <text class=\"required\">*</text>\r\n            </view>\r\n            <input \r\n              v-model=\"form.phone\" \r\n              class=\"form-input-new\"\r\n              type=\"number\"\r\n              placeholder=\"ËæìÂÖ•11‰ΩçÊâãÊú∫Âè∑\"\r\n              maxlength=\"11\"\r\n            />\r\n          </view>\r\n          \r\n          <!-- ËßíËâ≤ÈÄâÊã© -->\r\n          <view class=\"form-group\">\r\n            <view class=\"form-label-new\">\r\n              <text class=\"label-text\">ËßíËâ≤ÊùÉÈôê</text>\r\n              <text class=\"required\">*</text>\r\n            </view>\r\n            <picker \r\n              :range=\"roleOptions\" \r\n              :range-key=\"'text'\"\r\n              :value=\"roleIndex\"\r\n              @change=\"onRoleChange\"\r\n            >\r\n              <view class=\"role-selector\">\r\n                <view class=\"role-left\">\r\n                  <text class=\"role-icon\">{{ getRoleIcon(form.role) }}</text>\r\n                  <view class=\"role-info\">\r\n                    <text class=\"role-name\">{{ form.roleText }}</text>\r\n                    <text class=\"role-desc-short\">{{ getRoleDescriptionShort(form.role) }}</text>\r\n                  </view>\r\n                </view>\r\n                <text class=\"select-arrow\">‚ñº</text>\r\n              </view>\r\n            </picker>\r\n          </view>\r\n        </view>\r\n        \r\n        <!-- Â∫ïÈÉ®ÊåâÈíÆ -->\r\n        <view class=\"dialog-footer-new\">\r\n          <button class=\"btn-new btn-cancel-new\" @click=\"closeDialog\">\r\n            <text class=\"btn-text-new\">ÂèñÊ∂à</text>\r\n          </button>\r\n          <button class=\"btn-new btn-confirm-new\" @click=\"submitForm\">\r\n            <text class=\"btn-icon-new\">{{ isEdit ? '‚úì' : '+' }}</text>\r\n            <text class=\"btn-text-new\">{{ isEdit ? '‰øùÂ≠ò‰øÆÊîπ' : 'Á´ãÂç≥Ê∑ªÂä†' }}</text>\r\n          </button>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</view>\r\n</template>\r\n\r\n<script>\r\nimport { authMixin, login } from '@/utils/auth.js'\r\nimport { hasPermission, ROLE_TEXT } from '@/utils/permission.js'\r\nexport default {\r\n  mixins: [authMixin],\r\n  \r\n  data() {\r\n    return {\r\n      // Áî®Êà∑ÂàóË°®\r\n      userList: [],\r\n      totalUsers: 0,\r\n      activeUsers: 0,\r\n      adminCount: 0,\r\n      \r\n      // ÂΩìÂâçÁôªÂΩïÁî®Êà∑ÁöÑopenid\r\n      currentUserOpenid: '',\r\n      \r\n      // Á≠õÈÄâ\r\n      roleFilter: [\r\n        { value: 'all', text: 'ÂÖ®ÈÉ®ËßíËâ≤' },\r\n        { value: 'admin', text: 'ÁÆ°ÁêÜÂëò' },\r\n        { value: 'project_manager', text: 'È°πÁõÆÁªèÁêÜ' },\r\n        { value: 'doctor', text: 'ÂåªÁîü' },\r\n        { value: 'pharmacy', text: 'ËçØÊàø‰∫∫Âëò' },\r\n        { value: 'viewer', text: 'Êü•ÁúãËÄÖ' }\r\n      ],\r\n      selectedRole: 'all',\r\n      selectedRoleText: 'ÂÖ®ÈÉ®ËßíËâ≤',\r\n      \r\n      statusFilter: [\r\n        { value: 'all', text: 'ÂÖ®ÈÉ®Áä∂ÊÄÅ' },\r\n        { value: 'active', text: 'Â∑≤ÂêØÁî®' },\r\n        { value: 'inactive', text: 'Â∑≤Á¶ÅÁî®' }\r\n      ],\r\n      selectedStatus: 'all',\r\n      selectedStatusText: 'ÂÖ®ÈÉ®Áä∂ÊÄÅ',\r\n      \r\n      // ÂºπÁ™ó\r\n      showDialog: false,\r\n      isEdit: false,\r\n      editingUserId: null, // Ê≠£Âú®ÁºñËæëÁöÑÁî®Êà∑ID\r\n      \r\n      // ÁôªÂΩïÊ£ÄÊü•‰∏éÊùÉÈôê\r\n      isChecking: true,\r\n      isAuthorized: false,\r\n      unauthorizedMessage: 'ËØ∑ÂÖàÁôªÂΩï',\r\n      noPermission: false,\r\n      \r\n      // Ë°®Âçï\r\n      form: {\r\n        _id: '',\r\n        openid: '', // ‰ªÖÁî®‰∫éÂ±ïÁ§∫/ÂÖºÂÆπÔºåÊñ∞Â¢ûÊó∂‰∏çÂÜçÊâãÂä®Â°´ÂÜô\r\n        wechatId: '',\r\n        name: '',\r\n        realName: '',\r\n        nickname: '',\r\n        phone: '',\r\n        role: 'viewer',\r\n        roleText: 'Êü•ÁúãËÄÖ'\r\n      },\r\n      \r\n      roleOptions: [\r\n        { value: 'admin', text: 'ÁÆ°ÁêÜÂëò', desc: 'Êã•ÊúâÂÖ®ÈÉ®ÊùÉÈôêÔºåÂåÖÊã¨Áî®Êà∑ÁÆ°ÁêÜ' },\r\n        { value: 'project_manager', text: 'È°πÁõÆÁªèÁêÜ', desc: 'ÊúâÂÖ•Â∫ìÂ§çÊ†∏ÂäüËÉΩÔºåÂèØÊü•ÁúãÂêÑÁßçÊä•Ë°®ÔºåÂèØÁÆ°ÁêÜÁî®Êà∑' },\r\n        { value: 'doctor', text: 'ÂåªÂä°‰∫∫Âëò', desc: 'Ë¥üË¥£Èó®ËØäÁôªËÆ∞ÂíåÂá∫Â∫ìÔºåÊó†Á≥ªÁªüÁÆ°ÁêÜÊùÉÈôê' },\r\n        { value: 'viewer', text: 'Êü•ÁúãËÄÖ', desc: '‰ªÖÂèØÊü•ÁúãÊï∞ÊçÆÔºåÊó†ÁºñËæëÊùÉÈôê' }\r\n      ]\r\n    }\r\n  },\r\n  \r\n  computed: {\r\n    // ËøáÊª§ÂêéÁöÑÁî®Êà∑ÂàóË°®\r\n    filteredUserList() {\r\n      return this.userList.filter(user => {\r\n        const roleMatch = this.selectedRole === 'all' || user.role === this.selectedRole\r\n        const statusMatch = this.selectedStatus === 'all' || user.status === this.selectedStatus\r\n        return roleMatch && statusMatch\r\n      })\r\n    },\r\n    \r\n    // ËßíËâ≤ÈÄâÊã©Âô®ÂΩìÂâçÁ¥¢Âºï\r\n    roleIndex() {\r\n      return this.roleOptions.findIndex(item => item.value === this.form.role)\r\n    },\r\n    \r\n    // ÂΩìÂâçÁôªÂΩïËßíËâ≤ÁöÑ‰∏≠ÊñáÂêçÁß∞\r\n    currentRoleText() {\r\n      const role = this.userInfo?.role\r\n      if (!role) return 'Êú™ÁôªÂΩï'\r\n      return ROLE_TEXT[role] || 'Êú™Áü•ËßíËâ≤'\r\n    }\r\n  },\r\n  \r\n  async onLoad() {\r\n    // ÂÖàÊ£ÄÊü•ÁôªÂΩïÁä∂ÊÄÅ\r\n    await this.checkAuth()\r\n    \r\n    if (!this.isAuthorized) {\r\n      // Êú™ÁôªÂΩïÊàñÁôªÂΩïÊÄÅÂºÇÂ∏∏\r\n      this.unauthorizedMessage = 'ËØ∑ÂÖàÁôªÂΩïÂêéÂÜçËÆøÈóÆÁî®Êà∑ÁÆ°ÁêÜ'\r\n      return\r\n    }\r\n    \r\n    // Ê£ÄÊü•ÊòØÂê¶ÊúâÁî®Êà∑ÁÆ°ÁêÜÊùÉÈôêÔºà‰ªÖÁÆ°ÁêÜÂëò„ÄÅÈ°πÁõÆÁªèÁêÜÔºâ\r\n    const role = this.userInfo?.role\r\n    if (!role || !hasPermission(role, 'user.list')) {\r\n      this.noPermission = true\r\n      this.unauthorizedMessage = '‰ªÖÁÆ°ÁêÜÂëòÂíåÈ°πÁõÆÁªèÁêÜÂèØ‰ª•Êü•ÁúãÂíåÁÆ°ÁêÜÁî®Êà∑ÂàóË°®'\r\n      return\r\n    }\r\n    \r\n    // ÊúâÊùÉÈôêÔºåÂä†ËΩΩÊï∞ÊçÆ\r\n    this.noPermission = false\r\n    this.isAuthorized = true\r\n    this.currentUserOpenid = this.userInfo.openid\r\n    this.loadUserList()\r\n  },\r\n  \r\n  methods: {\r\n    // Ê£ÄÊü•ÊéàÊùÉ\r\n    async checkAuth() {\r\n      this.isChecking = true\r\n      \r\n      // Âº∫Âà∂Âà∑Êñ∞‰∏ÄÊ¨°ÁôªÂΩï‰ø°ÊÅØÔºåÈÅøÂÖç‰ΩøÁî®ËøáÊúüÁöÑÊú¨Âú∞ÁºìÂ≠òËßíËâ≤\r\n      let userInfo = null\r\n      try {\r\n        const result = await login()\r\n        \r\n        if (result.success) {\r\n          userInfo = result.userInfo\r\n        } else {\r\n          this.isChecking = false\r\n          this.isAuthorized = false\r\n          this.unauthorizedMessage = result.message || 'ËØ∑ÂÖàÁôªÂΩï'\r\n          return\r\n        }\r\n      } catch (err) {\r\n        console.error('ÁôªÂΩïÂ§±Ë¥•:', err)\r\n        this.isChecking = false\r\n        this.isAuthorized = false\r\n        this.unauthorizedMessage = 'ÁôªÂΩïÂ§±Ë¥•ÔºåËØ∑ÈáçËØï'\r\n        return\r\n      }\r\n      \r\n      // Ê£ÄÊü•ÊùÉÈôêÔºàÁÆ°ÁêÜÂëòÂíåÈ°πÁõÆÁªèÁêÜÔºâ\r\n      if (userInfo.role !== 'admin' && userInfo.role !== 'project_manager') {\r\n        this.isChecking = false\r\n        this.isAuthorized = false\r\n        this.unauthorizedMessage = 'ÊùÉÈôê‰∏çË∂≥Ôºå‰ªÖÁÆ°ÁêÜÂëòÂíåÈ°πÁõÆÁªèÁêÜÂèØËÆøÈóÆÁî®Êà∑ÁÆ°ÁêÜ'\r\n        return\r\n      }\r\n      \r\n      // ÊéàÊùÉÈÄöËøá\r\n      this.userInfo = userInfo\r\n      this.isChecking = false\r\n      this.isAuthorized = true\r\n    },\r\n    \r\n    // ËøîÂõû\r\n    handleGoBack() {\r\n      uni.navigateBack()\r\n    },\r\n    \r\n    // Âä†ËΩΩÁî®Êà∑ÂàóË°®\r\n    async loadUserList() {\r\n      uni.showLoading({ title: 'Âä†ËΩΩ‰∏≠...' })\r\n      \r\n      try {\r\n        const res = await wx.cloud.callFunction({\r\n          name: 'getUserList',\r\n          data: {}\r\n        })\r\n        \r\n        uni.hideLoading()\r\n        const result = res.result || {}\r\n\r\n        if (result.code !== 0) {\r\n          this.unauthorizedMessage = result.message || 'Ëé∑ÂèñÁî®Êà∑ÂàóË°®Â§±Ë¥•'\r\n          if (result.code === 403) {\r\n            // ‰∫ëÂáΩÊï∞Â±ÇÈù¢‰πüÂÅö‰∫ÜÊùÉÈôêÊ†°È™å\r\n            this.noPermission = true\r\n          }\r\n          uni.showToast({\r\n            title: result.message || 'Ëé∑ÂèñÁî®Êà∑ÂàóË°®Â§±Ë¥•',\r\n            icon: 'none'\r\n          })\r\n          return\r\n        }\r\n        \r\n        this.userList = result.data || []\r\n        this.updateStats()\r\n      } catch (err) {\r\n        uni.hideLoading()\r\n        console.error('Âä†ËΩΩÁî®Êà∑ÂàóË°®Â§±Ë¥•:', err)\r\n        uni.showToast({\r\n          title: 'Âä†ËΩΩÂ§±Ë¥•',\r\n          icon: 'none'\r\n        })\r\n      }\r\n    },\r\n    \r\n    // Êõ¥Êñ∞ÁªüËÆ°Êï∞ÊçÆ\r\n    updateStats() {\r\n      this.totalUsers = this.userList.length\r\n      this.activeUsers = this.userList.filter(u => u.status === 'active').length\r\n      this.adminCount = this.userList.filter(u => u.role === 'admin').length\r\n    },\r\n    \r\n    // ËßíËâ≤Á≠õÈÄâ\r\n    onRoleFilterChange(e) {\r\n      const index = e.detail.value\r\n      this.selectedRole = this.roleFilter[index].value\r\n      this.selectedRoleText = this.roleFilter[index].text\r\n    },\r\n    \r\n    // Áä∂ÊÄÅÁ≠õÈÄâ\r\n    onStatusFilterChange(e) {\r\n      const index = e.detail.value\r\n      this.selectedStatus = this.statusFilter[index].value\r\n      this.selectedStatusText = this.statusFilter[index].text\r\n    },\r\n    \r\n    // ÊòæÁ§∫Ê∑ªÂä†ÂºπÁ™ó\r\n    showAddDialog() {\r\n      this.isEdit = false\r\n      this.form = {\r\n        _id: '',\r\n        openid: '',\r\n        name: '',\r\n        nickname: '',\r\n        phone: '',\r\n        role: 'viewer',\r\n        roleText: 'Êü•ÁúãËÄÖ'\r\n      }\r\n      this.showDialog = true\r\n    },\r\n    \r\n    // ÁºñËæëÁî®Êà∑\r\n    editUser(user) {\r\n      if (user.openid === this.currentUserOpenid) {\r\n        uni.showToast({\r\n          title: '‰∏çËÉΩÁºñËæëËá™Â∑±ÁöÑË¥¶Âè∑',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n      \r\n      // Â¶ÇÊûúÂ∑≤ÁªèÂú®ÁºñËæëËøô‰∏™Áî®Êà∑ÔºåÂàôÊî∂Ëµ∑\r\n      if (this.editingUserId === user._id) {\r\n        this.editingUserId = null\r\n        return\r\n      }\r\n      \r\n      // Â±ïÂºÄÁºñËæëË°®Âçï\r\n      this.editingUserId = user._id\r\n      this.isEdit = true\r\n      this.form = {\r\n        _id: user._id,\r\n        openid: user.openid,\r\n        wechatId: user.wechatId || '',\r\n        name: user.name,\r\n        realName: user.realName || user.name,\r\n        nickname: user.nickname || '',\r\n        phone: user.phone,\r\n        role: user.role,\r\n        roleText: user.roleText\r\n      }\r\n    },\r\n    \r\n    // ÂèñÊ∂àÁºñËæë\r\n    cancelEdit() {\r\n      this.editingUserId = null\r\n      this.form = {\r\n        _id: '',\r\n        wechatId: '',\r\n        name: '',\r\n        realName: '',\r\n        nickname: '',\r\n        phone: '',\r\n        role: 'viewer',\r\n        roleText: 'Êü•ÁúãËÄÖ'\r\n      }\r\n    },\r\n    \r\n    // ÂàáÊç¢Áî®Êà∑Áä∂ÊÄÅ\r\n    toggleUserStatus(user) {\r\n      // ‰ªçÁÑ∂Êåâ openid Èò≤Ê≠¢Á¶ÅÁî®Ëá™Â∑±ÁöÑË¥¶Âè∑\r\n      if (user.openid === this.currentUserOpenid) {\r\n        uni.showToast({\r\n          title: '‰∏çËÉΩÁ¶ÅÁî®Ëá™Â∑±ÁöÑË¥¶Âè∑',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n      \r\n      const newStatus = user.status === 'active' ? 'inactive' : 'active'\r\n      const actionText = newStatus === 'active' ? 'ÂêØÁî®' : 'Á¶ÅÁî®'\r\n      \r\n      uni.showModal({\r\n        title: 'Á°ÆËÆ§Êìç‰Ωú',\r\n        content: `Á°ÆÂÆöË¶Å${actionText}Áî®Êà∑ ${user.name} ÂêóÔºü`,\r\n        success: async (res) => {\r\n          if (res.confirm) {\r\n            await this.updateUserStatus(user._id, newStatus)\r\n          }\r\n        }\r\n      })\r\n    },\r\n    \r\n    // Êõ¥Êñ∞Áî®Êà∑Áä∂ÊÄÅ\r\n    async updateUserStatus(userId, status) {\r\n      uni.showLoading({ title: 'Â§ÑÁêÜ‰∏≠...' })\r\n      \r\n      try {\r\n        const res = await wx.cloud.callFunction({\r\n          name: 'updateUserStatus',\r\n          data: { userId, status }\r\n        })\r\n        \r\n        uni.hideLoading()\r\n        \r\n        if (res.result.code === 0) {\r\n          uni.showToast({\r\n            title: 'Êìç‰ΩúÊàêÂäü',\r\n            icon: 'success'\r\n          })\r\n          this.loadUserList()\r\n        } else {\r\n          uni.showToast({\r\n            title: res.result.message || 'Êìç‰ΩúÂ§±Ë¥•',\r\n            icon: 'none'\r\n          })\r\n        }\r\n      } catch (err) {\r\n        uni.hideLoading()\r\n        console.error('Êõ¥Êñ∞Áä∂ÊÄÅÂ§±Ë¥•:', err)\r\n        uni.showToast({\r\n          title: 'Êìç‰ΩúÂ§±Ë¥•',\r\n          icon: 'none'\r\n        })\r\n      }\r\n    },\r\n    \r\n    // Âà†Èô§Áî®Êà∑\r\n    deleteUser(user) {\r\n      if (user.openid === this.currentUserOpenid) {\r\n        uni.showToast({\r\n          title: '‰∏çËÉΩÂà†Èô§Ëá™Â∑±ÁöÑË¥¶Âè∑',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n      \r\n      uni.showModal({\r\n        title: 'Á°ÆËÆ§Âà†Èô§',\r\n        content: `Á°ÆÂÆöË¶ÅÂà†Èô§Áî®Êà∑ ${user.name} ÂêóÔºü\\nÊ≠§Êìç‰Ωú‰∏çÂèØÊÅ¢Â§çÔºÅ`,\r\n        confirmColor: '#ff4d4f',\r\n        success: async (res) => {\r\n          if (res.confirm) {\r\n            await this.confirmDeleteUser(user._id)\r\n          }\r\n        }\r\n      })\r\n    },\r\n    \r\n    // Á°ÆËÆ§Âà†Èô§Áî®Êà∑\r\n    async confirmDeleteUser(userId) {\r\n      uni.showLoading({ title: 'Âà†Èô§‰∏≠...' })\r\n      \r\n      try {\r\n        const res = await wx.cloud.callFunction({\r\n          name: 'deleteUser',\r\n          data: { userId }\r\n        })\r\n        \r\n        uni.hideLoading()\r\n        \r\n        if (res.result.code === 0) {\r\n          uni.showToast({\r\n            title: 'Âà†Èô§ÊàêÂäü',\r\n            icon: 'success'\r\n          })\r\n          this.loadUserList()\r\n        } else {\r\n          uni.showToast({\r\n            title: res.result.message || 'Âà†Èô§Â§±Ë¥•',\r\n            icon: 'none'\r\n          })\r\n        }\r\n      } catch (err) {\r\n        uni.hideLoading()\r\n        console.error('Âà†Èô§Áî®Êà∑Â§±Ë¥•:', err)\r\n        uni.showToast({\r\n          title: 'Âà†Èô§Â§±Ë¥•',\r\n          icon: 'none'\r\n        })\r\n      }\r\n    },\r\n    \r\n    // ËßíËâ≤ÈÄâÊã©\r\n    onRoleChange(e) {\r\n      const index = e.detail.value\r\n      this.form.role = this.roleOptions[index].value\r\n      this.form.roleText = this.roleOptions[index].text\r\n    },\r\n    \r\n    // Ëé∑ÂèñËßíËâ≤ËØ¥Êòé\r\n    getRoleDescription(role) {\r\n      const item = this.roleOptions.find(r => r.value === role)\r\n      return item ? item.desc : ''\r\n    },\r\n    \r\n    // Ëé∑ÂèñËßíËâ≤ÂõæÊ†á\r\n    getRoleIcon(role) {\r\n      const iconMap = {\r\n        'admin': 'üëë',\r\n        'project_manager': 'üëî',\r\n        'doctor': 'üë®‚Äç‚öïÔ∏è',\r\n        'pharmacy': 'üíä',\r\n        'viewer': 'üëÅÔ∏è'\r\n      }\r\n      return iconMap[role] || 'üë§'\r\n    },\r\n    \r\n    // Ëé∑ÂèñËßíËâ≤ÁÆÄÁü≠ËØ¥Êòé\r\n    getRoleDescriptionShort(role) {\r\n      const descMap = {\r\n        'admin': 'Á≥ªÁªüÁÆ°ÁêÜÂëò',\r\n        'project_manager': 'È°πÁõÆÁÆ°ÁêÜ',\r\n        'doctor': 'ÂåªÁñó‰∫∫Âëò',\r\n        'pharmacy': 'ËçØÊàøÁÆ°ÁêÜ',\r\n        'viewer': '‰ªÖÊü•Áúã'\r\n      }\r\n      return descMap[role] || 'Êú™Áü•ËßíËâ≤'\r\n    },\r\n    \r\n    // ÂÖ≥Èó≠ÂºπÁ™ó\r\n    closeDialog() {\r\n      this.showDialog = false\r\n      this.editingUserId = null\r\n      this.isEdit = false\r\n      this.form = {\r\n        openid: '',\r\n        name: '',\r\n        realName: '',\r\n        nickname: '',\r\n        phone: '',\r\n        role: 'viewer',\r\n        roleText: 'Êü•ÁúãËÄÖ'\r\n      }\r\n    },\r\n    \r\n    // Êèê‰∫§Ë°®Âçï\r\n    async submitForm() {\r\n      // È™åËØÅË°®Âçï\r\n      if (!this.form.wechatId || !this.form.name || !this.form.realName || !this.form.phone) {\r\n        uni.showToast({\r\n          title: 'ËØ∑Â°´ÂÜôÂÆåÊï¥‰ø°ÊÅØÔºàÂæÆ‰ø°Âè∑„ÄÅÂßìÂêç„ÄÅÂÆûÂêç„ÄÅÊâãÊú∫Âè∑Ôºâ',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n      \r\n      // È™åËØÅÂÆûÂêçÊ†ºÂºè\r\n      if (!/^[\\u4e00-\\u9fa5]{2,10}$/.test(this.form.realName)) {\r\n        uni.showToast({\r\n          title: 'ÂÆûÂêçÊ†ºÂºè‰∏çÊ≠£Á°ÆÔºåËØ∑ËæìÂÖ•2-10‰∏™‰∏≠ÊñáÂ≠óÁ¨¶',\r\n          icon: 'none',\r\n          duration: 2000\r\n        })\r\n        return\r\n      }\r\n      \r\n      // È™åËØÅÊâãÊú∫Âè∑\r\n      if (!/^1[3-9]\\d{9}$/.test(this.form.phone)) {\r\n        uni.showToast({\r\n          title: 'ÊâãÊú∫Âè∑Ê†ºÂºè‰∏çÊ≠£Á°Æ',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n      \r\n      if (this.isEdit) {\r\n        await this.updateUser()\r\n      } else {\r\n        await this.addUser()\r\n      }\r\n    },\r\n    \r\n    // Ê∑ªÂä†Áî®Êà∑\r\n    async addUser() {\r\n      uni.showLoading({ title: 'Ê∑ªÂä†‰∏≠...' })\r\n      \r\n      try {\r\n        const res = await wx.cloud.callFunction({\r\n          name: 'addUser',\r\n          data: {\r\n            // Êñ∞Â¢ûÁî®Êà∑Êó∂Âè™ÈúÄÊèê‰æõ wechatIdÔºåopenid Â∞ÜÂú®È¶ñÊ¨°ÁôªÂΩïÊó∂Ëá™Âä®ÁªëÂÆö\r\n            wechatId: this.form.wechatId,\r\n            name: this.form.name,\r\n            realName: this.form.realName,\r\n            nickname: this.form.nickname || this.form.name,\r\n            phone: this.form.phone,\r\n            role: this.form.role\r\n          }\r\n        })\r\n        \r\n        uni.hideLoading()\r\n        \r\n        if (res.result.code === 0) {\r\n          uni.showToast({\r\n            title: 'Ê∑ªÂä†ÊàêÂäü',\r\n            icon: 'success'\r\n          })\r\n          this.editingUserId = null\r\n          this.closeDialog()\r\n          this.loadUserList()\r\n        } else {\r\n          uni.showToast({\r\n            title: res.result.message || 'Ê∑ªÂä†Â§±Ë¥•',\r\n            icon: 'none',\r\n            duration: 2000\r\n          })\r\n        }\r\n      } catch (err) {\r\n        uni.hideLoading()\r\n        console.error('Ê∑ªÂä†Áî®Êà∑Â§±Ë¥•:', err)\r\n        uni.showToast({\r\n          title: 'Ê∑ªÂä†Â§±Ë¥•',\r\n          icon: 'none'\r\n        })\r\n      }\r\n    },\r\n    \r\n    // Êõ¥Êñ∞Áî®Êà∑\r\n    async updateUser() {\r\n      uni.showLoading({ title: '‰øùÂ≠ò‰∏≠...' })\r\n      \r\n      try {\r\n        const res = await wx.cloud.callFunction({\r\n          name: 'updateUser',\r\n          data: {\r\n            userId: this.form._id,\r\n            name: this.form.name,\r\n            realName: this.form.realName,\r\n            nickname: this.form.nickname || this.form.name,\r\n            phone: this.form.phone,\r\n            role: this.form.role\r\n          }\r\n        })\r\n        \r\n        uni.hideLoading()\r\n        \r\n        if (res.result.code === 0) {\r\n          uni.showToast({\r\n            title: '‰øùÂ≠òÊàêÂäü',\r\n            icon: 'success'\r\n          })\r\n          this.editingUserId = null\r\n          this.closeDialog()\r\n          this.loadUserList()\r\n        } else {\r\n          uni.showToast({\r\n            title: res.result.message || '‰øùÂ≠òÂ§±Ë¥•',\r\n            icon: 'none'\r\n          })\r\n        }\r\n      } catch (err) {\r\n        uni.hideLoading()\r\n        console.error('Êõ¥Êñ∞Áî®Êà∑Â§±Ë¥•:', err)\r\n        uni.showToast({\r\n          title: '‰øùÂ≠òÂ§±Ë¥•',\r\n          icon: 'none'\r\n        })\r\n      }\r\n    },\r\n    \r\n    // Ê†ºÂºèÂåñÊó∂Èó¥\r\n    formatTime(dateStr) {\r\n      if (!dateStr) return 'Êú™ÁôªÂΩï'\r\n      \r\n      const date = new Date(dateStr)\r\n      const now = new Date()\r\n      const diff = now - date\r\n      \r\n      // 1ÂàÜÈíüÂÜÖ\r\n      if (diff < 60000) {\r\n        return 'ÂàöÂàö'\r\n      }\r\n      \r\n      // 1Â∞èÊó∂ÂÜÖ\r\n      if (diff < 3600000) {\r\n        return Math.floor(diff / 60000) + 'ÂàÜÈíüÂâç'\r\n      }\r\n      \r\n      // ‰ªäÂ§©\r\n      if (date.toDateString() === now.toDateString()) {\r\n        return date.toTimeString().substr(0, 5)\r\n      }\r\n      \r\n      // Êú¨Âπ¥\r\n      if (date.getFullYear() === now.getFullYear()) {\r\n        return `${date.getMonth() + 1}-${date.getDate()}`\r\n      }\r\n      \r\n      // ÂÖ∂‰ªñ\r\n      return `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()}`\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.user-management {\r\n  min-height: 100vh;\r\n  background-color: #f5f6f8;\r\n  padding-bottom: 30rpx;\r\n}\r\n\r\n/* ÁôªÂΩïÊ£ÄÊü•‰∏≠ */\r\n.checking-container {\r\n  min-height: 100vh;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: #f5f6f8;\r\n  \r\n  .checking-content {\r\n    text-align: center;\r\n    \r\n    .checking-text {\r\n      font-size: 28rpx;\r\n      color: #666;\r\n    }\r\n  }\r\n}\r\n\r\n/* Êú™ÊéàÊùÉÊèêÁ§∫ */\r\n.unauthorized-container {\r\n  min-height: 100vh;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background: #f5f6f8;\r\n  padding: 40rpx;\r\n  \r\n  .unauthorized-content {\r\n    background: white;\r\n    border-radius: 20rpx;\r\n    padding: 60rpx 40rpx;\r\n    text-align: center;\r\n    box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.08);\r\n    max-width: 600rpx;\r\n    width: 100%;\r\n    \r\n    .unauthorized-icon {\r\n      font-size: 80rpx;\r\n      display: block;\r\n      margin-bottom: 30rpx;\r\n    }\r\n    \r\n    .unauthorized-title {\r\n      display: block;\r\n      font-size: 36rpx;\r\n      font-weight: bold;\r\n      color: #333;\r\n      margin-bottom: 20rpx;\r\n    }\r\n    \r\n    .unauthorized-text {\r\n      display: block;\r\n      font-size: 28rpx;\r\n      color: #666;\r\n      margin-bottom: 40rpx;\r\n      line-height: 1.6;\r\n    }\r\n    \r\n    .unauthorized-btn {\r\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n      padding: 24rpx 60rpx;\r\n      border-radius: 50rpx;\r\n      display: inline-block;\r\n      box-shadow: 0 4rpx 12rpx rgba(102, 126, 234, 0.3);\r\n      \r\n      .btn-text {\r\n        color: white;\r\n        font-size: 28rpx;\r\n        font-weight: 500;\r\n      }\r\n      \r\n      &:active {\r\n        transform: scale(0.98);\r\n        box-shadow: 0 2rpx 8rpx rgba(102, 126, 234, 0.4);\r\n      }\r\n    }\r\n  }\r\n\r\n  .edit-form-footer {\r\n    margin-top: 12rpx;\r\n  }\r\n}\r\n\r\n// È°∂ÈÉ®Â∑•ÂÖ∑Ê†èÔºöÊîπ‰∏∫ÁôΩËâ≤ÂúÜËßíÂç°ÁâáÔºåÁªü‰∏ÄÈ£éÊ†º\r\n.page-toolbar {\r\n  margin: 20rpx 24rpx 10rpx;\r\n  padding: 18rpx 22rpx;\r\n  background: #ffffff;\r\n  border-radius: 26rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  box-shadow: 0 10rpx 24rpx rgba(15, 23, 42, 0.08);\r\n\r\n  .toolbar-role {\r\n    font-size: 26rpx;\r\n    color: #4b5563;\r\n  }\r\n\r\n  .btn-add {\r\n    min-width: 180rpx;\r\n    height: 60rpx;\r\n    line-height: 60rpx;\r\n    padding: 0 26rpx;\r\n    background: linear-gradient(135deg, #fb923c 0%, #f97316 100%);\r\n    color: #ffffff;\r\n    border-radius: 999rpx;\r\n    font-size: 26rpx;\r\n    border: none;\r\n    text-align: center;\r\n  }\r\n}\r\n\r\n// ÁªüËÆ°Âç°Áâá\r\n.stats-card {\r\n  display: flex;\r\n  margin: 20rpx;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  border-radius: 20rpx;\r\n  padding: 30rpx;\r\n  \r\n  .stat-item {\r\n    flex: 1;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    color: #fff;\r\n    \r\n    &:not(:last-child) {\r\n      border-right: 1px solid rgba(255, 255, 255, 0.3);\r\n    }\r\n    \r\n    .stat-value {\r\n      font-size: 48rpx;\r\n      font-weight: bold;\r\n      margin-bottom: 10rpx;\r\n    }\r\n    \r\n    .stat-label {\r\n      font-size: 24rpx;\r\n      opacity: 0.8;\r\n    }\r\n  }\r\n}\r\n\r\n// Á≠õÈÄâÊ†è\r\n.filter-bar {\r\n  display: flex;\r\n  padding: 20rpx;\r\n  background: #fff;\r\n  margin: 20rpx;\r\n  border-radius: 16rpx;\r\n  \r\n  .filter-item {\r\n    flex: 1;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 16rpx 24rpx;\r\n    background: #f5f7fa;\r\n    border-radius: 12rpx;\r\n    font-size: 28rpx;\r\n    color: #666;\r\n    \r\n    &:not(:last-child) {\r\n      margin-right: 20rpx;\r\n    }\r\n    \r\n    .arrow {\r\n      font-size: 20rpx;\r\n      color: #999;\r\n    }\r\n  }\r\n}\r\n\r\n// Áî®Êà∑ÂàóË°®\r\n.user-list {\r\n  padding: 0 20rpx;\r\n}\r\n\r\n.user-item {\r\n  background: #fff;\r\n  border-radius: 16rpx;\r\n  padding: 30rpx;\r\n  margin-bottom: 20rpx;\r\n  transition: all 0.3s;\r\n  \r\n  &.inactive {\r\n    opacity: 0.6;\r\n  }\r\n  \r\n  &.editing {\r\n    background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);\r\n    border: 2rpx solid #667eea;\r\n    box-shadow: 0 4rpx 16rpx rgba(102, 126, 234, 0.15);\r\n  }\r\n  \r\n  .user-info {\r\n    display: flex;\r\n    margin-bottom: 20rpx;\r\n    \r\n    .user-avatar {\r\n      width: 80rpx;\r\n      height: 80rpx;\r\n      border-radius: 50%;\r\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n      color: #fff;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      font-size: 32rpx;\r\n      font-weight: bold;\r\n      margin-right: 20rpx;\r\n      flex-shrink: 0;\r\n    }\r\n    \r\n    .user-details {\r\n      flex: 1;\r\n      \r\n      .user-name {\r\n        display: flex;\r\n        align-items: center;\r\n        font-size: 32rpx;\r\n        font-weight: bold;\r\n        color: #333;\r\n        margin-bottom: 12rpx;\r\n        \r\n        .role-tag {\r\n          margin-left: 12rpx;\r\n          padding: 4rpx 12rpx;\r\n          border-radius: 8rpx;\r\n          font-size: 22rpx;\r\n          font-weight: normal;\r\n          \r\n          &.role-admin {\r\n            background: #ffe7e7;\r\n            color: #ff4d4f;\r\n          }\r\n          \r\n          &.role-pharmacy {\r\n            background: #e7f7ff;\r\n            color: #1890ff;\r\n          }\r\n          \r\n          &.role-viewer {\r\n            background: #f0f0f0;\r\n            color: #666;\r\n          }\r\n        }\r\n      }\r\n      \r\n      .user-meta {\r\n        font-size: 24rpx;\r\n        color: #999;\r\n        margin-top: 8rpx;\r\n        \r\n        .meta-item {\r\n          margin-right: 30rpx;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  .user-actions {\r\n    display: flex;\r\n    border-top: 1px solid #f0f0f0;\r\n    padding-top: 20rpx;\r\n    \r\n    .btn-action {\r\n      flex: 1;\r\n      padding: 16rpx;\r\n      border-radius: 12rpx;\r\n      font-size: 26rpx;\r\n      border: none;\r\n      \r\n      &:not(:last-child) {\r\n        margin-right: 16rpx;\r\n      }\r\n      \r\n      &.btn-edit {\r\n        background: #e7f7ff;\r\n        color: #1890ff;\r\n      }\r\n      \r\n      &.btn-toggle {\r\n        background: #fff7e6;\r\n        color: #fa8c16;\r\n      }\r\n      \r\n      &.btn-delete {\r\n        background: #fff1f0;\r\n        color: #ff4d4f;\r\n      }\r\n      \r\n      &:disabled {\r\n        opacity: 0.4;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// Á©∫Áä∂ÊÄÅ\r\n.empty-state {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  padding: 40rpx 0; // ÂÜçÂêë‰∏äÊî∂Á¥ßÔºå‰ΩøÂ§¥ÂÉèÊõ¥Èù†‰∏ä\r\n  \r\n  .empty-icon {\r\n    font-size: 96rpx;      // Áï•ÂæÆÁº©Â∞èÂ§¥ÂÉè\r\n    margin-bottom: 8rpx;   // Â§¥ÂÉèÂíåÊèêÁ§∫ÊñáÂ≠óÊõ¥Á¥ßÂáë\r\n  }\r\n  \r\n  .empty-text {\r\n    font-size: 28rpx;\r\n    color: #999;\r\n  }\r\n}\r\n\r\n// ÊóßÂºπÁ™óÊ†∑ÂºèÔºà‰øùÁïôÔºâ\r\n.dialog {\r\n  width: 640rpx;\r\n  background: #fff;\r\n  border-radius: 24rpx;\r\n  overflow: hidden;\r\n  box-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.15);\r\n  \r\n  .dialog-header {\r\n    padding: 32rpx 32rpx 24rpx;\r\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n    \r\n    .dialog-title {\r\n      font-size: 36rpx;\r\n      font-weight: bold;\r\n      color: #fff;\r\n    }\r\n  }\r\n  \r\n  .dialog-body {\r\n    padding: 24rpx 32rpx;\r\n    max-height: 65vh;\r\n    overflow-y: auto;\r\n    \r\n    .form-item {\r\n      margin-bottom: 24rpx;\r\n      \r\n      .form-label {\r\n        display: block;\r\n        font-size: 32rpx;\r\n        font-weight: 600;\r\n        color: #333;\r\n        margin-bottom: 12rpx;\r\n      }\r\n      \r\n      .form-input {\r\n        width: 100%;\r\n        padding: 24rpx 20rpx;\r\n        background: #f8f9fa;\r\n        border: 2rpx solid #e9ecef;\r\n        border-radius: 12rpx;\r\n        font-size: 32rpx;\r\n        color: #333;\r\n        transition: all 0.3s;\r\n        \r\n        &:focus {\r\n          background: #fff;\r\n          border-color: #667eea;\r\n        }\r\n      }\r\n      \r\n      .form-picker {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        padding: 24rpx 20rpx;\r\n        background: #f8f9fa;\r\n        border: 2rpx solid #e9ecef;\r\n        border-radius: 12rpx;\r\n        font-size: 32rpx;\r\n        color: #333;\r\n        font-weight: 500;\r\n        \r\n        .arrow {\r\n          font-size: 24rpx;\r\n          color: #667eea;\r\n        }\r\n      }\r\n      \r\n      .form-tip {\r\n        display: block;\r\n        font-size: 24rpx;\r\n        color: #999;\r\n        margin-top: 8rpx;\r\n        padding-left: 4rpx;\r\n      }\r\n    }\r\n    \r\n    .role-description {\r\n      padding: 20rpx 24rpx;\r\n      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\r\n      border-left: 4rpx solid #667eea;\r\n      border-radius: 12rpx;\r\n      \r\n      .desc-title {\r\n        display: block;\r\n        font-size: 28rpx;\r\n        font-weight: 600;\r\n        color: #667eea;\r\n        margin-bottom: 8rpx;\r\n      }\r\n      \r\n      .desc-content {\r\n        font-size: 28rpx;\r\n        color: #666;\r\n        line-height: 1.6;\r\n      }\r\n    }\r\n  }\r\n  \r\n  .dialog-footer {\r\n    display: flex;\r\n    padding: 24rpx 32rpx 32rpx;\r\n    gap: 16rpx;\r\n    \r\n    button {\r\n      flex: 1;\r\n      padding: 28rpx;\r\n      border-radius: 16rpx;\r\n      font-size: 32rpx;\r\n      font-weight: 600;\r\n      border: none;\r\n      transition: all 0.3s;\r\n      \r\n      &.btn-cancel {\r\n        background: #f8f9fa;\r\n        color: #666;\r\n        border: 2rpx solid #e9ecef;\r\n        \r\n        &:active {\r\n          background: #e9ecef;\r\n        }\r\n      }\r\n      \r\n      &.btn-confirm {\r\n        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n        color: #fff;\r\n        box-shadow: 0 4rpx 12rpx rgba(102, 126, 234, 0.4);\r\n        \r\n        &:active {\r\n          transform: scale(0.98);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// ÂéüÂú∞ÁºñËæëË°®Âçï\r\n.inline-edit-form {\r\n  margin-top: 12rpx;\r\n  border-top: 2rpx solid #e9ecef;\r\n  background: #fafbfc;\r\n  border-radius: 12rpx;\r\n  padding: 16rpx;\r\n  animation: slideDown 0.3s ease;\r\n  \r\n  .edit-form-header {\r\n    margin-bottom: 12rpx;\r\n    \r\n    .edit-form-title {\r\n      font-size: 32rpx;\r\n      font-weight: bold;\r\n      color: #667eea;\r\n      display: flex;\r\n      align-items: center;\r\n      \r\n      &::before {\r\n        content: '‚úèÔ∏è';\r\n        margin-right: 8rpx;\r\n      }\r\n    }\r\n  }\r\n  \r\n  .edit-form-body {\r\n    .inline-form-item {\r\n      margin-bottom: 14rpx;\r\n      \r\n      .inline-label {\r\n        display: block;\r\n        font-size: 26rpx;\r\n        font-weight: 600;\r\n        color: #333;\r\n        margin-bottom: 10rpx;\r\n      }\r\n      \r\n      .inline-input {\r\n        width: 100%;\r\n        padding: 16rpx 14rpx;\r\n        background: #fff;\r\n        border: 2rpx solid #e9ecef;\r\n        border-radius: 12rpx;\r\n        font-size: 28rpx;\r\n        color: #333;\r\n        transition: all 0.3s;\r\n        \r\n        &:focus {\r\n          border-color: #667eea;\r\n          background: #fff;\r\n        }\r\n        \r\n        &:disabled {\r\n          background: #f5f5f5;\r\n          color: #999;\r\n        }\r\n      }\r\n      \r\n      .inline-picker {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        padding: 16rpx 14rpx;\r\n        background: #fff;\r\n        border: 2rpx solid #e9ecef;\r\n        border-radius: 12rpx;\r\n        font-size: 28rpx;\r\n        color: #333;\r\n        font-weight: 500;\r\n        \r\n        .picker-arrow {\r\n          font-size: 22rpx;\r\n          color: #667eea;\r\n        }\r\n      }\r\n    }\r\n    \r\n    .role-desc-inline {\r\n      display: flex;\r\n      align-items: flex-start;\r\n      padding: 16rpx 20rpx;\r\n      background: linear-gradient(135deg, #fff7ed 0%, #ffe5cc 100%);\r\n      border-left: 4rpx solid #ff9500;\r\n      border-radius: 12rpx;\r\n      margin-top: 12rpx;\r\n      \r\n      .desc-icon {\r\n        font-size: 32rpx;\r\n        margin-right: 12rpx;\r\n        flex-shrink: 0;\r\n      }\r\n      \r\n      .desc-text {\r\n        font-size: 26rpx;\r\n        color: #666;\r\n        line-height: 1.6;\r\n        flex: 1;\r\n      }\r\n    }\r\n  }\r\n  \r\n  .edit-form-footer {\r\n    display: flex;\r\n    gap: 16rpx;\r\n    margin-top: 24rpx;\r\n    padding-top: 20rpx;\r\n    border-top: 1rpx solid #e9ecef;\r\n    \r\n    .inline-btn {\r\n      flex: 1;\r\n      padding: 24rpx;\r\n      border-radius: 14rpx;\r\n      font-size: 30rpx;\r\n      font-weight: 600;\r\n      border: none;\r\n      transition: all 0.3s;\r\n      \r\n      &.btn-cancel {\r\n        background: #fff;\r\n        color: #666;\r\n        border: 2rpx solid #e9ecef;\r\n        \r\n        &:active {\r\n          background: #f5f5f5;\r\n        }\r\n      }\r\n      \r\n      &.btn-save {\r\n        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n        color: #fff;\r\n        box-shadow: 0 4rpx 12rpx rgba(102, 126, 234, 0.4);\r\n        \r\n        &:active {\r\n          transform: scale(0.98);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n@keyframes slideDown {\r\n  from {\r\n    opacity: 0;\r\n    transform: translateY(-20rpx);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n}\r\n\r\n// ============ Êñ∞ÁâàÂºπÁ™óÊ†∑Âºè ============\r\n.dialog-new {\r\n  width: 640rpx; \r\n  background: #ffffff;\r\n  border-radius: 24rpx;\r\n  overflow: hidden;\r\n  box-shadow: 0 8rpx 32rpx rgba(15, 23, 42, 0.16);\r\n  margin: -190rpx auto 40rpx; // ÂºπÁ™óÊï¥‰ΩìÂÜç‰∏äÁßª‰∏ÄÁÇπ\r\n}\r\n\r\n// Â§¥ÈÉ®Âå∫Âüü\r\n.dialog-header-new {\r\n  background: linear-gradient(135deg, #6d8bff 0%, #8e7bff 100%);\r\n  padding: 32rpx 32rpx 24rpx;\r\n  text-align: center;\r\n  position: relative;\r\n  \r\n  .header-icon {\r\n    width: 72rpx;\r\n    height: 72rpx;\r\n    background: rgba(255, 255, 255, 0.18);\r\n    border-radius: 50%;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    margin: 0 auto 14rpx;\r\n    backdrop-filter: blur(10rpx);\r\n    border: 2rpx solid rgba(255, 255, 255, 0.3);\r\n    \r\n    .icon-text {\r\n      font-size: 40rpx;\r\n    }\r\n  }\r\n  \r\n  .dialog-title-new {\r\n    display: block;\r\n    font-size: 34rpx;\r\n    font-weight: 700;\r\n    color: #ffffff;\r\n    margin-bottom: 6rpx;\r\n    letter-spacing: 1rpx;\r\n  }\r\n  \r\n  .dialog-subtitle {\r\n    display: block;\r\n    font-size: 24rpx;\r\n    color: rgba(255, 255, 255, 0.82);\r\n  }\r\n}\r\n\r\n// Ë°®ÂçïÂå∫Âüü\r\n.dialog-body-new {\r\n  padding: 32rpx 32rpx 24rpx;\r\n  max-height: 60vh;\r\n  overflow-y: auto;\r\n}\r\n\r\n// Ë°®ÂçïË°åÔºàÁî®‰∫éÂπ∂ÊéíÔºâ\r\n.form-row {\r\n  display: flex;\r\n  gap: 20rpx;\r\n  margin-bottom: 24rpx;\r\n}\r\n\r\n// Ë°®ÂçïÁªÑ\r\n.form-group {\r\n  margin-bottom: 24rpx;\r\n  \r\n  &.half {\r\n    flex: 1;\r\n    margin-bottom: 0;\r\n  }\r\n  \r\n  .form-label-new {\r\n    display: flex;\r\n    align-items: center;\r\n    margin-bottom: 12rpx;\r\n    \r\n    .label-text {\r\n      font-size: 30rpx;\r\n      font-weight: 600;\r\n      color: #333;\r\n    }\r\n    \r\n    .required {\r\n      color: #ff4d4f;\r\n      font-size: 32rpx;\r\n      margin-left: 4rpx;\r\n    }\r\n  }\r\n  \r\n  .form-input-new {\r\n    width: 100%;\r\n    height: 88rpx;\r\n    padding: 0 24rpx;\r\n    background: #f8f9fa;\r\n    border: 2rpx solid #e9ecef;\r\n    border-radius: 16rpx;\r\n    font-size: 32rpx;\r\n    color: #333;\r\n    transition: all 0.3s;\r\n    \r\n    &:focus {\r\n      background: #ffffff;\r\n      border-color: #667eea;\r\n      box-shadow: 0 0 0 4rpx rgba(102, 126, 234, 0.1);\r\n    }\r\n    \r\n    &:disabled {\r\n      background: #f5f5f5;\r\n      color: #999;\r\n      border-color: #e0e0e0;\r\n    }\r\n  }\r\n  \r\n  .form-hint {\r\n    display: block;\r\n    font-size: 24rpx;\r\n    color: #999;\r\n    margin-top: 8rpx;\r\n    padding-left: 4rpx;\r\n  }\r\n}\r\n\r\n// ËßíËâ≤ÈÄâÊã©Âô®\r\n.role-selector {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  height: 120rpx;\r\n  padding: 0 24rpx;\r\n  background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);\r\n  border: 2rpx solid #e9ecef;\r\n  border-radius: 16rpx;\r\n  transition: all 0.3s;\r\n  \r\n  &:active {\r\n    background: #ffffff;\r\n    border-color: #667eea;\r\n  }\r\n  \r\n  .role-left {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 20rpx;\r\n    flex: 1;\r\n  }\r\n  \r\n  .role-icon {\r\n    font-size: 48rpx;\r\n    width: 72rpx;\r\n    height: 72rpx;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n    border-radius: 14rpx;\r\n    flex-shrink: 0;\r\n  }\r\n  \r\n  .role-info {\r\n    flex: 1;\r\n    \r\n    .role-name {\r\n      display: block;\r\n      font-size: 32rpx;\r\n      font-weight: 600;\r\n      color: #333;\r\n      margin-bottom: 6rpx;\r\n    }\r\n    \r\n    .role-desc-short {\r\n      display: block;\r\n      font-size: 24rpx;\r\n      color: #999;\r\n    }\r\n  }\r\n  \r\n  .select-arrow {\r\n    font-size: 28rpx;\r\n    color: #667eea;\r\n    font-weight: bold;\r\n    margin-left: 16rpx;\r\n  }\r\n}\r\n\r\n// Â∫ïÈÉ®ÊåâÈíÆ\r\n.dialog-footer-new {\r\n  display: flex;\r\n  gap: 20rpx;\r\n  padding: 24rpx 32rpx 36rpx;\r\n  background: #fafbfc;\r\n  \r\n  .btn-new {\r\n    flex: 1;\r\n    height: 92rpx;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    border-radius: 18rpx;\r\n    font-size: 32rpx;\r\n    font-weight: 600;\r\n    border: none;\r\n    transition: all 0.3s;\r\n    gap: 8rpx;\r\n    \r\n    &.btn-cancel-new {\r\n      background: #ffffff;\r\n      color: #666;\r\n      border: 3rpx solid #e9ecef;\r\n      \r\n      .btn-text-new {\r\n        color: #666;\r\n      }\r\n      \r\n      &:active {\r\n        background: #f5f5f5;\r\n        transform: scale(0.98);\r\n      }\r\n    }\r\n    \r\n    &.btn-confirm-new {\r\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n      color: #ffffff;\r\n      box-shadow: 0 6rpx 16rpx rgba(102, 126, 234, 0.4);\r\n      \r\n      .btn-icon-new {\r\n        font-size: 36rpx;\r\n        font-weight: bold;\r\n      }\r\n      \r\n      .btn-text-new {\r\n        color: #ffffff;\r\n      }\r\n      \r\n      &:active {\r\n        transform: scale(0.98);\r\n        box-shadow: 0 4rpx 12rpx rgba(102, 126, 234, 0.5);\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import mod from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user-list.vue?vue&type=style&index=0&id=72193c6b&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./user-list.vue?vue&type=style&index=0&id=72193c6b&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1767327913301\n      var cssReload = require(\"D:/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}