{"version":3,"sources":["uni-app:///main.js","webpack:///D:/AK-PMS/pages-sub/stock/query.vue?ec07","webpack:///D:/AK-PMS/pages-sub/stock/query.vue?3932","webpack:///D:/AK-PMS/pages-sub/stock/query.vue?cdf0","webpack:///D:/AK-PMS/pages-sub/stock/query.vue?d25b","uni-app:///pages-sub/stock/query.vue","webpack:///D:/AK-PMS/pages-sub/stock/query.vue?c9a2","webpack:///D:/AK-PMS/pages-sub/stock/query.vue?7b97"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","searchKeyword","stockList","page","pageSize","hasMore","stats","totalDrugs","totalStock","warningCount","expiringCount","selectedStockFilter","selectedExpiryFilter","hasAnyStock","isExpiryMode","expiryDays","showCategoryPicker","stockFilters","label","value","expiryFilters","computed","onLoad","uni","title","methods","onKeywordInput","clearTimeout","setStockFilter","setExpiryFilter","setExpiryDays","applyExpiryDays","icon","onSearch","clearKeyword","loadStockList","keyword","location","stockFilter","expiryFilter","customExpiryDays","result","newData","console","loadStats","listRes","items","expiryRes","d","loadMore","getStockStatus","getStockStatusText","empty","warning","normal","getExpiryClass","goDetail","url","getMockData","_id","drugId","drugName","specification","unit","manufacturer","quantity","minStock","batches","batch","expireDate","daysToExpiry"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AAC0K;AAC1K,gBAAgB,uLAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACxDA;AAAA;AAAA;AAAA;AAAqoB,CAAgB,iqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCgLzpB;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MAEA;MACAC;QACAC;QACAC;QACAC;QACAC;MACA;MAEA;MACAC;MACAC;MACAC;MACA;MACAC;MACA;MACAC;MAEA;MACAC;MAEA;MACA;MACAC,eACA;QAAAC;QAAAC;MAAA;MAAA;MACA;QAAAD;QAAAC;MAAA;MAAA;MACA;QAAAD;QAAAC;MAAA;MAAA,CACA;;MACA;MACAC,gBACA;QAAAF;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA;IAEA;EACA;EAEAE;EAEAC;IACA;IACA;MACA;MACA;MACA;MACA;MACA;MACAC;QAAAC;MAAA;MACA;MACA;MACA;MACA;IACA;MACAD;QAAAC;MAAA;MACA;IACA;IACA;EACA;EAEAC;IACA;IACAC;MAAA;MACA;QACAC;MACA;MACA;QACA;QACA;QACA;QACA;MACA;IACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;QACAR;UAAAC;UAAAQ;QAAA;QACA;MACA;MACA;MACA;MACA;MACA;IACA;IAEAC;MACA;MACA;MACA;MACA;IACA;IAEAC;MACA;MACA;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAGA;kBACAC;kBACA;kBACAC;kBACAC;kBACAC;kBACAC;kBACArC;kBACAC;gBACA;cAAA;gBATAqC;gBAWA;kBACAC,6BACA;kBACA;oBACAnB;sBACAC;sBACAQ;oBACA;oBACA;oBACA;kBACA;kBACA;kBACA;gBACA;kBACA;oBACA;kBACA;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAW;gBACA;kBACA;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,OAGA;kBACAR;kBACAC;kBACAlC;kBACAC;gBACA;cAAA;gBALAyC;gBAMAtC;gBACAC;gBACAC;gBACA;kBACAqC;kBACAvC;kBACAC;oBAAA;kBAAA;kBACA;kBACAC;oBACA;oBACA;oBACA;kBACA;gBACA;;gBAEA;gBACAC;gBAAA;gBAAA;gBAAA,OAEA;cAAA;gBAAAqC;gBACA;kBACAC;kBACAtC;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAiC;cAAA;gBAGA;kBACApC;kBACAC;kBACAC;kBACAC;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAiC;gBACA;kBACApC;kBACAC;kBACAC;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEAuC;MACA;MACA;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;IACA;IAEAC;MACA;MACA;QACAC;QACAC;QACAC;MACA;MACA;IACA;IAEA;IACAC;MACA;MACA;MACA;MACA;IACA;IAEAC;MACA;MACA;QACAjC;UACAC;UACAQ;QACA;QACA;MACA;MACAT;QACAkC;MACA;IACA;IAEA;IACAC;MACA,QACA;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC,UACA;UAAAC;UAAAH;UAAAI;UAAAC;QAAA,GACA;UAAAF;UAAAH;UAAAI;UAAAC;QAAA;MAEA,GACA;QACAX;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC,UACA;UAAAC;UAAAH;UAAAI;UAAAC;QAAA;MAEA,GACA;QACAX;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC,UACA;UAAAC;UAAAH;UAAAI;UAAAC;QAAA,GACA;UAAAF;UAAAH;UAAAI;UAAAC;QAAA;MAEA,EACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACzeA;AAAA;AAAA;AAAA;AAAouC,CAAgB,gtCAAG,EAAC,C;;;;;;;;;;;ACAxvC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages-sub/stock/query.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages-sub/stock/query.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./query.vue?vue&type=template&id=39914319&scoped=true&\"\nvar renderjs\nimport script from \"./query.vue?vue&type=script&lang=js&\"\nexport * from \"./query.vue?vue&type=script&lang=js&\"\nimport style0 from \"./query.vue?vue&type=style&index=0&id=39914319&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"39914319\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages-sub/stock/query.vue\"\nexport default component.exports","export * from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./query.vue?vue&type=template&id=39914319&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.isExpiryMode ? _vm.stockList.length : null\n  var l1 = _vm.__map(_vm.stockList, function (item, __i2__) {\n    var $orig = _vm.__get_orig(item)\n    var m0 = _vm.getStockStatus(item)\n    var m1 = _vm.getStockStatusText(item)\n    var g1 = item.batches && item.batches.length > 0\n    var g2 = g1\n      ? item.batches.filter(function (b) {\n          return b.quantity > 0\n        }).length\n      : null\n    var l0 = g1\n      ? _vm.__map(\n          item.batches.filter(function (b) {\n            return b.quantity > 0\n          }),\n          function (batch, index) {\n            var $orig = _vm.__get_orig(batch)\n            var m2 = _vm.getExpiryClass(batch.daysToExpiry)\n            return {\n              $orig: $orig,\n              m2: m2,\n            }\n          }\n        )\n      : null\n    return {\n      $orig: $orig,\n      m0: m0,\n      m1: m1,\n      g1: g1,\n      g2: g2,\n      l0: l0,\n    }\n  })\n  var g3 = _vm.stockList.length\n  var g4 = !_vm.hasMore ? _vm.stockList.length : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        l1: l1,\n        g3: g3,\n        g4: g4,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./query.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./query.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"content-column\">\r\n\t\t\t<view v-if=\"!isExpiryMode\" class=\"search-section\">\r\n\t\t\t<view class=\"search-wrapper\">\r\n\t\t\t\t<text class=\"search-icon\">ğŸ”</text>\r\n\t\t\t\t<input\r\n\t\t\t\t\tclass=\"search-input\"\r\n\t\t\t\t\tv-model.trim=\"searchKeyword\"\r\n\t\t\t\t\tplaceholder=\"æœç´¢è¯æåç§°\"\r\n\t\t\t\t\tconfirm-type=\"search\"\r\n\t\t\t\t\t@confirm=\"onSearch\"\r\n\t\t\t\t\t@input=\"onKeywordInput\"\r\n\t\t\t\t/>\r\n\t\t\t\t<view v-if=\"searchKeyword\" class=\"clear-icon\" @tap=\"clearKeyword\">âœ•</view>\r\n\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- ç­›é€‰æ¡ä»¶ï¼šåº“å­˜æ ‡ç­¾ + æ•ˆæœŸæ ‡ç­¾ï¼ˆè¿‘æ•ˆæœŸç®€æ´æ¨¡å¼ä¸‹éšè—ï¼‰ -->\r\n\t\t\t<view v-if=\"!isExpiryMode\" class=\"filter-section\">\r\n\t\t\t<!-- åº“å­˜æ ‡ç­¾ï¼šç›´æ¥ç‚¹æ ‡ç­¾åˆ·æ–°åˆ—è¡¨ -->\r\n\t\t\t<view class=\"filter-row chips-row\">\r\n\t\t\t\t<text class=\"chips-label\">åº“å­˜</text>\r\n\t\t\t\t<view class=\"chips-group\">\r\n\t\t\t\t\t<view\r\n\t\t\t\t\t\tv-for=\"item in stockFilters\"\r\n\t\t\t\t\t\t:key=\"item.value\"\r\n\t\t\t\t\t\t:class=\"['chip', { active: selectedStockFilter === item.value }]\"\r\n\t\t\t\t\t\t@tap=\"setStockFilter(item.value)\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{{ item.label }}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- æ•ˆæœŸæ ‡ç­¾ï¼šç›´æ¥ç‚¹æ ‡ç­¾åˆ·æ–°åˆ—è¡¨ -->\r\n\t\t\t<view class=\"filter-row chips-row\">\r\n\t\t\t\t<text class=\"chips-label\">æ•ˆæœŸ</text>\r\n\t\t\t\t<view class=\"chips-group\">\r\n\t\t\t\t\t<view\r\n\t\t\t\t\t\tv-for=\"item in expiryFilters\"\r\n\t\t\t\t\t\t:key=\"item.value\"\r\n\t\t\t\t\t\t:class=\"['chip', { active: selectedExpiryFilter === item.value }]\"\r\n\t\t\t\t\t\t@tap=\"setExpiryFilter(item.value)\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{{ item.label }}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- ç»Ÿè®¡ä¿¡æ¯ï¼ˆè¿‘æ•ˆæœŸç®€æ´æ¨¡å¼ä¸‹éšè—ï¼‰ -->\r\n\t\t\t<view v-if=\"!isExpiryMode\" class=\"stats-bar\">\r\n\t\t\t<view class=\"stat-item\">\r\n\t\t\t\t<text class=\"stat-label\">å“ç§æ•°</text>\r\n\t\t\t\t<text class=\"stat-value\">{{ stats.totalDrugs }}</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"stat-item\">\r\n\t\t\t\t<text class=\"stat-label\">æ€»åº“å­˜</text>\r\n\t\t\t\t<text class=\"stat-value\">{{ stats.totalStock }}</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"stat-item\">\r\n\t\t\t\t<text class=\"stat-label\">é¢„è­¦</text>\r\n\t\t\t\t<text class=\"stat-value warning\">{{ stats.warningCount }}</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"stat-item\">\r\n\t\t\t\t<text class=\"stat-label\">è¿‘æ•ˆæœŸ</text>\r\n\t\t\t\t<text class=\"stat-value danger\">{{ stats.expiringCount }}</text>\r\n\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- è¿‘æ•ˆæœŸæ¨¡å¼ï¼šæ•ˆæœŸå¤©æ•°é€‰æ‹©æ¡ -->\r\n\t\t\t<view v-if=\"isExpiryMode\" class=\"expiry-bar\">\r\n\t\t\t<view class=\"expiry-row\">\r\n\t\t\t\t<view class=\"left-part\">\r\n\t\t\t\t\t<text class=\"expiry-label\">æ•ˆæœŸå°äº</text>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclass=\"expiry-input\"\r\n\t\t\t\t\t\tv-model.number=\"expiryDays\"\r\n\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t@confirm=\"applyExpiryDays\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<text class=\"expiry-unit\">å¤©</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"expiry-apply\" @tap=\"applyExpiryDays\">ç¡®å®š</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"expiry-preset\">\r\n\t\t\t\t<view class=\"preset-btn\" @tap=\"setExpiryDays(30)\">30å¤©</view>\r\n\t\t\t\t<view class=\"preset-btn\" @tap=\"setExpiryDays(60)\">60å¤©</view>\r\n\t\t\t\t<view class=\"preset-btn\" @tap=\"setExpiryDays(90)\">90å¤©</view>\r\n\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- åº“å­˜åˆ—è¡¨ -->\r\n\t\t\t<view class=\"stock-list\">\r\n\t\t\t<!-- è¿‘æ•ˆæœŸæ¨¡å¼ä¸‹çš„ç»Ÿè®¡æ ‡é¢˜ï¼ˆæ— è®ºæœ‰æ— æ•°æ®éƒ½æ˜¾ç¤ºï¼‰ -->\r\n\t\t\t<view\r\n\t\t\t\tv-if=\"isExpiryMode\"\r\n\t\t\t\tclass=\"expiry-summary\"\r\n\t\t\t>\r\n\t\t\t\tæœ‰æ•ˆæœŸå°äº {{ expiryDays }} å¤©çš„è¯æï¼Œå…±è®¡ {{ stockList.length }} ä¸ªå“ç§\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view \r\n\t\t\t\tv-for=\"item in stockList\" \r\n\t\t\t\t:key=\"item._id\"\r\n\t\t\t\tclass=\"stock-card\"\r\n\t\t\t\t@click=\"goDetail(item)\"\r\n\t\t\t>\r\n\t\t\t\t<view class=\"card-header\">\r\n\t\t\t\t\t<view class=\"drug-name\">{{ item.drugName }}</view>\r\n\t\t\t\t\t<view :class=\"['stock-badge', getStockStatus(item)]\">\r\n\t\t\t\t\t\t{{ getStockStatusText(item) }}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"drug-spec\">{{ item.specification }}</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"stock-info\">\r\n\t\t\t\t\t<view class=\"info-row\">\r\n\t\t\t\t\t\t<text class=\"info-label\">åº“å­˜ï¼š</text>\r\n\t\t\t\t\t\t<text class=\"info-value\">\r\n\t\t\t\t\t\t\t{{ (item.totalQuantity !== undefined ? item.totalQuantity : (item.quantity || 0)) + (item.unit || '') }}\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"info-row\" v-if=\"item.manufacturer\">\r\n\t\t\t\t\t\t<text class=\"info-label\">å‚å®¶ï¼š</text>\r\n\t\t\t\t\t\t<text class=\"info-value\">{{ item.manufacturer }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<!-- æ‰¹æ¬¡ä¿¡æ¯ï¼ˆä»…å±•ç¤ºæ•°é‡å¤§äº0çš„æ‰¹æ¬¡ï¼‰ -->\r\n\t\t\t\t<view v-if=\"item.batches && item.batches.length > 0\" class=\"batch-section\">\r\n\t\t\t\t\t<view class=\"batch-title\">æ‰¹æ¬¡ä¿¡æ¯ï¼ˆ{{ item.batches.filter(b => b.quantity > 0).length }}ä¸ªï¼‰</view>\r\n\t\t\t\t\t<view \r\n\t\t\t\t\t\tv-for=\"(batch, index) in item.batches.filter(b => b.quantity > 0)\" \r\n\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\tclass=\"batch-item\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<view class=\"batch-row\">\r\n\t\t\t\t\t\t\t<text class=\"batch-label\">æ‰¹å·ï¼š</text>\r\n\t\t\t\t\t\t\t<text class=\"batch-value\">{{ batch.batch }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"batch-row\">\r\n\t\t\t\t\t\t\t<text class=\"batch-label\">æ•°é‡ï¼š</text>\r\n\t\t\t\t\t\t\t<text class=\"batch-value\">{{ batch.quantity }} {{ item.unit }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"batch-row\">\r\n\t\t\t\t\t\t\t<text class=\"batch-label\">æ•ˆæœŸï¼š</text>\r\n\t\t\t\t\t\t\t<text :class=\"['batch-value', getExpiryClass(batch.daysToExpiry)]\">\r\n\t\t\t\t\t\t\t\t{{ batch.expireDate }} ({{ batch.daysToExpiry }}å¤©)\r\n\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- ç©ºçŠ¶æ€ -->\r\n\t\t\t<view v-if=\"stockList.length === 0\" class=\"empty-state\">\r\n\t\t\t\t<text class=\"empty-icon\">ğŸ“¦</text>\r\n\t\t\t\t<text class=\"empty-text\">æš‚æ— ç¬¦åˆæ¡ä»¶çš„è¯æ</text>\r\n\t\t\t\t<text class=\"empty-hint\">{{ searchKeyword ? 'æ¢ä¸ªå…³é”®è¯è¯•è¯•' : 'å¯è°ƒæ•´ä¸Šæ–¹ç­›é€‰æ¡ä»¶' }}</text>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- åŠ è½½æ›´å¤š -->\r\n\t\t\t<view v-if=\"hasMore\" class=\"load-more\" @click=\"loadMore\">\r\n\t\t\t\t<text>åŠ è½½æ›´å¤š</text>\r\n\t\t\t</view>\r\n\t\t\t<view v-else-if=\"stockList.length > 0\" class=\"no-more\">\r\n\t\t\t\t<text>æ²¡æœ‰æ›´å¤šäº†</text>\r\n\t\t\t</view>\r\n \t\t</view>\r\n\t\t<!-- åˆ†ç±»é€‰æ‹©å™¨å·²ç§»é™¤ï¼Œä»…ä¿ç•™åº“å­˜/æ•ˆæœŸæ ‡ç­¾ -->\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tsearchKeyword: '',\r\n\t\t\tstockList: [],\r\n\t\t\tpage: 1,\r\n\t\t\tpageSize: 20,\r\n\t\t\thasMore: true,\r\n\t\t\t\r\n\t\t\t// ç»Ÿè®¡æ•°æ®\r\n\t\t\tstats: {\r\n\t\t\t\ttotalDrugs: 0,\r\n\t\t\t\ttotalStock: 0,\r\n\t\t\t\twarningCount: 0,\r\n\t\t\t\texpiringCount: 0\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// ç­›é€‰æ¡ä»¶\r\n\t\t\tselectedStockFilter: 'all',\r\n\t\t\tselectedExpiryFilter: 'all',\r\n\t\t\thasAnyStock: true,\r\n\t\t\t// æ˜¯å¦ä¸ºâ€œè¿‘æ•ˆæœŸè¯æâ€ç®€æ´æ˜ç»†æ¨¡å¼\r\n\t\t\tisExpiryMode: false,\r\n\t\t\t// è¿‘æ•ˆæœŸè‡ªå®šä¹‰å¤©æ•°ï¼ˆä»…åœ¨è¿‘æ•ˆæœŸæ¨¡å¼ä¸‹ä½¿ç”¨ï¼‰\r\n\t\t\texpiryDays: 60,\r\n\t\t\t\r\n\t\t\t// é€‰æ‹©å™¨æ˜¾ç¤ºçŠ¶æ€ï¼ˆåˆ†ç±»å·²ç§»é™¤ï¼‰\r\n\t\t\tshowCategoryPicker: false,\r\n\t\t\t\r\n\t\t\t// é€‰é¡¹åˆ—è¡¨ï¼ˆä»…åº“å­˜å’Œæ•ˆæœŸï¼‰\r\n\t\t\t// åº“å­˜ç­›é€‰ï¼šç®€åŒ–ä¸ºä¸‰æ¡£\r\n\t\t\tstockFilters: [\r\n\t\t\t\t{ label: 'æœ‰åº“å­˜', value: 'all' },      // é»˜è®¤ï¼šæ€»åº“å­˜>0\r\n\t\t\t\t{ label: 'é¢„è­¦', value: 'warning' },     // qty>0 ä¸” <= minStock\r\n\t\t\t\t{ label: 'é›¶åº“å­˜', value: 'empty' }      // qty<=0\r\n\t\t\t],\r\n\t\t\t// æ•ˆæœŸç­›é€‰ï¼šå¸¸ç”¨ä¸‰æ¡£\r\n\t\t\texpiryFilters: [\r\n\t\t\t\t{ label: 'å…¨éƒ¨', value: 'all' },\r\n\t\t\t\t{ label: 'è¿‘æ•ˆæœŸ', value: 'expiring60' },\r\n\t\t\t\t{ label: 'å·²è¿‡æœŸ', value: 'expired' }\r\n\t\t\t]\r\n\t\t}\r\n\t},\r\n\t\r\n\tcomputed: {},\r\n\t\r\n\tonLoad(options) {\r\n\t\t// æ”¯æŒä»é¦–é¡µâ€œè¿‘æ•ˆæœŸè¯æâ€å…¥å£è·³è½¬æ—¶ç›´æ¥è¿›å…¥è¿‘æ•ˆæœŸè§†å›¾\r\n\t\tif (options && options.filter === 'expiring') {\r\n\t\t\t// è¿‘æ•ˆæœŸå…¥å£ï¼šåªå±•ç¤ºæ˜ç»†åˆ—è¡¨ï¼Œä¸å±•ç¤ºç­›é€‰/ç»Ÿè®¡ç­‰æ§ä»¶\r\n\t\t\tthis.isExpiryMode = true\r\n\t\t\t// è¿™é‡Œçº¦å®šä½¿ç”¨â€œæœ‰åº“å­˜â€+â€œ60å¤©å†…åˆ°æœŸâ€ä½œä¸ºè¿‘æ•ˆæœŸå£å¾„\r\n\t\t\tthis.selectedStockFilter = 'inStock'\r\n\t\t\tthis.selectedExpiryFilter = 'expiring60'\r\n\t\t\tuni.setNavigationBarTitle({ title: 'è¿‘æ•ˆæœŸè¯æ' })\r\n\t\t\tthis.page = 1\r\n\t\t\tthis.stockList = []\r\n\t\t\tthis.hasMore = true\r\n\t\t\tthis.loadStockList()\r\n\t\t} else {\r\n\t\t\tuni.setNavigationBarTitle({ title: 'åº“å­˜æŸ¥è¯¢' })\r\n\t\t\tthis.loadStockList()\r\n\t\t}\r\n\t\tthis.loadStats()\r\n\t},\r\n\t\r\n\tmethods: {\r\n\t\t// æœç´¢è¾“å…¥ï¼šç®€å•èŠ‚æµï¼Œè¾“å…¥åçŸ­æš‚å»¶è¿Ÿè§¦å‘æŸ¥è¯¢\r\n\t\tonKeywordInput() {\r\n\t\t\tif (this._keywordTimer) {\r\n\t\t\t\tclearTimeout(this._keywordTimer)\r\n\t\t\t}\r\n\t\t\tthis._keywordTimer = setTimeout(() => {\r\n\t\t\t\tthis.page = 1\r\n\t\t\t\tthis.stockList = []\r\n\t\t\t\tthis.hasMore = true\r\n\t\t\t\tthis.loadStockList()\r\n\t\t\t}, 300)\r\n\t\t},\r\n\t\t// åˆ†ç±»ç­›é€‰å·²ç§»é™¤\r\n\t\t// ç‚¹å‡»åº“å­˜æ ‡ç­¾\r\n\t\tsetStockFilter(value) {\r\n\t\t\tif (this.selectedStockFilter === value) return\r\n\t\t\tthis.selectedStockFilter = value\r\n\t\t\tthis.onSearch()\r\n\t\t},\r\n\t\t// ç‚¹å‡»æ•ˆæœŸæ ‡ç­¾\r\n\t\tsetExpiryFilter(value) {\r\n\t\t\tif (this.selectedExpiryFilter === value) return\r\n\t\t\tthis.selectedExpiryFilter = value\r\n\t\t\tthis.onSearch()\r\n\t\t},\r\n\t\t// è¿‘æ•ˆæœŸæ¨¡å¼ï¼šè®¾ç½®å¿«é€Ÿå¤©æ•°å¹¶åº”ç”¨\r\n\t\tsetExpiryDays(days) {\r\n\t\t\tthis.expiryDays = days\r\n\t\t\tthis.applyExpiryDays()\r\n\t\t},\r\n\t\t// è¿‘æ•ˆæœŸæ¨¡å¼ï¼šåº”ç”¨å½“å‰è¾“å…¥çš„å¤©æ•°\r\n\t\tapplyExpiryDays() {\r\n\t\t\tconst v = Number(this.expiryDays)\r\n\t\t\tif (!v || v <= 0) {\r\n\t\t\t\tuni.showToast({ title: 'è¯·è¾“å…¥å¤§äº0çš„å¤©æ•°', icon: 'none' })\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tthis.page = 1\r\n\t\t\tthis.stockList = []\r\n\t\t\tthis.hasMore = true\r\n\t\t\tthis.loadStockList()\r\n\t\t},\r\n\t\t\r\n\t\tonSearch() {\r\n\t\t\tthis.page = 1\r\n\t\t\tthis.stockList = []\r\n\t\t\tthis.hasMore = true\r\n\t\t\tthis.loadStockList()\r\n\t\t},\r\n\t\t\r\n\t\tclearKeyword() {\r\n\t\t\tif (!this.searchKeyword) return\r\n\t\t\tthis.searchKeyword = ''\r\n\t\t\tthis.onSearch()\r\n\t\t},\r\n\t\t\r\n\t\t// åŠ è½½åº“å­˜åˆ—è¡¨\r\n\t\tasync loadStockList() {\r\n\t\t\ttry {\r\n\t\t\t\t// ä½¿ç”¨å·²æœ‰çš„ getStockList äº‘å‡½æ•°å°è£…\r\n\t\t\t\tconst result = await this.$api.getStockList({\r\n\t\t\t\t\tkeyword: this.searchKeyword,\r\n\t\t\t\t\t// åç«¯å·²æŒ‰ drugId èšåˆï¼Œè¿™é‡Œåªä¼ å…¥åº“å­˜å’Œæ•ˆæœŸç­›é€‰\r\n\t\t\t\t\tlocation: 'drug_storage',\r\n\t\t\t\t\tstockFilter: this.selectedStockFilter,\r\n\t\t\t\t\texpiryFilter: this.isExpiryMode ? 'all' : this.selectedExpiryFilter,\r\n\t\t\t\t\tcustomExpiryDays: this.isExpiryMode ? this.expiryDays : null,\r\n\t\t\t\t\tpage: this.page,\r\n\t\t\t\t\tpageSize: this.pageSize\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif (result && result.success) {\r\n\t\t\t\t\tconst newData = result.data || []\r\n\t\t\t\t\t// é¦–æ¬¡æŸ¥è¯¢ä¸”æ— æ•°æ®æ—¶ç»™å‡ºæç¤º\r\n\t\t\t\t\tif (this.page === 1 && newData.length === 0) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: 'æš‚æ— ç¬¦åˆæ¡ä»¶çš„åº“å­˜æ•°æ®',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// ç¡®ä¿ç­›é€‰å¼¹çª—å…³é—­\r\n\t\t\t\t\t\tthis.showCategoryPicker = false\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.stockList = this.page === 1 ? newData : [...this.stockList, ...newData]\r\n\t\t\t\t\tthis.hasMore = newData.length >= this.pageSize\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (this.page === 1) {\r\n\t\t\t\t\t\tthis.stockList = []\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.hasMore = false\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.error('åŠ è½½å¤±è´¥:', err)\r\n\t\t\t\tif (this.page === 1) {\r\n\t\t\t\t\tthis.stockList = []\r\n\t\t\t\t}\r\n\t\t\t\tthis.hasMore = false\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t// åŠ è½½ç»Ÿè®¡æ•°æ®\r\n\t\tasync loadStats() {\r\n\t\t\ttry {\r\n\t\t\t\t// 1ï¼‰é€šè¿‡ getStockList è·å–å½“å‰æ•´ä½“åº“å­˜åˆ—è¡¨ï¼Œç”¨äºç»Ÿè®¡å“ç§æ•°å’Œæ€»åº“å­˜\r\n\t\t\t\tconst listRes = await this.$api.getStockList({\r\n\t\t\t\t\tkeyword: '',\r\n\t\t\t\t\tlocation: 'drug_storage',\r\n\t\t\t\t\tpage: 1,\r\n\t\t\t\t\tpageSize: 500\r\n\t\t\t\t})\r\n\t\t\t\tlet totalDrugs = 0\r\n\t\t\t\tlet totalStock = 0\r\n\t\t\t\tlet warningCount = 0\r\n\t\t\t\tif (listRes && listRes.success) {\r\n\t\t\t\t\tconst items = listRes.data || []\r\n\t\t\t\t\ttotalDrugs = items.length\r\n\t\t\t\t\ttotalStock = items.reduce((sum, it) => sum + (it.totalQuantity || it.quantity || 0), 0)\r\n\t\t\t\t\t// ç®€å•æŒ‰ç…§æ•°é‡é˜ˆå€¼ç»Ÿè®¡é¢„è­¦æ•°\r\n\t\t\t\t\twarningCount = items.filter(it => {\r\n\t\t\t\t\t\tconst qty = it.totalQuantity || it.quantity || 0\r\n\t\t\t\t\t\tconst min = it.minStock || 10\r\n\t\t\t\t\t\treturn qty > 0 && qty <= min\r\n\t\t\t\t\t}).length\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 2ï¼‰é€šè¿‡ checkExpiry(90) è·å–è¿‘æ•ˆæœŸ+å·²è¿‡æœŸæ•°é‡\r\n\t\t\t\tlet expiringCount = 0\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst expiryRes = await this.$api.checkExpiry(90)\r\n\t\t\t\t\tif (expiryRes && expiryRes.success && expiryRes.data) {\r\n\t\t\t\t\t\tconst d = expiryRes.data\r\n\t\t\t\t\t\texpiringCount = (d.nearExpiryCount || 0) + (d.expiredCount || 0)\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.error('æ•ˆæœŸç»Ÿè®¡å¤±è´¥:', e)\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.stats = {\r\n\t\t\t\t\ttotalDrugs: totalDrugs || 0,\r\n\t\t\t\t\ttotalStock: totalStock || 0,\r\n\t\t\t\t\twarningCount: warningCount || 0,\r\n\t\t\t\t\texpiringCount: expiringCount || 0\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.error('åŠ è½½ç»Ÿè®¡å¤±è´¥:', err)\r\n\t\t\t\tthis.stats = {\r\n\t\t\t\t\ttotalDrugs: 156,\r\n\t\t\t\t\ttotalStock: 12580,\r\n\t\t\t\t\twarningCount: 8,\r\n\t\t\t\t\texpiringCount: 5\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tloadMore() {\r\n\t\t\tif (!this.hasMore) return\r\n\t\t\tthis.page++\r\n\t\t\tthis.loadStockList()\r\n\t\t},\r\n\t\t\r\n\t\t// è·å–åº“å­˜çŠ¶æ€\r\n\t\tgetStockStatus(item) {\r\n\t\t\tif (item.quantity <= 0) return 'empty'\r\n\t\t\tif (item.quantity <= (item.minStock || 10)) return 'warning'\r\n\t\t\treturn 'normal'\r\n\t\t},\r\n\t\t\r\n\t\tgetStockStatusText(item) {\r\n\t\t\tconst status = this.getStockStatus(item)\r\n\t\t\tconst statusMap = {\r\n\t\t\t\tempty: 'æ— åº“å­˜',\r\n\t\t\t\twarning: 'åº“å­˜é¢„è­¦',\r\n\t\t\t\tnormal: 'æ­£å¸¸'\r\n\t\t\t}\r\n\t\t\treturn statusMap[status] || 'æ­£å¸¸'\r\n\t\t},\r\n\t\t\r\n\t\t// è·å–æ•ˆæœŸæ ·å¼\r\n\t\tgetExpiryClass(days) {\r\n\t\t\tif (days < 0) return 'expired'\r\n\t\t\tif (days <= 30) return 'expiring-soon'\r\n\t\t\tif (days <= 90) return 'expiring'\r\n\t\t\treturn 'normal'\r\n\t\t},\r\n\t\t\r\n\t\tgoDetail(item) {\r\n\t\t\tconst drugId = item.drugId || item._id\r\n\t\t\tif (!drugId) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: 'æœªæ‰¾åˆ°è¯æID',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: `/pages-sub/drug/detail?id=${drugId}`\r\n\t\t\t})\r\n\t\t},\r\n\t\t\r\n\t\t// æ¨¡æ‹Ÿæ•°æ®\r\n\t\tgetMockData() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\t_id: 'stock_001',\r\n\t\t\t\t\tdrugId: 'drug_001',\r\n\t\t\t\t\tdrugName: 'é˜¿è«è¥¿æ—èƒ¶å›Š',\r\n\t\t\t\t\tspecification: '0.25gÃ—24ç²’/ç›’',\r\n\t\t\t\t\tunit: 'ç›’',\r\n\t\t\t\t\tmanufacturer: 'XXåˆ¶è¯',\r\n\t\t\t\t\tquantity: 150,\r\n\t\t\t\t\tminStock: 50,\r\n\t\t\t\t\tbatches: [\r\n\t\t\t\t\t\t{ batch: '20231001', quantity: 100, expireDate: '2025-10-01', daysToExpiry: 330 },\r\n\t\t\t\t\t\t{ batch: '20231015', quantity: 50, expireDate: '2025-10-15', daysToExpiry: 344 }\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t_id: 'stock_002',\r\n\t\t\t\t\tdrugId: 'drug_002',\r\n\t\t\t\t\tdrugName: 'å¸ƒæ´›èŠ¬ç¼“é‡Šèƒ¶å›Š',\r\n\t\t\t\t\tspecification: '0.3gÃ—20ç²’/ç›’',\r\n\t\t\t\t\tunit: 'ç›’',\r\n\t\t\t\t\tmanufacturer: 'YYè¯ä¸š',\r\n\t\t\t\t\tquantity: 30,\r\n\t\t\t\t\tminStock: 50,\r\n\t\t\t\t\tbatches: [\r\n\t\t\t\t\t\t{ batch: '20240201', quantity: 30, expireDate: '2025-02-01', daysToExpiry: 85 }\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t_id: 'stock_003',\r\n\t\t\t\t\tdrugId: 'drug_003',\r\n\t\t\t\t\tdrugName: 'æ„Ÿå†’çµé¢—ç²’',\r\n\t\t\t\t\tspecification: '10gÃ—10è¢‹/ç›’',\r\n\t\t\t\t\tunit: 'ç›’',\r\n\t\t\t\t\tmanufacturer: 'ZZåŒ»è¯',\r\n\t\t\t\t\tquantity: 200,\r\n\t\t\t\t\tminStock: 100,\r\n\t\t\t\t\tbatches: [\r\n\t\t\t\t\t\t{ batch: '20240301', quantity: 120, expireDate: '2026-03-01', daysToExpiry: 480 },\r\n\t\t\t\t\t\t{ batch: '20240315', quantity: 80, expireDate: '2026-03-15', daysToExpiry: 494 }\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n\tmin-height: 100vh;\r\n\t// ä½¿ç”¨ä¸é¦–é¡µ/é—¨è¯Š/è¯æå·¥ä½œå°ä¸€è‡´çš„è“è‰²æ¸å˜èƒŒæ™¯\r\n\tbackground: linear-gradient(180deg, #00c9ff 0%, #00a0ff 35%, #e5e7eb 100%);\r\n\tpadding: 24rpx 0 140rpx;\r\n}\r\n\r\n.content-column {\r\n\tmax-width: 702rpx;\r\n\tmargin: 0 auto;\r\n\tpadding: 0 22rpx 8rpx;\r\n}\r\n\r\n.filter-section {\r\n\tbackground: #FFFFF0;\r\n\t/* ä¸å…¶å®ƒå¡ç‰‡ä¿æŒç›¸åŒä¸Šä¸‹é—´è· */\r\n\tmargin: 0 0 8rpx;\r\n\tpadding: 14rpx 22rpx 10rpx;\r\n\tborder-radius: 22rpx;\r\n\tbox-shadow: 0 8rpx 20rpx rgba(15, 23, 42, 0.12);\r\n\r\n\t.filter-row {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 8rpx;\r\n\t}\r\n\r\n\t.category-row {\r\n\t\tjustify-content: flex-start;\r\n\t\tcolumn-gap: 8rpx;\r\n\t}\r\n\r\n\t.filter-label {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #6b7280;\r\n\t\tmargin-right: 8rpx;\r\n\t}\r\n\r\n\t.filter-chip-text {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #111827;\r\n\t}\r\n\r\n\t.filter-arrow {\r\n\t\tmargin-left: auto;\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #cbd5e1;\r\n\t}\r\n\r\n\t.chips-row {\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 6rpx;\r\n\t}\r\n\r\n\t.chips-label {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #9ca3af;\r\n\t\tmargin-right: 8rpx;\r\n\t}\r\n\r\n\t.chips-group {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\trow-gap: 8rpx;\r\n\t\tcolumn-gap: 10rpx;\r\n\t}\r\n\r\n\t.chip {\r\n\t\tmin-width: 120rpx;\r\n\t\tpadding: 8rpx 18rpx;\r\n\t\tborder-radius: 999rpx;\r\n\t\tborder: 1rpx solid #e5e7eb;\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #4b5563;\r\n\t\tbackground: #f9fafb;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.chip.active {\r\n\t\tbackground: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\r\n\t\tcolor: #ffffff;\r\n\t\tborder-color: transparent;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(37, 99, 235, 0.35);\r\n\t}\r\n}\r\n\r\n.search-section {\r\n\t/* ä½œä¸ºç¬¬ä¸€ä¸ªå¡ç‰‡ï¼šåº•éƒ¨ç»Ÿä¸€ç•™ 8rpx é—´è· */\r\n\tpadding: 0;\r\n\tmargin: 0 0 8rpx;\r\n}\r\n\r\n.search-wrapper {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tbackground: #ffffff;\r\n\tborder-radius: 999rpx;\r\n\tpadding: 8rpx 16rpx;\r\n\tbox-shadow: 0 4rpx 10rpx rgba(15, 23, 42, 0.06);\r\n}\r\n\r\n.search-icon {\r\n\tfont-size: 28rpx;\r\n\tmargin-right: 8rpx;\r\n}\r\n\r\n.search-input {\r\n\tflex: 1;\r\n\tfont-size: 26rpx;\r\n\tcolor: #111827;\r\n}\r\n\r\n.clear-icon {\r\n\tfont-size: 26rpx;\r\n\tcolor: #9ca3af;\r\n\tmargin-left: 6rpx;\r\n}\r\n\r\n// ç»Ÿè®¡ä¿¡æ¯\r\n.stats-bar {\r\n\tdisplay: flex;\r\n\t/* ç»Ÿè®¡å¡ä¸ä¸Šä¸‹å¡ç‰‡ä¹‹é—´ç»Ÿä¸€ 8rpx é—´è· */\r\n\tmargin: 0 auto 8rpx;\r\n\tmax-width: 702rpx;\r\n\tpadding: 18rpx 22rpx;\r\n\tbackground: #FFFFF0;\r\n\tborder-radius: 22rpx;\r\n\tbox-shadow: 0 8rpx 20rpx rgba(15, 23, 42, 0.12);\r\n\t\r\n\t.stat-item {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tgap: 10rpx;\r\n\t\t\r\n\t\t.stat-label {\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tcolor: #969799;\r\n\t\t}\r\n\t\t\r\n\t\t.stat-value {\r\n\t\t\tfont-size: 32rpx;\r\n\t\t\tfont-weight: bold;\r\n\t\t\tcolor: #323233;\r\n\t\t\t\r\n\t\t\t&.warning {\r\n\t\t\t\tcolor: #ff976a;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t&.danger {\r\n\t\t\t\tcolor: #ee0a24;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// åº“å­˜åˆ—è¡¨\r\n.stock-list {\r\n\t/* åˆ—è¡¨ç´§è·Ÿåœ¨ç»Ÿè®¡å¡æˆ–æ•ˆæœŸå¡ä¹‹åï¼Œä¸å†é¢å¤–å¢åŠ é—´è· */\r\n\tpadding: 0;\r\n}\r\n\r\n// è¿‘æ•ˆæœŸæ ‡é¢˜è¡Œ\r\n.expiry-summary {\r\n\tmax-width: 702rpx;\r\n\tmargin: 0 auto 8rpx;\r\n\tpadding: 16rpx 22rpx;\r\n\tbackground: #FFFFF0;\r\n\tborder-radius: 22rpx;\r\n\tbox-shadow: 0 8rpx 20rpx rgba(15, 23, 42, 0.12);\r\n\ttext-align: center;\r\n\tfont-size: 30rpx;\r\n\tcolor: #f97373; // è¾ƒæµ…çš„çº¢è‰²æç¤º\r\n}\r\n\r\n// è¿‘æ•ˆæœŸé¡¶éƒ¨å¤©æ•°é€‰æ‹©æ¡\r\n.expiry-bar {\r\n\t/* è¿‘æ•ˆæœŸæ¨¡å¼ä¸‹çš„å¡ç‰‡ï¼Œä¹Ÿä¸å…¶å®ƒå¡ç‰‡ä¿æŒç»Ÿä¸€é—´è· */\r\n\tmargin: 0 auto 8rpx;\r\n\tmax-width: 702rpx;\r\n\tbackground: #FFFFF0;\r\n\tborder-radius: 22rpx;\r\n\tpadding: 18rpx 22rpx 14rpx;\r\n\tbox-shadow: 0 8rpx 20rpx rgba(15, 23, 42, 0.12);\r\n\r\n\t.expiry-row {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tmargin-bottom: 14rpx;\r\n\t\tcolumn-gap: 8rpx;\r\n\r\n\t\t// å·¦ä¾§ï¼šæ–‡å­— + è¾“å…¥æ¡† + å•ä½\r\n\t\t.left-part {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t}\r\n\r\n\t\t.expiry-label {\r\n\t\t\tfont-size: 26rpx;\r\n\t\t\tcolor: #646566;\r\n\t\t\tmargin-right: 0;\r\n\t\t}\r\n\r\n\t\t.expiry-input {\r\n\t\t\twidth: 120rpx;\r\n\t\t\theight: 56rpx;\r\n\t\t\tpadding: 0 16rpx;\r\n\t\t\tborder-radius: 28rpx;\r\n\t\t\tbackground: #f5f5f5;\r\n\t\t\tfont-size: 26rpx;\r\n\t\t\tcolor: #323233;\r\n\t\t\ttext-align: center;\r\n\t\t\tmargin-right: 0;\r\n\t\t}\r\n\r\n\t\t.expiry-unit {\r\n\t\t\tfont-size: 26rpx;\r\n\t\t\tcolor: #969799;\r\n\t\t\tmargin-left: 0;\r\n\t\t}\r\n\r\n\t\t.expiry-apply {\r\n\t\t\tpadding: 0 30rpx;\r\n\t\t\theight: 56rpx;\r\n\t\t\tline-height: 56rpx;\r\n\t\t\tborder-radius: 28rpx;\r\n\t\t\tbackground: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);\r\n\t\t\tcolor: #ffffff;\r\n\t\t\tfont-size: 26rpx;\r\n\t\t\tmargin-left: 24rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.expiry-preset {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\tmargin-top: 6rpx;\r\n\t\tcolumn-gap: 16rpx;\r\n\r\n\t\t.preset-btn {\r\n\t\t\tpadding: 8rpx 26rpx;\r\n\t\t\tborder-radius: 22rpx;\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tcolor: #2563eb;\r\n\t\t\tbackground: #eff6ff;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.stock-card {\r\n\tbackground: #fffff0;\r\n\tborder-radius: 18rpx;\r\n\tpadding: 16rpx 22rpx 14rpx;\r\n\t/* æ¯ä¸ªåº“å­˜å¡ä¹‹é—´ç»Ÿä¸€ 8rpx é—´è· */\r\n\tmargin: 0 0 8rpx;\r\n\tbox-shadow: 0 6rpx 18rpx rgba(15, 23, 42, 0.1);\r\n\t\r\n\t.card-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tmargin-bottom: 15rpx;\r\n\t\t\r\n\t\t.drug-name {\r\n\t\t\tfont-size: 32rpx;\r\n\t\t\tfont-weight: bold;\r\n\t\t\tcolor: #323233;\r\n\t\t}\r\n\t\t\r\n\t\t.stock-badge {\r\n\t\t\tpadding: 8rpx 20rpx;\r\n\t\t\tborder-radius: 20rpx;\r\n\t\t\tfont-size: 22rpx;\r\n\t\t\t\r\n\t\t\t&.normal {\r\n\t\t\t\tbackground: #e8f5e9;\r\n\t\t\t\tcolor: #4caf50;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t&.warning {\r\n\t\t\t\tbackground: #fff3e0;\r\n\t\t\t\tcolor: #ff9800;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t&.empty {\r\n\t\t\t\tbackground: #ffebee;\r\n\t\t\t\tcolor: #f44336;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t.drug-spec {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #969799;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\t\r\n\t.stock-info {\r\n\t\t.info-row {\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tmargin-bottom: 10rpx;\r\n\t\t\t\r\n\t\t\t.info-label {\r\n\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\tcolor: #646566;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t.info-value {\r\n\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\tcolor: #323233;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t.batch-section {\r\n\t\tmargin-top: 20rpx;\r\n\t\tpadding-top: 20rpx;\r\n\t\tborder-top: 1rpx solid #ebedf0;\r\n\t\t\r\n\t\t.batch-title {\r\n\t\t\tfont-size: 26rpx;\r\n\t\t\tcolor: #646566;\r\n\t\t\tmargin-bottom: 15rpx;\r\n\t\t}\r\n\t\t\r\n\t\t.batch-item {\r\n\t\t\tbackground: #f7f8fa;\r\n\t\t\tborder-radius: 12rpx;\r\n\t\t\tpadding: 15rpx 20rpx;\r\n\t\t\tmargin-bottom: 10rpx;\r\n\t\t\t\r\n\t\t\t.batch-row {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tmargin-bottom: 8rpx;\r\n\t\t\t\t\r\n\t\t\t\t&:last-child {\r\n\t\t\t\t\tmargin-bottom: 0;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t.batch-label {\r\n\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\tcolor: #969799;\r\n\t\t\t\t\twidth: 100rpx;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t.batch-value {\r\n\t\t\t\t\tflex: 1;\r\n\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\tcolor: #323233;\r\n\t\t\t\t\t\r\n\t\t\t\t\t&.normal {\r\n\t\t\t\t\t\tcolor: #323233;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t&.expiring {\r\n\t\t\t\t\t\tcolor: #ff9800;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t&.expiring-soon {\r\n\t\t\t\t\t\tcolor: #ff5722;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t&.expired {\r\n\t\t\t\t\t\tcolor: #f44336;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t.batch-more {\r\n\t\t\tfont-size: 24rpx;\r\n\t\t\tcolor: #667eea;\r\n\t\t\ttext-align: center;\r\n\t\t\tpadding: 10rpx 0;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// ç©ºçŠ¶æ€\r\n.empty-state {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\tpadding: 80rpx 24rpx 90rpx;\r\n\t\r\n\t.empty-icon {\r\n\t\tfont-size: 120rpx;\r\n\t\tmargin-bottom: 30rpx;\r\n\t}\r\n\t\r\n\t.empty-text {\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #969799;\r\n\t\tmargin-bottom: 15rpx;\r\n\t}\r\n\t\r\n\t.empty-hint {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #c8c9cc;\r\n\t}\r\n}\r\n\r\n// åŠ è½½æ›´å¤š\r\n.load-more, .no-more {\r\n\ttext-align: center;\r\n\tpadding: 26rpx 0 40rpx;\r\n\tfont-size: 26rpx;\r\n\tcolor: #999999;\r\n}\r\n\r\n// é€‰æ‹©å™¨å¼¹çª—\r\n.picker-popup {\r\n\tbackground: white;\r\n\tborder-radius: 32rpx 32rpx 0 0;\r\n\t\r\n\t.picker-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 30rpx 40rpx;\r\n\t\tborder-bottom: 1rpx solid #ebedf0;\r\n\t\t\r\n\t\t.picker-cancel, .picker-confirm {\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tcolor: #667eea;\r\n\t\t}\r\n\t\t\r\n\t\t.picker-title {\r\n\t\t\tfont-size: 32rpx;\r\n\t\t\tfont-weight: bold;\r\n\t\t\tcolor: #323233;\r\n\t\t}\r\n\t}\r\n\t\r\n\t.picker-list {\r\n\t\tmax-height: 600rpx;\r\n\t\toverflow-y: auto;\r\n\t\t\r\n\t\t.picker-item {\r\n\t\t\tpadding: 30rpx 40rpx;\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tcolor: #323233;\r\n\t\t\tborder-bottom: 1rpx solid #f7f8fa;\r\n\t\t\t\r\n\t\t\t&.active {\r\n\t\t\t\tcolor: #667eea;\r\n\t\t\t\tbackground: #f7f8ff;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</style>\r\n\r\n\r\n","import mod from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./query.vue?vue&type=style&index=0&id=39914319&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./query.vue?vue&type=style&index=0&id=39914319&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1767327913485\n      var cssReload = require(\"D:/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}