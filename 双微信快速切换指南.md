# 👥 双微信快速切换指南

> 📌 **放在桌面，随时查阅**

---

## 🎯 核心原理

```
一个微信 = 一个 OpenID = 一个身份
想测试不同角色 → 需要两个微信账号
```

---

## ⚡ 快速切换（3步）

### 切换到账号A（管理员）

```
1. 点击开发者工具右上角头像 → 退出登录
2. 用账号A扫码登录
3. 按 Ctrl + B 编译

✅ 现在是管理员
```

### 切换到账号B（项目经理）

```
1. 点击开发者工具右上角头像 → 退出登录
2. 用账号B扫码登录
3. 按 Ctrl + B 编译

✅ 现在是项目经理
```

---

## 📱 真机调试（更真实）

```
1. 点击开发者工具顶部"真机调试"
2. 用想测试的账号扫码
3. 在手机上测试

✅ 最真实的测试环境
```

---

## 🔥 双设备同时测试（最高效）

```
电脑（开发者工具）：账号A - 管理员
手机（真机调试）：账号B - 项目经理

同时操作，测试双人协作！
```

---

## 🔍 查看当前角色

**在控制台输入：**

```javascript
const userInfo = uni.getStorageSync('userInfo')
console.log('当前角色:', userInfo.roleText)
console.log('OpenID:', userInfo.openid)
```

---

## 🆘 常见问题

### 切换后还是原来的身份？

```
1. 清缓存：开发者工具 → 清缓存 → 清除数据缓存
2. 重新编译：Ctrl + B
```

### 忘记 OpenID？

```javascript
wx.cloud.callFunction({
  name: 'login',
  success: res => console.log('OpenID:', res.result.openid)
})
```

### 没有第二个微信？

```
方案1：借用家人/朋友的微信
方案2：在数据库中修改 role 字段，然后重新编译
```

---

## 📋 角色权限速查

| 功能 | 管理员 | 项目经理 | 医生 | 药房 |
|------|--------|----------|------|------|
| 用户管理 | ✅ 全部 | ✅ 部分 | ❌ | ❌ |
| 门诊登记 | ✅ | ✅ | ✅ | ❌ |
| 入库管理 | ✅ | ✅ | ❌ | ✅ |
| 入库复核 | ✅ | ✅ | ❌ | ❌ |
| 系统设置 | ✅ | ❌ | ❌ | ❌ |

---

## 🎯 测试场景示例

### 测试双人复核

```
1. 电脑（管理员）：创建入库单 → 签名提交
2. 切换到项目经理（或用手机真机调试）
3. 手机（项目经理）：复核 → 签名确认
4. ✅ 验证流程完整
```

---

## 💡 开发技巧

```
✅ 日常开发：用主账号（管理员）
✅ 测试协作：切换到备用账号
✅ 重要功能：用真机调试
✅ 双人流程：用双设备同时测试
```

---

## 📞 快速诊断

```javascript
// 检查登录状态
const userInfo = uni.getStorageSync('userInfo')
console.log('登录:', userInfo ? '✅' : '❌')
console.log('角色:', userInfo?.roleText)

// 测试云函数
wx.cloud.callFunction({
  name: 'login',
  success: res => console.log('云函数正常 ✅')
})
```

---

## ⏱️ 时间成本

```
切换账号：1分钟
真机调试：2分钟
双设备测试：3分钟
```

---

**💡 提示：** 详细说明请查看 `docs/双微信开发登录操作指南.md`

**最后更新：** 2025-11-10

