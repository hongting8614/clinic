# ⚡ 快速解决：修改代码不生效

## 🎯 问题确认

✅ **已检查**：
- 源代码文件：`pages-sub/clinic/add.vue` ✅ 唯一，无重复
- 构建产物：`unpackage/dist/dev/mp-weixin/pages-sub/clinic/add.js` ⚠️ 最后编译时间：2025-12-12 15:19

## 🔧 立即解决（3步）

### 步骤1：清理构建产物

**方法A：使用脚本（推荐）**
```powershell
# 双击运行
清理构建产物.bat
```

**方法B：手动删除**
```powershell
# 在项目根目录执行
Remove-Item -Recurse -Force unpackage\dist
```

### 步骤2：清除微信开发者工具缓存

在微信开发者工具中：
1. 点击菜单：**工具** → **清除缓存**
2. 勾选：
   - ✅ **清除数据缓存**
   - ✅ **清除文件缓存**
3. 点击 **清除**

### 步骤3：重新编译

1. 在微信开发者工具中点击 **编译** 按钮
2. 或按快捷键：`Ctrl + B`
3. 等待编译完成（看到"编译成功"）

---

## ✅ 验证修改是否生效

1. 重新打开修改的页面（门诊登记表）
2. 检查你的修改是否显示
3. 如果还是不生效，继续看下面的"深度排查"

---

## 🔍 深度排查（如果还是不生效）

### 检查1：确认修改了正确的文件

✅ **正确**：修改 `pages-sub/clinic/add.vue`（源代码）
❌ **错误**：修改 `unpackage/dist/.../add.js`（编译后的文件）

### 检查2：确认文件已保存

- 按 `Ctrl + S` 保存文件
- 检查文件标签页是否有 `*` 标记（未保存）

### 检查3：检查编译日志

在微信开发者工具中：
1. 查看底部的 **编译日志**
2. 确认没有编译错误
3. 确认编译成功

### 检查4：检查页面路径

确认 `pages.json` 中配置正确：
```json
{
  "root": "pages-sub/clinic",
  "pages": [
    {
      "path": "add",
      "style": {
        "navigationBarTitleText": "门诊登记表"
      }
    }
  ]
}
```

---

## 🚨 常见问题

### Q1：修改后自动编译了，但还是旧内容？
**A**：清除缓存 + 重新编译

### Q2：编译后页面报错？
**A**：检查代码语法，查看编译日志中的错误信息

### Q3：修改了样式不生效？
**A**：清除缓存，确保 `.wxss` 文件也重新编译

### Q4：修改了逻辑代码不生效？
**A**：检查是否有 JavaScript 语法错误，查看控制台

---

## 💡 预防措施

### 开发时的工作流程

```
1. 修改源代码（.vue 文件）
   ↓
2. 保存文件（Ctrl + S）
   ↓
3. 等待自动编译（或手动 Ctrl + B）
   ↓
4. 查看效果
```

### 如果修改不生效，立即执行：

1. ✅ 清理构建产物（运行 `清理构建产物.bat`）
2. ✅ 清除微信开发者工具缓存
3. ✅ 重新编译（Ctrl + B）

---

## 📞 还是不行？

如果以上方法都不行，请检查：

1. **文件编码**：确保文件是 UTF-8 编码
2. **语法错误**：检查代码是否有语法错误
3. **文件权限**：确保文件没有被锁定
4. **微信开发者工具版本**：更新到最新版本

---

**提示**：每次修改代码后，如果发现不生效，先执行"清理构建产物 + 清除缓存 + 重新编译"这三步，90% 的问题都能解决！


