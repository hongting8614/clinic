# ğŸ” æ£€æŸ¥ç”¨æˆ·ä¿¡æ¯

## é—®é¢˜ç°è±¡

ç®¡ç†å‘˜ç™»å½•åï¼Œè¿›å…¥æ–°å¢å…¥åº“å•é¡µé¢ï¼Œæç¤º"è¯·å…ˆç™»å½•"ã€‚

## é—®é¢˜åˆ†æ

### ç™»å½•æ£€æŸ¥ä»£ç 

```javascript
// pages-sub/in/add.vue ç¬¬454è¡Œ
if (!userInfo || !userInfo.name) {
  // æç¤ºæœªç™»å½•
}
```

### å¯èƒ½çš„åŸå› 

1. **ç”¨æˆ·ä¿¡æ¯ä¸­æ²¡æœ‰ `name` å­—æ®µ**
   - å¯èƒ½æ˜¯ `realName` æˆ–å…¶ä»–å­—æ®µ
   - éœ€è¦æ£€æŸ¥å®é™…çš„ç”¨æˆ·ä¿¡æ¯ç»“æ„

2. **ç”¨æˆ·ä¿¡æ¯æœªæ­£ç¡®ä¿å­˜**
   - ç™»å½•æ—¶æ²¡æœ‰ä¿å­˜åˆ° `storage`
   - æˆ–è€…ä¿å­˜çš„å­—æ®µåä¸å¯¹

## ç«‹å³æ£€æŸ¥

### åœ¨æ§åˆ¶å°è¿è¡Œ

```javascript
// è·å–ç”¨æˆ·ä¿¡æ¯
const userInfo = uni.getStorageSync('userInfo')

console.log('========== ç”¨æˆ·ä¿¡æ¯æ£€æŸ¥ ==========')
console.log('å®Œæ•´ç”¨æˆ·ä¿¡æ¯:', userInfo)
console.log('ç”¨æˆ·ID:', userInfo._id)
console.log('ç”¨æˆ·å(name):', userInfo.name)
console.log('çœŸå®å§“å(realName):', userInfo.realName)
console.log('è§’è‰²:', userInfo.role)
console.log('OpenID:', userInfo.openid)
console.log('================================')
```

### æœŸæœ›çš„ç”¨æˆ·ä¿¡æ¯ç»“æ„

```javascript
{
  _id: "xxx",
  openid: "xxx",
  name: "ç®¡ç†å‘˜",      // æˆ–è€…
  realName: "å¼ ä¸‰",    // æˆ–è€…
  role: "admin",
  status: "active"
}
```

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šä¿®æ”¹ç™»å½•æ£€æŸ¥é€»è¾‘

å¦‚æœç”¨æˆ·ä¿¡æ¯ä¸­æ˜¯ `realName` è€Œä¸æ˜¯ `name`ï¼š

```javascript
// ä¿®æ”¹å‰
if (!userInfo || !userInfo.name) {
  // ...
}

// ä¿®æ”¹å
if (!userInfo || (!userInfo.name && !userInfo.realName)) {
  // ...
}

// æˆ–è€…
if (!userInfo || !userInfo._id) {
  // ...
}
```

### æ–¹æ¡ˆ2ï¼šç»Ÿä¸€ç”¨æˆ·ä¿¡æ¯å­—æ®µ

åœ¨ç™»å½•æ—¶ç¡®ä¿ä¿å­˜ `name` å­—æ®µï¼š

```javascript
// ç™»å½•æˆåŠŸå
const userData = {
  _id: user._id,
  openid: user.openid,
  name: user.realName || user.name,  // ç»Ÿä¸€ä½¿ç”¨ name
  realName: user.realName,
  role: user.role,
  status: user.status
}
uni.setStorageSync('userInfo', userData)
```

## ä¸‹ä¸€æ­¥

è¯·åœ¨æ§åˆ¶å°è¿è¡Œæ£€æŸ¥ä»£ç ï¼Œå‘Šè¯‰æˆ‘ï¼š
1. `userInfo.name` çš„å€¼æ˜¯ä»€ä¹ˆï¼Ÿ
2. `userInfo.realName` çš„å€¼æ˜¯ä»€ä¹ˆï¼Ÿ
3. ç”¨æˆ·ä¿¡æ¯çš„å®Œæ•´ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ

