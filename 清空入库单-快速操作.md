# 🗑️ 清空入库单 - 快速操作

## ⚡ 最快方法（3步完成）

### 步骤1：上传云函数（只需一次）

```
在微信开发者工具中：
1. 找到 cloudfunctions/clearInRecords
2. 右键 → "上传并部署：云端安装依赖"
3. 等待完成
```

### 步骤2：在控制台运行（每次清空）

**复制以下代码到控制台：**

```javascript
wx.cloud.callFunction({
  name: 'clearInRecords',
  success: res => {
    console.log('✅ 已删除', res.result.deletedCount, '条入库单')
  },
  fail: err => {
    console.error('❌ 失败：', err)
  }
})
```

### 步骤3：验证

```
在小程序中查看"入库记录"
→ 应该显示"暂无数据"
```

---

## 🎯 一键清空脚本（带确认）

```javascript
// 复制到控制台运行
(function() {
  if (!wx || !wx.cloud) {
    console.error('❌ 云开发未初始化')
    return
  }
  
  console.log('⚠️ 即将删除所有入库单...')
  
  wx.cloud.callFunction({
    name: 'clearInRecords',
    success: res => {
      if (res.result.success) {
        console.log('========================================')
        console.log('✅ 删除成功！')
        console.log('删除数量：', res.result.deletedCount)
        console.log('========================================')
      } else {
        console.error('❌ 删除失败：', res.result.message)
      }
    },
    fail: err => {
      console.error('❌ 调用失败：', err)
    }
  })
})()
```

---

## 📋 权限要求

```
✅ 必须是管理员（admin）才能执行
❌ 其他角色会提示"只有管理员可以执行此操作"
```

---

## ⚠️ 注意事项

```
⚠️ 会删除所有入库单（包括已复核的）
⚠️ 不会删除库存数据
⚠️ 不会删除药材档案
⚠️ 操作不可恢复，请谨慎使用
```

---

**创建时间：** 2025年11月10日


